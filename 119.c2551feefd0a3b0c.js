"use strict";(self.webpackChunkagenda_angular=self.webpackChunkagenda_angular||[]).push([[119],{4942:(oe,R,a)=>{a.r(R),a.d(R,{EventoViewDetailComponent:()=>x});var h=a(4650),m=a(519);let x=(()=>{class b{}return b.\u0275fac=function(g){return new(g||b)},b.\u0275cmp=h.Xpm({type:b,selectors:[["evento-view-detail"]],inputs:{data:"data"},decls:1,vars:4,consts:[[3,"disabled","data"]],template:function(g,V){1&g&&h._UZ(0,"evento-view-edit",0),2&g&&(h.Akn("detail"),h.Q6J("disabled",!0)("data",V.data))},dependencies:[m.EventoViewEditComponent],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0}),b})()},3955:(oe,R,a)=>{a.r(R),a.d(R,{EventoViewDetailModule:()=>Q});var h=a(6895),m=a(9383),x=a(2289),b=a(4859),E=a(7219),g=a(1614),V=a(2375),c=a(2782),H=a(5029),G=a(4650);let Q=(()=>{class Z{}return Z.\u0275fac=function(F){return new(F||Z)},Z.\u0275mod=G.oAB({type:Z}),Z.\u0275inj=G.cJS({imports:[E.V,h.ez,g.r,H.EventoViewEditModule,c.n,x.xu,V.W,b.ot,m.aw]}),Z})()},519:(oe,R,a)=>{a.r(R),a.d(R,{EventoViewEditComponent:()=>ae});var h=a(6537),m=a(4006),x=a(727),b=a(262),E=a(2843),g=a(8505),V=a(5097),c=a(4650),H=a(5503),G=a(6895),Q=a(3076),Z=a(1600),u=a(791),F=a(502),U=a(9383);function S(w,M){if(1&w&&(c.TgZ(0,"editable-text",6),c.ALo(1,"translate"),c.ALo(2,"translate"),c._UZ(3,"editable-error",7),c.ALo(4,"translate"),c._UZ(5,"editable-error",8),c.ALo(6,"translate"),c.qZA()),2&w){const f=c.oxw(2);c.s9C("label",c.lcZ(1,6,"proyecto.evento-view.form.nombre.label")),c.s9C("placeholder",c.lcZ(2,8,"proyecto.evento-view.form.nombre.placeholder")),c.Q6J("control",f.fields.nombre.control)("required",!0),c.xp6(3),c.s9C("message",c.lcZ(4,10,"proyecto.evento-view.form.nombre.rule.required")),c.xp6(2),c.s9C("message",c.lcZ(6,12,"proyecto.evento-view.form.nombre.rule.maxlength"))}}function e(w,M){if(1&w&&(c.TgZ(0,"editable-text",9),c.ALo(1,"translate"),c.ALo(2,"translate"),c._UZ(3,"editable-error",8),c.ALo(4,"translate"),c.qZA()),2&w){const f=c.oxw(2);c.s9C("label",c.lcZ(1,4,"proyecto.evento-view.form.descripcion.label")),c.s9C("placeholder",c.lcZ(2,6,"proyecto.evento-view.form.descripcion.placeholder")),c.Q6J("control",f.fields.descripcion.control),c.xp6(3),c.s9C("message",c.lcZ(4,8,"proyecto.evento-view.form.descripcion.rule.maxlength"))}}function W(w,M){if(1&w&&(c._UZ(0,"editable-decimal",10),c.ALo(1,"translate"),c.ALo(2,"translate")),2&w){const f=c.oxw(2);c.s9C("label",c.lcZ(1,3,"proyecto.evento-view.form.latitud-inicial.label")),c.s9C("placeholder",c.lcZ(2,5,"proyecto.evento-view.form.latitud-inicial.placeholder")),c.Q6J("control",f.fields.latitudInicial.control)}}function le(w,M){if(1&w&&(c._UZ(0,"editable-decimal",11),c.ALo(1,"translate"),c.ALo(2,"translate")),2&w){const f=c.oxw(2);c.s9C("label",c.lcZ(1,3,"proyecto.evento-view.form.longitud-inicial.label")),c.s9C("placeholder",c.lcZ(2,5,"proyecto.evento-view.form.longitud-inicial.placeholder")),c.Q6J("control",f.fields.longitudInicial.control)}}function se(w,M){if(1&w&&(c._UZ(0,"editable-integer",12),c.ALo(1,"translate"),c.ALo(2,"translate")),2&w){const f=c.oxw(2);c.s9C("label",c.lcZ(1,3,"proyecto.evento-view.form.zoom-inicial.label")),c.s9C("placeholder",c.lcZ(2,5,"proyecto.evento-view.form.zoom-inicial.placeholder")),c.Q6J("control",f.fields.zoomInicial.control)}}function ne(w,M){if(1&w&&(c.YNc(0,S,7,14,"editable-text",1),c.YNc(1,e,5,10,"editable-text",2),c.YNc(2,W,3,7,"editable-decimal",3),c.YNc(3,le,3,7,"editable-decimal",4),c.YNc(4,se,3,7,"editable-integer",5)),2&w){const f=c.oxw();c.Q6J("ngIf",null==f.fields.nombre?null:f.fields.nombre.visible),c.xp6(1),c.Q6J("ngIf",null==f.fields.descripcion?null:f.fields.descripcion.visible),c.xp6(1),c.Q6J("ngIf",null==f.fields.latitudInicial?null:f.fields.latitudInicial.visible),c.xp6(1),c.Q6J("ngIf",null==f.fields.longitudInicial?null:f.fields.longitudInicial.visible),c.xp6(1),c.Q6J("ngIf",null==f.fields.zoomInicial?null:f.fields.zoomInicial.visible)}}let ae=(()=>{class w{constructor(f,_,B){this.eventoRepository=f,this.cdRef=_,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={nombre:{visible:!0,editable:!0,disabled:!1},descripcion:{visible:!0,editable:!0,disabled:!1},latitudInicial:{visible:!0,editable:!0,disabled:!1},longitudInicial:{visible:!0,editable:!0,disabled:!1},zoomInicial:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.subscriptions=new x.w0,this.initialsAndDefaults={nombre:""},this.form=B.group({nombre:this.fields.nombre.control=new m.NI("",[m.kI.required,m.kI.maxLength(250)]),descripcion:this.fields.descripcion.control=new m.NI("",[m.kI.maxLength(250)]),latitudInicial:this.fields.latitudInicial.control=new m.NI("",[]),longitudInicial:this.fields.longitudInicial.control=new m.NI("",[]),zoomInicial:this.fields.zoomInicial.control=new m.NI("",[])})}ngOnInit(){}ngAfterViewInit(){var f;this.acl?this.updateAcl():null!==(f=this.data)&&void 0!==f&&f.uid?this.eventoRepository.specificAcl(this.data.uid).subscribe(_=>{this.acl=_,this.updateAcl()}):this.eventoRepository.genericAcl().subscribe(_=>{this.acl=_,this.updateAcl()}),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(f){f.defaults&&Object.assign(this.initialsAndDefaults,this.defaults),f.fixed&&(this.fixedFields=[],this.fixed.forEach&&this.fixed.forEach(_=>{this.fixedFields.push(_)})),f.acl&&this.updateAcl()}clearErrors(){this.formView&&this.formView.clearErrors()}saveValue(){if(this.formView){const f=this.eventoRepository.key(this.data),_=this.formView.retrieveValue();return(f?this.eventoRepository.update(f,_):this.eventoRepository.add(_)).pipe((0,V.I)(),(0,b.K)(Y=>{var T;return f&&this.eventoRepository.retrieve(f).subscribe(P=>{this.formView&&this.formView.markOriginal(P)}),null===(T=this.formView)||void 0===T||T.showError(Y),(0,E._)(()=>Y)}),(0,g.b)(Y=>{var T;Object.keys(Y).forEach(P=>{this.data[P]=Y[P],this.formView&&(this.formView.data[P]=Y[P])}),null===(T=this.formView)||void 0===T||T.refresh()}))}throw new Error("Intentando guardar sin formView")}updateValues(){var f,_;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(f=this.form)||void 0===f||!f.dirty),this.invalid=!(null===(_=this.form)||void 0===_||!_.invalid),this.cdRef.detectChanges()}updateAcl(){var f,_;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(f=this.form)||void 0===f||!f.dirty),this.invalid=!(null===(_=this.form)||void 0===_||!_.invalid),this.cdRef.detectChanges()}}return w.\u0275fac=function(f){return new(f||w)(c.Y36(H.h),c.Y36(c.sBO),c.Y36(m.qu))},w.\u0275cmp=c.Xpm({type:w,selectors:[["evento-view-edit"]],viewQuery:function(f,_){if(1&f&&c.Gf(h.k,7),2&f){let B;c.iGM(B=c.CRH())&&(_.formView=B.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",data:"data"},features:[c.TTD],decls:2,vars:10,consts:[[1,"main-form","form",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl","data"],["class","nombre","id","editable-evento-nombre",3,"control","required","label","placeholder",4,"ngIf"],["class","descripcion","id","editable-evento-descripcion",3,"control","label","placeholder",4,"ngIf"],["class","latitud-inicial","id","editable-evento-latitudInicial",3,"control","label","placeholder",4,"ngIf"],["class","longitud-inicial","id","editable-evento-longitudInicial",3,"control","label","placeholder",4,"ngIf"],["class","zoom-inicial","id","editable-evento-zoomInicial",3,"control","label","placeholder",4,"ngIf"],["id","editable-evento-nombre",1,"nombre",3,"control","required","label","placeholder"],["for","required",3,"message"],["for","maxlength",3,"message"],["id","editable-evento-descripcion",1,"descripcion",3,"control","label","placeholder"],["id","editable-evento-latitudInicial",1,"latitud-inicial",3,"control","label","placeholder"],["id","editable-evento-longitudInicial",1,"longitud-inicial",3,"control","label","placeholder"],["id","editable-evento-zoomInicial",1,"zoom-inicial",3,"control","label","placeholder"]],template:function(f,_){1&f&&(c.TgZ(0,"form-view",0),c.YNc(1,ne,5,5,"ng-template"),c.qZA()),2&f&&c.Q6J("messagePreffix","proyecto.evento")("form",_.form)("disabled",_.disabled)("fixed",_.fixedFields)("hidden",_.hidden)("editables",_.editables)("visibles",_.visibles)("defaults",_.initialsAndDefaults)("acl",_.acl)("data",_.data)},dependencies:[G.O5,Q.S,Z.Y,u.IK,F.x,h.k,U.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.nombre[_ngcontent-%COMP%], .descripcion[_ngcontent-%COMP%], .latitud-inicial[_ngcontent-%COMP%], .longitud-inicial[_ngcontent-%COMP%], .zoom-inicial[_ngcontent-%COMP%]{flex-basis:100%}@media only screen and (min-width: 992px){.nombre[_ngcontent-%COMP%], .descripcion[_ngcontent-%COMP%], .latitud-inicial[_ngcontent-%COMP%], .longitud-inicial[_ngcontent-%COMP%], .zoom-inicial[_ngcontent-%COMP%]{flex-basis:50%}}"],changeDetection:0}),w})()},5029:(oe,R,a)=>{a.r(R),a.d(R,{EventoViewEditModule:()=>U});var h=a(6895),m=a(9383),x=a(2289),b=a(4859),E=a(7219),g=a(1614),V=a(2375),c=a(2782),H=a(7893),G=a(553),Q=a(2069),Z=a(4144),u=a(4006),F=a(4650);let U=(()=>{class S{}return S.\u0275fac=function(W){return new(W||S)},S.\u0275mod=F.oAB({type:S}),S.\u0275inj=F.cJS({imports:[E.V,h.ez,G.L,Q.W,g.r,H.o,c.n,u.u5,x.xu,V.W,b.ot,Z.c,u.UX,m.aw]}),S})()},5119:(oe,R,a)=>{a.r(R),a.d(R,{EventoViewLazyModule:()=>Ri});var h=a(6895),m=a(9383),x=a(2289),b=a(4859),E=a(7219),g=a(1614),V=a(2375),c=a(2782),H=a(5029),G=a(3955),Q=a(7893),Z=a(4144),u=a(4006),F=a(7392),U=a(960),S=a(2499),e=a(4650);let W=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,S.r,g.r,U.M,c.n,u.u5,x.xu,V.W,b.ot,Z.c,u.UX,m.aw]}),o})(),le=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,g.r,c.n,x.xu,V.W,b.ot,W,m.aw]}),o})(),se=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,g.r,U.M,Q.o,c.n,u.u5,x.xu,V.W,b.ot,F.Ps,Z.c,le,W,u.UX,m.aw]}),o})(),ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,g.r,U.M,c.n,u.u5,x.xu,V.W,b.ot,Z.c,u.UX,m.aw]}),o})(),ae=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,g.r,c.n,x.xu,V.W,b.ot,ne,m.aw]}),o})(),w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,g.r,U.M,Q.o,c.n,u.u5,x.xu,V.W,b.ot,F.Ps,Z.c,u.UX,ae,ne,m.aw]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,g.r,U.M,c.n,u.u5,x.xu,V.W,b.ot,Z.c,u.UX,m.aw]}),o})(),f=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,g.r,M,c.n,x.xu,V.W,b.ot,m.aw]}),o})(),_=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,g.r,U.M,Q.o,f,M,c.n,u.u5,x.xu,V.W,b.ot,F.Ps,Z.c,u.UX,m.aw]}),o})(),B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[E.V,h.ez,g.r,Q.o,_,G.EventoViewDetailModule,H.EventoViewEditModule,c.n,u.u5,x.xu,V.W,b.ot,F.Ps,Z.c,se,u.UX,w,m.aw]}),o})();var Y=a(752),T=a(8862),P=a(7009),L=a(5503),y=a(7738),j=a(3596),z=a(727),ce=a(4906),K=a(2433),re=a(5276);let ee=(()=>{class o extends K._j{constructor(t){super({uid:"uid",group:"net-civeira-ejemplos-agenda",name:"notificacionEvento",path:"proyecto-notificaciones-eventos",acl:"proyecto-notificaciones-eventos"},t)}mapperForRelation(t){if("evento"===t){const i=new L.h(this._handlerProvider);return new K.cr(i._meta,i)}if("usuario"===t){const i=new ce.m(this._handlerProvider);return new K.cr(i._meta,i)}return null}references(){return{evento:{type:"Evento"},usuario:{type:"Users"}}}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(re.D))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),te=(()=>{class o extends K._j{constructor(t){super({uid:"uid",group:"net-civeira-ejemplos-agenda",name:"relacionEvento",path:"proyecto-relaciones-eventos",acl:"proyecto-relaciones-eventos"},t)}mapperForRelation(t){if("padre"===t){const i=new L.h(this._handlerProvider);return new K.cr(i._meta,i)}if("hijo"===t){const i=new L.h(this._handlerProvider);return new K.cr(i._meta,i)}return null}references(){return{padre:{type:"Evento"},hijo:{type:"Evento"}}}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(re.D))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var de=a(112);let ie=(()=>{class o extends K._j{constructor(t){super({uid:"uid",group:"net-civeira-ejemplos-agenda",name:"eventoDocumento",path:"proyecto-eventos-documentos",acl:"proyecto-eventos-documentos"},t)}mapperForRelation(t){if("evento"===t){const i=new L.h(this._handlerProvider);return new K.cr(i._meta,i)}if("documento"===t){const i=new de.Y(this._handlerProvider);return new K.cr(i._meta,i)}return null}references(){return{evento:{type:"Evento"},documento:{type:"Documento"}}}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(re.D))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=a(8034),ue=a(2169);class fe{static clone(l){const t=new fe;return t.pageSize=l.pageSize,t.pageNumber=l.pageNumber,t.lastRow=l.lastRow,t.search=l.search,t.evento="string"==typeof l.evento||l.evento instanceof String?l.evento:l.evento?l.evento.uid:void 0,t.documento="string"==typeof l.documento||l.documento instanceof String?l.documento:l.documento?l.documento.uid:void 0,t.include=l.include?ve.clone(l.include):void 0,t}}class ve{includeAll(l){this.evento=!0,this.documento=!0}toArgs(l){const t=this.joinArgs("include.");return t.length>0&&-1===l.indexOf("?")&&(l+="?"),l+t}joinArgs(l){let t="";return this.evento&&(t+="&"+l+"evento=true"),this.documentoAnd?t+=this.documentoAnd.joinArgs(l+"documentoAnd."):this.documento&&(t+="&"+l+"documento=true"),t}static clone(l){const t=new ve;return t.documento=l.documento,t.documentoAnd=ue.zk.clone(l.documentoAnd),t}}var O=a(6537),A=a(2076),J=a(5577),I=a(4004),N=a(9646),me=a(262),pe=a(2843),he=a(8505),_e=a(5097),X=a(970),be=a(791),$=a(9087),q=a(9952);function Re(o,l){if(1&o&&e._UZ(0,"editable-create-related",7),2&o){const t=e.oxw(3);e.Q6J("build",t.loadCreateRelatedEventoDocumentoEvento)}}function Me(o,l){if(1&o&&(e.TgZ(0,"editable-selectone",3),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,Re,1,1,"editable-create-related",4),e._UZ(4,"editable-view-related",5),e.ALo(5,"translate"),e._UZ(6,"editable-error",6),e.ALo(7,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,10,"proyecto.evento-documento-view.form.evento.label")),e.s9C("placeholder",e.lcZ(2,12,"proyecto.evento-documento-view.form.evento.placeholder")),e.Q6J("control",t.fields.evento.control)("required",!0)("search",t.relatedEventoDocumentoEvento)("retrieve",t.retrieveEventoDocumentoEvento),e.xp6(3),e.Q6J("ngIf",t.allowCreateEventoViewEvento),e.xp6(1),e.s9C("title",e.lcZ(5,14,"proyecto.evento-view.evento.showRelated")),e.Q6J("build",t.loadViewRelatedEventoDocumentoEvento),e.xp6(2),e.s9C("message",e.lcZ(7,16,"proyecto.evento-documento-view.form.evento.rule.required"))}}function Te(o,l){if(1&o&&e._UZ(0,"editable-create-related",10),2&o){const t=e.oxw(3);e.Q6J("build",t.loadCreateRelatedEventoDocumentoDocumento)}}function Le(o,l){if(1&o&&(e.TgZ(0,"editable-selectone",8),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,Te,1,1,"editable-create-related",9),e._UZ(4,"editable-view-related",5),e.ALo(5,"translate"),e._UZ(6,"editable-error",6),e.ALo(7,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,10,"proyecto.evento-documento-view.form.documento.label")),e.s9C("placeholder",e.lcZ(2,12,"proyecto.evento-documento-view.form.documento.placeholder")),e.Q6J("control",t.fields.documento.control)("required",!0)("search",t.relatedEventoDocumentoDocumento)("retrieve",t.retrieveEventoDocumentoDocumento),e.xp6(3),e.Q6J("ngIf",t.allowCreateDocumentoViewDocumento),e.xp6(1),e.s9C("title",e.lcZ(5,14,"proyecto.documento-view.documento.showRelated")),e.Q6J("build",t.loadViewRelatedEventoDocumentoDocumento),e.xp6(2),e.s9C("message",e.lcZ(7,16,"proyecto.evento-documento-view.form.documento.rule.required"))}}function Oe(o,l){if(1&o&&(e.YNc(0,Me,8,18,"editable-selectone",1),e.YNc(1,Le,8,18,"editable-selectone",2)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.evento?null:t.fields.evento.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.documento?null:t.fields.documento.visible)}}let xe=(()=>{class o{constructor(t,i,n,s,v,d){this.eventoDocumentoRepository=t,this.eventoRepository=i,this.documentoRepository=n,this.cdRef=s,this.appState=v,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={evento:{visible:!0,editable:!0,disabled:!1},documento:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new z.w0,this.allowCreateEventoViewEvento=!1,this.allowCreateDocumentoViewDocumento=!1,this.loadCreateRelatedEventoDocumentoEvento=r=>(0,A.D)(Promise.resolve().then(a.bind(a,5029))).pipe((0,J.z)(()=>(0,A.D)(Promise.resolve().then(a.bind(a,519))).pipe((0,I.U)(({EventoViewEditComponent:p})=>{const C=r.createComponent(p);return C.instance.data=C.instance.initialsAndDefaults,C.instance})))),this.loadViewRelatedEventoDocumentoEvento=r=>(0,A.D)(Promise.resolve().then(a.bind(a,3955))).pipe((0,J.z)(()=>(0,A.D)(Promise.resolve().then(a.bind(a,4942))).pipe((0,I.U)(({EventoViewDetailComponent:p})=>{const C=r.createComponent(p);return C.instance.data=this.fields.evento.value,C.instance})))),this.relatedEventoDocumentoEvento=r=>this.eventoRepository.list(this.filter(new j.er,r,this.eventoDocumentoEventoFilter)),this.retrieveEventoDocumentoEvento=r=>this.eventoRepository.retrieve(r.uid),this.loadCreateRelatedEventoDocumentoDocumento=r=>(0,A.D)(Promise.all([a.e(602),a.e(135),a.e(331),a.e(592)]).then(a.bind(a,5002))).pipe((0,J.z)(()=>(0,A.D)(Promise.all([a.e(602),a.e(135),a.e(331),a.e(825)]).then(a.bind(a,3825))).pipe((0,I.U)(({DocumentoViewEditComponent:p})=>{const C=r.createComponent(p);return C.instance.data=C.instance.initialsAndDefaults,C.instance})))),this.loadViewRelatedEventoDocumentoDocumento=r=>(0,A.D)(Promise.all([a.e(602),a.e(135),a.e(331),a.e(592)]).then(a.bind(a,2669))).pipe((0,J.z)(()=>(0,A.D)(Promise.all([a.e(602),a.e(135),a.e(331),a.e(825),a.e(592)]).then(a.bind(a,9122))).pipe((0,I.U)(({DocumentoViewDetailComponent:p})=>{const C=r.createComponent(p);return C.instance.data=this.fields.documento.value,C.instance})))),this.relatedEventoDocumentoDocumento=r=>this.documentoRepository.list(this.filter(new ue.Xh,r,this.eventoDocumentoDocumentoFilter)),this.retrieveEventoDocumentoDocumento=r=>this.documentoRepository.retrieve(r.uid),this.initialsAndDefaults={evento:(0,N.of)({$ref:0}),documento:(0,N.of)({$ref:0})},this.form=d.group({evento:this.fields.evento.control=new u.NI("",[u.kI.required]),documento:this.fields.documento.control=new u.NI("",[u.kI.required])}),this.subscriptions.add(this.eventoRepository.genericAcl().subscribe(r=>{if(this.allowCreateEventoViewEvento=!1,r.allows)for(const p of r.allows)"create"===p.name&&(this.allowCreateEventoViewEvento=p.allowed||!1)})),this.subscriptions.add(this.documentoRepository.genericAcl().subscribe(r=>{if(this.allowCreateDocumentoViewDocumento=!1,r.allows)for(const p of r.allows)"create"===p.name&&(this.allowCreateDocumentoViewDocumento=p.allowed||!1)}))}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){var t;this.acl?this.updateAcl():null!==(t=this.data)&&void 0!==t&&t.uid?this.eventoDocumentoRepository.specificAcl(this.data.uid).subscribe(i=>{this.acl=i,this.updateAcl()}):this.eventoDocumentoRepository.genericAcl().subscribe(i=>{this.acl=i,this.updateAcl()}),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(t){t.defaults&&Object.assign(this.initialsAndDefaults,this.defaults),t.fixed&&(this.fixedFields=[],this.fixed.forEach&&this.fixed.forEach(i=>{this.fixedFields.push(i)})),t.acl&&this.updateAcl()}clearErrors(){this.formView&&this.formView.clearErrors()}saveValue(){if(this.formView){const t=this.eventoDocumentoRepository.key(this.data),i=this.formView.retrieveValue();return(t?this.eventoDocumentoRepository.update(t,i):this.eventoDocumentoRepository.add(i)).pipe((0,_e.I)(),(0,me.K)(s=>{var v;return t&&this.eventoDocumentoRepository.retrieve(t).subscribe(d=>{this.formView&&this.formView.markOriginal(d)}),null===(v=this.formView)||void 0===v||v.showError(s),(0,pe._)(()=>s)}),(0,he.b)(s=>{var v;Object.keys(s).forEach(d=>{this.data[d]=s[d],this.formView&&(this.formView.data[d]=s[d])}),null===(v=this.formView)||void 0===v||v.refresh()}))}throw new Error("Intentando guardar sin formView")}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,n){if(t.search=i,n)for(const s of Object.keys(n))t[s]=n[s];if(this.contextFilter)for(const s of Object.keys(this.contextFilter))t[s]=this.contextFilter[s];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ie),e.Y36(L.h),e.Y36(de.Y),e.Y36(e.sBO),e.Y36(X.aB),e.Y36(u.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["evento-documento-view-edit"]],viewQuery:function(t,i){if(1&t&&e.Gf(O.k,7),2&t){let n;e.iGM(n=e.CRH())&&(i.formView=n.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",data:"data",eventoDocumentoEventoFilter:"eventoDocumentoEventoFilter",eventoDocumentoDocumentoFilter:"eventoDocumentoDocumentoFilter"},features:[e.TTD],decls:2,vars:10,consts:[[1,"main-form","form",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl","data"],["class","evento","id","editable-evento-documento-evento","display","nombre",3,"control","required","label","placeholder","search","retrieve",4,"ngIf"],["class","documento","id","editable-evento-documento-documento","display","uid",3,"control","required","label","placeholder","search","retrieve",4,"ngIf"],["id","editable-evento-documento-evento","display","nombre",1,"evento",3,"control","required","label","placeholder","search","retrieve"],["title","proyecto.eventoView.evento.createNew",3,"build",4,"ngIf"],[3,"title","build"],["for","required",3,"message"],["title","proyecto.eventoView.evento.createNew",3,"build"],["id","editable-evento-documento-documento","display","uid",1,"documento",3,"control","required","label","placeholder","search","retrieve"],["title","proyecto.documentoView.documento.createNew",3,"build",4,"ngIf"],["title","proyecto.documentoView.documento.createNew",3,"build"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,Oe,2,2,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.eventoDocumento")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)("data",i.data)},dependencies:[h.O5,be.IK,$.XX,$.MI,q.s,O.k,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.evento[_ngcontent-%COMP%], .documento[_ngcontent-%COMP%]{flex-basis:100%}@media only screen and (min-width: 992px){.evento[_ngcontent-%COMP%], .documento[_ngcontent-%COMP%]{flex-basis:50%}}"],changeDetection:0}),o})(),Ne=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["evento-documento-view-detail"]],inputs:{data:"data"},decls:1,vars:4,consts:[[3,"disabled","data"]],template:function(t,i){1&t&&e._UZ(0,"evento-documento-view-edit",0),2&t&&(e.Akn("detail"),e.Q6J("disabled",!0)("data",i.data))},dependencies:[xe],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0}),o})();const Fe=["actions"];function Pe(o,l){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"evento-documento-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);return e.KtG(n.clearErrors())}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",11),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execClearAndJumpToAction(n.saveValue(),"create"))}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execAndJumpToAction(n.saveValue(),s.isAllowed("detail")?"detail":"edit",s.empty))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),n=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.evento-documento-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.evento-documento-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.evento-documento-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.evento-documento-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==n?null:n.empty)("acl",null==n?null:n.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.evento-documento-view.list.action.create.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.evento-documento-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.evento-documento-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}function Je(o,l){if(1&o&&e._UZ(0,"evento-documento-view-detail",13),2&o){e.oxw();const t=e.MAs(1);e.Q6J("data",null==t?null:t.selection)}}function Ie(o,l){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"evento-documento-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t),e.oxw();const n=e.MAs(1);return e.KtG(n.jumpToAction(n.isAllowed("detail")?"detail":"",n.isAllowed("detail")?n.selection:null))}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);return e.KtG(n.clearErrors())}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execAndJumpToAction(n.saveValue(),s.isAllowed("detail")?"detail":"edit",s.selection))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),n=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.evento-documento-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.evento-documento-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.evento-documento-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.evento-documento-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==n?null:n.selection)("acl",null==n?null:n.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.evento-documento-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=t.formView&&t.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.evento-documento-view.list.action.edit.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.evento-documento-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}let Qe=(()=>{class o{constructor(t){this.eventoDocumentoRepository=t,this.uid="list",this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.delete=i=>this.eventoDocumentoRepository.delete(this.eventoDocumentoRepository.key(i)),this.deleteSelection=i=>{const n=new fe;return i&&(n.uids=i.map(s=>s.uid).join(",")),this.eventoDocumentoRepository.deleteAllForQuery(n)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ie))},o.\u0275cmp=e.Xpm({type:o,selectors:[["evento-documento-view-actions-container"]],viewQuery:function(t,i){if(1&t&&e.Gf(Fe,5),2&t){let n;e.iGM(n=e.CRH())&&(i.actions=n.first)}},inputs:{uid:"uid",fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:26,vars:62,consts:[[3,"id","repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"]],template:function(t,i){if(1&t&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(s){return i.onAction.emit(s)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,Pe,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,Je,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,Ie,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e.qZA()),2&t){const n=e.MAs(1);e.Q6J("id",i.uid)("repository",i.eventoDocumentoRepository)("asDialog",i.asDialog)("parents",i.parents),e.xp6(2),e.s9C("label",e.lcZ(3,30,"proyecto.evento-documento-view.list.action.create.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.uid),e.s9C("subtitle",e.lcZ(4,32,"proyecto.evento-documento-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,34,"proyecto.evento-documento-view.list.action.detail.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.uid),e.s9C("subtitle",e.lcZ(8,36,"proyecto.evento-documento-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,38,"proyecto.evento-documento-view.list.action.edit.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.uid),e.s9C("subtitle",e.lcZ(12,40,"proyecto.evento-documento-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,42,"proyecto.evento-documento-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,44,"proyecto.evento-documento-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,46,"proyecto.evento-documento-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,48,"proyecto.evento-documento-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,50,"proyecto.evento-documento-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",i.delete),e.xp6(6),e.s9C("label",e.lcZ(21,52,"proyecto.evento-documento-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,54,"proyecto.evento-documento-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,56,"proyecto.evento-documento-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,58,"proyecto.evento-documento-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,60,"proyecto.evento-documento-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",i.deleteSelection)}},dependencies:[D.V4,D.fd,D.Lo,D.Fs,Ne,xe,m.X$],changeDetection:0}),o})();var we=a(502);function Ue(o,l){if(1&o&&(e._UZ(0,"editable-text",4),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.evento-documento-view.form.search.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.evento-documento-view.form.search.placeholder")),e.Q6J("control",t.fields.search.control)}}function Se(o,l){if(1&o&&(e._UZ(0,"editable-selectone",5),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.evento-documento-view.form.evento.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.evento-documento-view.form.evento.placeholder")),e.Q6J("control",t.fields.evento.control)("search",t.relatedEventoDocumentoEvento)("retrieve",t.retrieveEventoDocumentoEvento)}}function Ye(o,l){if(1&o&&(e._UZ(0,"editable-selectone",6),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.evento-documento-view.form.documento.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.evento-documento-view.form.documento.placeholder")),e.Q6J("control",t.fields.documento.control)("search",t.relatedEventoDocumentoDocumento)("retrieve",t.retrieveEventoDocumentoDocumento)}}function je(o,l){if(1&o&&(e.YNc(0,Ue,3,7,"editable-text",1),e.YNc(1,Se,3,9,"editable-selectone",2),e.YNc(2,Ye,3,9,"editable-selectone",3)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.search?null:t.fields.search.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.evento?null:t.fields.evento.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.documento?null:t.fields.documento.visible)}}let Ke=(()=>{class o{constructor(t,i,n,s,v,d){this.eventoDocumentoRepository=t,this.eventoRepository=i,this.documentoRepository=n,this.cdRef=s,this.appState=v,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={search:{visible:!0,editable:!0,disabled:!1},evento:{visible:!0,editable:!0,disabled:!1},documento:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new z.w0,this.relatedEventoDocumentoEvento=r=>this.eventoRepository.list(this.filter(new j.er,r,this.eventoDocumentoEventoFilter)),this.retrieveEventoDocumentoEvento=r=>this.eventoRepository.retrieve(r.uid),this.relatedEventoDocumentoDocumento=r=>this.documentoRepository.list(this.filter(new ue.Xh,r,this.eventoDocumentoDocumentoFilter)),this.retrieveEventoDocumentoDocumento=r=>this.documentoRepository.retrieve(r.uid),this.initialsAndDefaults={evento:(0,N.of)({$ref:0}),documento:(0,N.of)({$ref:0})},this.form=d.group({search:this.fields.search.control=new u.NI("",[]),evento:this.fields.evento.control=new u.NI("",[]),documento:this.fields.documento.control=new u.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){this.acl&&this.updateAcl(),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,n){if(t.search=i,n)for(const s of Object.keys(n))t[s]=n[s];if(this.contextFilter)for(const s of Object.keys(this.contextFilter))t[s]=this.contextFilter[s];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ie),e.Y36(L.h),e.Y36(de.Y),e.Y36(e.sBO),e.Y36(X.aB),e.Y36(u.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["evento-documento-view-search"]],viewQuery:function(t,i){if(1&t&&e.Gf(O.k,7),2&t){let n;e.iGM(n=e.CRH())&&(i.formView=n.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",eventoDocumentoEventoFilter:"eventoDocumentoEventoFilter",eventoDocumentoDocumentoFilter:"eventoDocumentoDocumentoFilter"},decls:2,vars:9,consts:[[1,"main-form","form",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl"],["class","search","id","editable-evento-documento-search",3,"control","label","placeholder",4,"ngIf"],["class","evento","id","editable-evento-documento-evento","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["class","documento","id","editable-evento-documento-documento","display","uid",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["id","editable-evento-documento-search",1,"search",3,"control","label","placeholder"],["id","editable-evento-documento-evento","display","nombre",1,"evento",3,"control","label","placeholder","search","retrieve"],["id","editable-evento-documento-documento","display","uid",1,"documento",3,"control","label","placeholder","search","retrieve"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,je,3,3,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.eventoDocumento")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)},dependencies:[h.O5,q.s,we.x,O.k,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.search[_ngcontent-%COMP%], .evento[_ngcontent-%COMP%], .documento[_ngcontent-%COMP%]{flex-basis:100%}@media only screen and (min-width: 992px){.search[_ngcontent-%COMP%], .evento[_ngcontent-%COMP%], .documento[_ngcontent-%COMP%]{flex-basis:33%}}"],changeDetection:0}),o})();const Ge=["list"],He=["searchForm"],Be=["container"];function ze(o,l){1&o&&e._uU(0),2&o&&e.Oqu(l.$implicit.uid)}function We(o,l){if(1&o&&(e._uU(0),e.ALo(1,"async")),2&o){const t=l.$implicit;let i;e.Oqu(null==(i=e.lcZ(1,1,null==t.evento?null:t.evento.value))?null:i.nombre)}}function Xe(o,l){if(1&o&&(e._uU(0),e.ALo(1,"async")),2&o){const t=l.$implicit;let i;e.Oqu(null==(i=e.lcZ(1,1,null==t.documento?null:t.documento.value))?null:i.uid)}}const $e=function(){return["sort"]},qe=function(){return[]};function ke(o,l){if(1&o){const t=e.EpF();e._UZ(0,"evento-documento-view-search",10,11),e.TgZ(2,"div",12),e._UZ(3,"span",13),e.TgZ(4,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.advancedSearch())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(1),i=e.oxw();e.Q6J("fixed",i.fixed)("defaults",i.defaults)("hidden",t.showTable?e.DdM(6,$e):e.DdM(7,qe)),e.xp6(5),e.Oqu(e.lcZ(6,4,"APP_SEARCH"))}}function et(o,l){if(1&o&&(e.TgZ(0,"list-view",3,4),e.YNc(2,ze,1,1,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,We,2,3,"ng-template"),e.qZA(),e.TgZ(7,"list-view-column",6),e.ALo(8,"translate"),e.YNc(9,Xe,2,3,"ng-template"),e.qZA(),e.TgZ(10,"list-view-no-content"),e._UZ(11,"img",7),e.TgZ(12,"div")(13,"h1"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"list-view-no-results"),e._UZ(20,"img",8),e.TgZ(21,"div")(22,"h1"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"list-view-search-form",9),e.ALo(29,"translate"),e.ALo(30,"translate"),e.YNc(31,ke,7,8,"ng-template"),e.qZA()()),2&o){const t=e.oxw();e.Q6J("filter",t.filter)("repository",t.eventoDocumentoRepository)("actionContainer",t.actions)("fullScreen",!t.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,12,"proyecto.evento-documento-view.list.column.evento-nombre")),e.xp6(3),e.s9C("title",e.lcZ(8,14,"proyecto.evento-documento-view.list.column.documento-uid")),e.xp6(7),e.Oqu(e.lcZ(15,16,"proyecto.evento-documento-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(18,18,"proyecto.evento-documento-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(24,20,"proyecto.evento-documento-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(27,22,"proyecto.evento-documento-view.list.no-results.message")),e.xp6(2),e.s9C("title",e.lcZ(29,24,"proyecto.evento-documento-view.list.search.title")),e.s9C("subtitle",e.lcZ(30,26,"proyecto.evento-documento-view.list.search.subtitle"))}}let tt=(()=>{class o{constructor(t,i,n,s,v){this.layoutService=t,this.translateService=i,this.snackService=n,this.cdRef=s,this.eventoDocumentoRepository=v,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.evento-documento-view.list.app-title").subscribe(t=>{this.layoutService.title.set(t)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10),this.filter.include||(this.filter.include={}),this.filter.include.evento=!0,this.filter.include.documento=!0}advancedSearch(){var t,i;if(this.searchForm&&this.list){const n={},s=this.searchForm.first.form.value;s.search&&(n.search=s.search),!(null===(t=s.evento)||void 0===t)&&t.uid&&(n.evento=s.evento.uid),!(null===(i=s.documento)||void 0===i)&&i.uid&&(n.documento=s.documento.uid),this.list.first.advancedFilter=n,this.list.first.makeSearch(n)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.P),e.Y36(m.sK),e.Y36(P.ux),e.Y36(e.sBO),e.Y36(ie))},o.\u0275cmp=e.Xpm({type:o,selectors:[["evento-documento-view-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ge,5),e.Gf(He,5),e.Gf(Be,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.list=n),e.iGM(n=e.CRH())&&(i.searchForm=n),e.iGM(n=e.CRH())&&(i.container=n)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents"},outputs:{onAction:"onAction"},decls:3,vars:5,consts:[["id","eventoDocumento-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"uid","parents","fixed","defaults","onAction"],["container",""],["id","eventoDocumento-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"],[3,"title","subtitle"],[3,"fixed","defaults","hidden"],["searchForm",""],[2,"display","flex"],[2,"flex","1 1 auto"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,et,32,28,"list-view",0),e.TgZ(1,"evento-documento-view-actions-container",1,2),e.NdJ("onAction",function(s){return i.onAction.emit(s)}),e.qZA()),2&t&&(e.Q6J("ngIf",i.actions&&!i.actions.action),e.xp6(1),e.Q6J("uid",i.uid)("parents",i.parents)("fixed",i.fixed)("defaults",i.defaults))},dependencies:[h.O5,y.Rt,y.Yi,y.if,y.JR,y.To,b.lW,Qe,Ke,h.Ov,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),o})();var it=a(4942),ot=a(519);class Ce{static clone(l){const t=new Ce;return t.pageSize=l.pageSize,t.pageNumber=l.pageNumber,t.lastRow=l.lastRow,t.search=l.search,t.evento="string"==typeof l.evento||l.evento instanceof String?l.evento:l.evento?l.evento.uid:void 0,t.usuario="string"==typeof l.usuario||l.usuario instanceof String?l.usuario:l.usuario?l.usuario.uid:void 0,t.include=l.include?Ae.clone(l.include):void 0,t}}class Ae{includeAll(l){this.evento=!0,this.usuario=!0}toArgs(l){const t=this.joinArgs("include.");return t.length>0&&-1===l.indexOf("?")&&(l+="?"),l+t}joinArgs(l){let t="";return this.evento&&(t+="&"+l+"evento=true"),this.usuario&&(t+="&"+l+"usuario=true"),t}static clone(l){return new Ae}}var Ve=a(8016),nt=a(244);function lt(o,l){if(1&o&&e._UZ(0,"editable-create-related",10),2&o){const t=e.oxw(3);e.Q6J("build",t.loadCreateRelatedNotificacionEventoEvento)}}function st(o,l){if(1&o&&(e.TgZ(0,"editable-selectone",6),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,lt,1,1,"editable-create-related",7),e._UZ(4,"editable-view-related",8),e.ALo(5,"translate"),e._UZ(6,"editable-error",9),e.ALo(7,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,10,"proyecto.notificacion-evento-view.form.evento.label")),e.s9C("placeholder",e.lcZ(2,12,"proyecto.notificacion-evento-view.form.evento.placeholder")),e.Q6J("control",t.fields.evento.control)("required",!0)("search",t.relatedNotificacionEventoEvento)("retrieve",t.retrieveNotificacionEventoEvento),e.xp6(3),e.Q6J("ngIf",t.allowCreateEventoViewEvento),e.xp6(1),e.s9C("title",e.lcZ(5,14,"proyecto.evento-view.evento.showRelated")),e.Q6J("build",t.loadViewRelatedNotificacionEventoEvento),e.xp6(2),e.s9C("message",e.lcZ(7,16,"proyecto.notificacion-evento-view.form.evento.rule.required"))}}function at(o,l){if(1&o&&(e.TgZ(0,"editable-selectone",11),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-view-related",8),e.ALo(4,"translate"),e._UZ(5,"editable-error",9),e.ALo(6,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,9,"proyecto.notificacion-evento-view.form.usuario.label")),e.s9C("placeholder",e.lcZ(2,11,"proyecto.notificacion-evento-view.form.usuario.placeholder")),e.Q6J("control",t.fields.usuario.control)("required",!0)("search",t.relatedNotificacionEventoUsuario)("retrieve",t.retrieveNotificacionEventoUsuario),e.xp6(3),e.s9C("title",e.lcZ(4,13,"acceso.users-view.usuario.showRelated")),e.Q6J("build",t.loadViewRelatedNotificacionEventoUsuario),e.xp6(2),e.s9C("message",e.lcZ(6,15,"proyecto.notificacion-evento-view.form.usuario.rule.required"))}}function ct(o,l){if(1&o&&(e.TgZ(0,"editable-check",12),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",9),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.notificacion-evento-view.form.creacion.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.notificacion-evento-view.form.creacion.placeholder")),e.Q6J("control",t.fields.creacion.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,9,"proyecto.notificacion-evento-view.form.creacion.rule.required"))}}function rt(o,l){if(1&o&&(e.TgZ(0,"editable-check",13),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",9),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.notificacion-evento-view.form.actualizacion.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.notificacion-evento-view.form.actualizacion.placeholder")),e.Q6J("control",t.fields.actualizacion.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,9,"proyecto.notificacion-evento-view.form.actualizacion.rule.required"))}}function dt(o,l){if(1&o&&(e.TgZ(0,"editable-check",14),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",9),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.notificacion-evento-view.form.borrado.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.notificacion-evento-view.form.borrado.placeholder")),e.Q6J("control",t.fields.borrado.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,9,"proyecto.notificacion-evento-view.form.borrado.rule.required"))}}function ut(o,l){if(1&o&&(e.YNc(0,st,8,18,"editable-selectone",1),e.YNc(1,at,7,17,"editable-selectone",2),e.YNc(2,ct,5,11,"editable-check",3),e.YNc(3,rt,5,11,"editable-check",4),e.YNc(4,dt,5,11,"editable-check",5)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.evento?null:t.fields.evento.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.usuario?null:t.fields.usuario.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.creacion?null:t.fields.creacion.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.actualizacion?null:t.fields.actualizacion.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.borrado?null:t.fields.borrado.visible)}}let Ze=(()=>{class o{constructor(t,i,n,s,v,d){this.notificacionEventoRepository=t,this.eventoRepository=i,this.usersRepository=n,this.cdRef=s,this.appState=v,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={evento:{visible:!0,editable:!0,disabled:!1},usuario:{visible:!0,editable:!0,disabled:!1},creacion:{visible:!0,editable:!0,disabled:!1},actualizacion:{visible:!0,editable:!0,disabled:!1},borrado:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new z.w0,this.allowCreateEventoViewEvento=!1,this.loadCreateRelatedNotificacionEventoEvento=r=>(0,A.D)(Promise.resolve().then(a.bind(a,5029))).pipe((0,J.z)(()=>(0,A.D)(Promise.resolve().then(a.bind(a,519))).pipe((0,I.U)(({EventoViewEditComponent:p})=>{const C=r.createComponent(p);return C.instance.data=C.instance.initialsAndDefaults,C.instance})))),this.loadViewRelatedNotificacionEventoEvento=r=>(0,A.D)(Promise.resolve().then(a.bind(a,3955))).pipe((0,J.z)(()=>(0,A.D)(Promise.resolve().then(a.bind(a,4942))).pipe((0,I.U)(({EventoViewDetailComponent:p})=>{const C=r.createComponent(p);return C.instance.data=this.fields.evento.value,C.instance})))),this.relatedNotificacionEventoEvento=r=>this.eventoRepository.list(this.filter(new j.er,r,this.notificacionEventoEventoFilter)),this.retrieveNotificacionEventoEvento=r=>this.eventoRepository.retrieve(r.uid),this.loadViewRelatedNotificacionEventoUsuario=r=>(0,A.D)(a.e(354).then(a.bind(a,2354))).pipe((0,J.z)(()=>(0,A.D)(a.e(761).then(a.bind(a,9761))).pipe((0,I.U)(({UsersViewDetailComponent:p})=>{const C=r.createComponent(p);return C.instance.data=this.fields.usuario.value,C.instance})))),this.relatedNotificacionEventoUsuario=r=>this.usersRepository.list(this.filter(new Ve.np,r,this.notificacionEventoUsuarioFilter)),this.retrieveNotificacionEventoUsuario=r=>this.usersRepository.retrieve(r.uid),this.initialsAndDefaults={evento:(0,N.of)({$ref:0}),usuario:(0,N.of)({$ref:0}),creacion:!1,actualizacion:!1,borrado:!1},this.form=d.group({evento:this.fields.evento.control=new u.NI("",[u.kI.required]),usuario:this.fields.usuario.control=new u.NI("",[u.kI.required]),creacion:this.fields.creacion.control=new u.NI("",[u.kI.required]),actualizacion:this.fields.actualizacion.control=new u.NI("",[u.kI.required]),borrado:this.fields.borrado.control=new u.NI("",[u.kI.required])}),this.subscriptions.add(this.eventoRepository.genericAcl().subscribe(r=>{if(this.allowCreateEventoViewEvento=!1,r.allows)for(const p of r.allows)"create"===p.name&&(this.allowCreateEventoViewEvento=p.allowed||!1)}))}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){var t;this.acl?this.updateAcl():null!==(t=this.data)&&void 0!==t&&t.uid?this.notificacionEventoRepository.specificAcl(this.data.uid).subscribe(i=>{this.acl=i,this.updateAcl()}):this.notificacionEventoRepository.genericAcl().subscribe(i=>{this.acl=i,this.updateAcl()}),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(t){t.defaults&&Object.assign(this.initialsAndDefaults,this.defaults),t.fixed&&(this.fixedFields=[],this.fixed.forEach&&this.fixed.forEach(i=>{this.fixedFields.push(i)})),t.acl&&this.updateAcl()}clearErrors(){this.formView&&this.formView.clearErrors()}saveValue(){if(this.formView){const t=this.notificacionEventoRepository.key(this.data),i=this.formView.retrieveValue();return(t?this.notificacionEventoRepository.update(t,i):this.notificacionEventoRepository.add(i)).pipe((0,_e.I)(),(0,me.K)(s=>{var v;return t&&this.notificacionEventoRepository.retrieve(t).subscribe(d=>{this.formView&&this.formView.markOriginal(d)}),null===(v=this.formView)||void 0===v||v.showError(s),(0,pe._)(()=>s)}),(0,he.b)(s=>{var v;Object.keys(s).forEach(d=>{this.data[d]=s[d],this.formView&&(this.formView.data[d]=s[d])}),null===(v=this.formView)||void 0===v||v.refresh()}))}throw new Error("Intentando guardar sin formView")}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,n){if(t.search=i,n)for(const s of Object.keys(n))t[s]=n[s];if(this.contextFilter)for(const s of Object.keys(this.contextFilter))t[s]=this.contextFilter[s];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ee),e.Y36(L.h),e.Y36(ce.m),e.Y36(e.sBO),e.Y36(X.aB),e.Y36(u.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["notificacion-evento-view-edit"]],viewQuery:function(t,i){if(1&t&&e.Gf(O.k,7),2&t){let n;e.iGM(n=e.CRH())&&(i.formView=n.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",data:"data",notificacionEventoEventoFilter:"notificacionEventoEventoFilter",notificacionEventoUsuarioFilter:"notificacionEventoUsuarioFilter"},features:[e.TTD],decls:2,vars:10,consts:[[1,"main-form","form",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl","data"],["class","evento","id","editable-notificacion-evento-evento","display","nombre",3,"control","required","label","placeholder","search","retrieve",4,"ngIf"],["class","usuario","id","editable-notificacion-evento-usuario","display","login",3,"control","required","label","placeholder","search","retrieve",4,"ngIf"],["class","creacion","id","editable-notificacion-evento-creacion",3,"control","required","label","placeholder",4,"ngIf"],["class","actualizacion","id","editable-notificacion-evento-actualizacion",3,"control","required","label","placeholder",4,"ngIf"],["class","borrado","id","editable-notificacion-evento-borrado",3,"control","required","label","placeholder",4,"ngIf"],["id","editable-notificacion-evento-evento","display","nombre",1,"evento",3,"control","required","label","placeholder","search","retrieve"],["title","proyecto.eventoView.evento.createNew",3,"build",4,"ngIf"],[3,"title","build"],["for","required",3,"message"],["title","proyecto.eventoView.evento.createNew",3,"build"],["id","editable-notificacion-evento-usuario","display","login",1,"usuario",3,"control","required","label","placeholder","search","retrieve"],["id","editable-notificacion-evento-creacion",1,"creacion",3,"control","required","label","placeholder"],["id","editable-notificacion-evento-actualizacion",1,"actualizacion",3,"control","required","label","placeholder"],["id","editable-notificacion-evento-borrado",1,"borrado",3,"control","required","label","placeholder"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,ut,5,5,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.notificacionEvento")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)("data",i.data)},dependencies:[h.O5,nt.Z,be.IK,$.XX,$.MI,q.s,O.k,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.evento[_ngcontent-%COMP%], .usuario[_ngcontent-%COMP%], .creacion[_ngcontent-%COMP%], .actualizacion[_ngcontent-%COMP%], .borrado[_ngcontent-%COMP%]{flex-basis:100%}@media only screen and (min-width: 992px){.evento[_ngcontent-%COMP%], .usuario[_ngcontent-%COMP%], .creacion[_ngcontent-%COMP%], .actualizacion[_ngcontent-%COMP%], .borrado[_ngcontent-%COMP%]{flex-basis:50%}}"],changeDetection:0}),o})(),ft=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["notificacion-evento-view-detail"]],inputs:{data:"data"},decls:1,vars:4,consts:[[3,"disabled","data"]],template:function(t,i){1&t&&e._UZ(0,"notificacion-evento-view-edit",0),2&t&&(e.Akn("detail"),e.Q6J("disabled",!0)("data",i.data))},dependencies:[Ze],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0}),o})();const vt=["actions"];function mt(o,l){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"notificacion-evento-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);return e.KtG(n.clearErrors())}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",11),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execClearAndJumpToAction(n.saveValue(),"create"))}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execAndJumpToAction(n.saveValue(),s.isAllowed("detail")?"detail":"edit",s.empty))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),n=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.notificacion-evento-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.notificacion-evento-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.notificacion-evento-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.notificacion-evento-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==n?null:n.empty)("acl",null==n?null:n.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.notificacion-evento-view.list.action.create.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.notificacion-evento-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.notificacion-evento-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}function pt(o,l){if(1&o&&e._UZ(0,"notificacion-evento-view-detail",13),2&o){e.oxw();const t=e.MAs(1);e.Q6J("data",null==t?null:t.selection)}}function ht(o,l){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"notificacion-evento-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t),e.oxw();const n=e.MAs(1);return e.KtG(n.jumpToAction(n.isAllowed("detail")?"detail":"",n.isAllowed("detail")?n.selection:null))}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);return e.KtG(n.clearErrors())}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execAndJumpToAction(n.saveValue(),s.isAllowed("detail")?"detail":"edit",s.selection))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),n=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.notificacion-evento-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.notificacion-evento-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.notificacion-evento-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.notificacion-evento-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==n?null:n.selection)("acl",null==n?null:n.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.notificacion-evento-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=t.formView&&t.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.notificacion-evento-view.list.action.edit.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.notificacion-evento-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}let _t=(()=>{class o{constructor(t){this.notificacionEventoRepository=t,this.uid="list",this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.delete=i=>this.notificacionEventoRepository.delete(this.notificacionEventoRepository.key(i)),this.deleteSelection=i=>{const n=new Ce;return i&&(n.uids=i.map(s=>s.uid).join(",")),this.notificacionEventoRepository.deleteAllForQuery(n)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["notificacion-evento-view-actions-container"]],viewQuery:function(t,i){if(1&t&&e.Gf(vt,5),2&t){let n;e.iGM(n=e.CRH())&&(i.actions=n.first)}},inputs:{uid:"uid",fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:26,vars:62,consts:[[3,"id","repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"]],template:function(t,i){if(1&t&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(s){return i.onAction.emit(s)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,mt,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,pt,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,ht,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e.qZA()),2&t){const n=e.MAs(1);e.Q6J("id",i.uid)("repository",i.notificacionEventoRepository)("asDialog",i.asDialog)("parents",i.parents),e.xp6(2),e.s9C("label",e.lcZ(3,30,"proyecto.notificacion-evento-view.list.action.create.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.uid),e.s9C("subtitle",e.lcZ(4,32,"proyecto.notificacion-evento-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,34,"proyecto.notificacion-evento-view.list.action.detail.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.uid),e.s9C("subtitle",e.lcZ(8,36,"proyecto.notificacion-evento-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,38,"proyecto.notificacion-evento-view.list.action.edit.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.uid),e.s9C("subtitle",e.lcZ(12,40,"proyecto.notificacion-evento-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,42,"proyecto.notificacion-evento-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,44,"proyecto.notificacion-evento-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,46,"proyecto.notificacion-evento-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,48,"proyecto.notificacion-evento-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,50,"proyecto.notificacion-evento-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",i.delete),e.xp6(6),e.s9C("label",e.lcZ(21,52,"proyecto.notificacion-evento-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,54,"proyecto.notificacion-evento-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,56,"proyecto.notificacion-evento-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,58,"proyecto.notificacion-evento-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,60,"proyecto.notificacion-evento-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",i.deleteSelection)}},dependencies:[D.V4,D.fd,D.Lo,D.Fs,ft,Ze,m.X$],changeDetection:0}),o})();function bt(o,l){if(1&o&&(e._UZ(0,"editable-text",4),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.notificacion-evento-view.form.search.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.notificacion-evento-view.form.search.placeholder")),e.Q6J("control",t.fields.search.control)}}function wt(o,l){if(1&o&&(e._UZ(0,"editable-selectone",5),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.notificacion-evento-view.form.evento.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.notificacion-evento-view.form.evento.placeholder")),e.Q6J("control",t.fields.evento.control)("search",t.relatedNotificacionEventoEvento)("retrieve",t.retrieveNotificacionEventoEvento)}}function Ct(o,l){if(1&o&&(e._UZ(0,"editable-selectone",6),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.notificacion-evento-view.form.usuario.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.notificacion-evento-view.form.usuario.placeholder")),e.Q6J("control",t.fields.usuario.control)("search",t.relatedNotificacionEventoUsuario)("retrieve",t.retrieveNotificacionEventoUsuario)}}function At(o,l){if(1&o&&(e.YNc(0,bt,3,7,"editable-text",1),e.YNc(1,wt,3,9,"editable-selectone",2),e.YNc(2,Ct,3,9,"editable-selectone",3)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.search?null:t.fields.search.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.evento?null:t.fields.evento.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.usuario?null:t.fields.usuario.visible)}}let gt=(()=>{class o{constructor(t,i,n,s,v,d){this.notificacionEventoRepository=t,this.eventoRepository=i,this.usersRepository=n,this.cdRef=s,this.appState=v,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={search:{visible:!0,editable:!0,disabled:!1},evento:{visible:!0,editable:!0,disabled:!1},usuario:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new z.w0,this.relatedNotificacionEventoEvento=r=>this.eventoRepository.list(this.filter(new j.er,r,this.notificacionEventoEventoFilter)),this.retrieveNotificacionEventoEvento=r=>this.eventoRepository.retrieve(r.uid),this.relatedNotificacionEventoUsuario=r=>this.usersRepository.list(this.filter(new Ve.np,r,this.notificacionEventoUsuarioFilter)),this.retrieveNotificacionEventoUsuario=r=>this.usersRepository.retrieve(r.uid),this.initialsAndDefaults={evento:(0,N.of)({$ref:0}),usuario:(0,N.of)({$ref:0}),creacion:!1,actualizacion:!1,borrado:!1},this.form=d.group({search:this.fields.search.control=new u.NI("",[]),evento:this.fields.evento.control=new u.NI("",[]),usuario:this.fields.usuario.control=new u.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){this.acl&&this.updateAcl(),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,n){if(t.search=i,n)for(const s of Object.keys(n))t[s]=n[s];if(this.contextFilter)for(const s of Object.keys(this.contextFilter))t[s]=this.contextFilter[s];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ee),e.Y36(L.h),e.Y36(ce.m),e.Y36(e.sBO),e.Y36(X.aB),e.Y36(u.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["notificacion-evento-view-search"]],viewQuery:function(t,i){if(1&t&&e.Gf(O.k,7),2&t){let n;e.iGM(n=e.CRH())&&(i.formView=n.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",notificacionEventoEventoFilter:"notificacionEventoEventoFilter",notificacionEventoUsuarioFilter:"notificacionEventoUsuarioFilter"},decls:2,vars:9,consts:[[1,"main-form","form",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl"],["class","search","id","editable-notificacion-evento-search",3,"control","label","placeholder",4,"ngIf"],["class","evento","id","editable-notificacion-evento-evento","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["class","usuario","id","editable-notificacion-evento-usuario","display","login",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["id","editable-notificacion-evento-search",1,"search",3,"control","label","placeholder"],["id","editable-notificacion-evento-evento","display","nombre",1,"evento",3,"control","label","placeholder","search","retrieve"],["id","editable-notificacion-evento-usuario","display","login",1,"usuario",3,"control","label","placeholder","search","retrieve"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,At,3,3,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.notificacionEvento")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)},dependencies:[h.O5,q.s,we.x,O.k,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.search[_ngcontent-%COMP%], .evento[_ngcontent-%COMP%], .usuario[_ngcontent-%COMP%]{flex-basis:100%}@media only screen and (min-width: 992px){.search[_ngcontent-%COMP%], .evento[_ngcontent-%COMP%], .usuario[_ngcontent-%COMP%]{flex-basis:33%}}"],changeDetection:0}),o})();const Et=["list"],yt=["searchForm"],xt=["container"];function Vt(o,l){1&o&&e._uU(0),2&o&&e.Oqu(l.$implicit.uid)}function Zt(o,l){if(1&o&&(e._uU(0),e.ALo(1,"async")),2&o){const t=l.$implicit;let i;e.Oqu(null==(i=e.lcZ(1,1,null==t.evento?null:t.evento.value))?null:i.nombre)}}function Dt(o,l){if(1&o&&(e._uU(0),e.ALo(1,"async")),2&o){const t=l.$implicit;let i;e.Oqu(null==(i=e.lcZ(1,1,null==t.usuario?null:t.usuario.value))?null:i.login)}}const Rt=function(){return["sort"]},Mt=function(){return[]};function Tt(o,l){if(1&o){const t=e.EpF();e._UZ(0,"notificacion-evento-view-search",10,11),e.TgZ(2,"div",12),e._UZ(3,"span",13),e.TgZ(4,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.advancedSearch())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(1),i=e.oxw();e.Q6J("fixed",i.fixed)("defaults",i.defaults)("hidden",t.showTable?e.DdM(6,Rt):e.DdM(7,Mt)),e.xp6(5),e.Oqu(e.lcZ(6,4,"APP_SEARCH"))}}function Lt(o,l){if(1&o&&(e.TgZ(0,"list-view",3,4),e.YNc(2,Vt,1,1,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,Zt,2,3,"ng-template"),e.qZA(),e.TgZ(7,"list-view-column",6),e.ALo(8,"translate"),e.YNc(9,Dt,2,3,"ng-template"),e.qZA(),e.TgZ(10,"list-view-no-content"),e._UZ(11,"img",7),e.TgZ(12,"div")(13,"h1"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"list-view-no-results"),e._UZ(20,"img",8),e.TgZ(21,"div")(22,"h1"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"list-view-search-form",9),e.ALo(29,"translate"),e.ALo(30,"translate"),e.YNc(31,Tt,7,8,"ng-template"),e.qZA()()),2&o){const t=e.oxw();e.Q6J("filter",t.filter)("repository",t.notificacionEventoRepository)("actionContainer",t.actions)("fullScreen",!t.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,12,"proyecto.notificacion-evento-view.list.column.evento-nombre")),e.xp6(3),e.s9C("title",e.lcZ(8,14,"proyecto.notificacion-evento-view.list.column.usuario-login")),e.xp6(7),e.Oqu(e.lcZ(15,16,"proyecto.notificacion-evento-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(18,18,"proyecto.notificacion-evento-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(24,20,"proyecto.notificacion-evento-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(27,22,"proyecto.notificacion-evento-view.list.no-results.message")),e.xp6(2),e.s9C("title",e.lcZ(29,24,"proyecto.notificacion-evento-view.list.search.title")),e.s9C("subtitle",e.lcZ(30,26,"proyecto.notificacion-evento-view.list.search.subtitle"))}}let Ot=(()=>{class o{constructor(t,i,n,s,v){this.layoutService=t,this.translateService=i,this.snackService=n,this.cdRef=s,this.notificacionEventoRepository=v,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.notificacion-evento-view.list.app-title").subscribe(t=>{this.layoutService.title.set(t)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10),this.filter.include||(this.filter.include={}),this.filter.include.evento=!0,this.filter.include.usuario=!0}advancedSearch(){var t,i;if(this.searchForm&&this.list){const n={},s=this.searchForm.first.form.value;s.search&&(n.search=s.search),!(null===(t=s.evento)||void 0===t)&&t.uid&&(n.evento=s.evento.uid),!(null===(i=s.usuario)||void 0===i)&&i.uid&&(n.usuario=s.usuario.uid),this.list.first.advancedFilter=n,this.list.first.makeSearch(n)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.P),e.Y36(m.sK),e.Y36(P.ux),e.Y36(e.sBO),e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["notificacion-evento-view-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Et,5),e.Gf(yt,5),e.Gf(xt,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.list=n),e.iGM(n=e.CRH())&&(i.searchForm=n),e.iGM(n=e.CRH())&&(i.container=n)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents"},outputs:{onAction:"onAction"},decls:3,vars:5,consts:[["id","notificacionEvento-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"uid","parents","fixed","defaults","onAction"],["container",""],["id","notificacionEvento-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"],[3,"title","subtitle"],[3,"fixed","defaults","hidden"],["searchForm",""],[2,"display","flex"],[2,"flex","1 1 auto"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,Lt,32,28,"list-view",0),e.TgZ(1,"notificacion-evento-view-actions-container",1,2),e.NdJ("onAction",function(s){return i.onAction.emit(s)}),e.qZA()),2&t&&(e.Q6J("ngIf",i.actions&&!i.actions.action),e.xp6(1),e.Q6J("uid",i.uid)("parents",i.parents)("fixed",i.fixed)("defaults",i.defaults))},dependencies:[h.O5,y.Rt,y.Yi,y.if,y.JR,y.To,b.lW,_t,gt,h.Ov,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),o})();class ge{static clone(l){const t=new ge;return t.pageSize=l.pageSize,t.pageNumber=l.pageNumber,t.lastRow=l.lastRow,t.search=l.search,t.padre="string"==typeof l.padre||l.padre instanceof String?l.padre:l.padre?l.padre.uid:void 0,t.hijo="string"==typeof l.hijo||l.hijo instanceof String?l.hijo:l.hijo?l.hijo.uid:void 0,t.include=l.include?Ee.clone(l.include):void 0,t}}class Ee{includeAll(l){this.padre=!0,this.hijo=!0}toArgs(l){const t=this.joinArgs("include.");return t.length>0&&-1===l.indexOf("?")&&(l+="?"),l+t}joinArgs(l){let t="";return this.padre&&(t+="&"+l+"padre=true"),this.hijo&&(t+="&"+l+"hijo=true"),t}static clone(l){return new Ee}}function Nt(o,l){if(1&o&&e._UZ(0,"editable-create-related",7),2&o){const t=e.oxw(3);e.Q6J("build",t.loadCreateRelatedRelacionEventoPadre)}}function Ft(o,l){if(1&o&&(e.TgZ(0,"editable-selectone",3),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,Nt,1,1,"editable-create-related",4),e._UZ(4,"editable-view-related",5),e.ALo(5,"translate"),e._UZ(6,"editable-error",6),e.ALo(7,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,10,"proyecto.relacion-evento-view.form.padre.label")),e.s9C("placeholder",e.lcZ(2,12,"proyecto.relacion-evento-view.form.padre.placeholder")),e.Q6J("control",t.fields.padre.control)("required",!0)("search",t.relatedRelacionEventoPadre)("retrieve",t.retrieveRelacionEventoPadre),e.xp6(3),e.Q6J("ngIf",t.allowCreateEventoViewPadre),e.xp6(1),e.s9C("title",e.lcZ(5,14,"proyecto.evento-view.padre.showRelated")),e.Q6J("build",t.loadViewRelatedRelacionEventoPadre),e.xp6(2),e.s9C("message",e.lcZ(7,16,"proyecto.relacion-evento-view.form.padre.rule.required"))}}function Pt(o,l){if(1&o&&e._UZ(0,"editable-create-related",10),2&o){const t=e.oxw(3);e.Q6J("build",t.loadCreateRelatedRelacionEventoHijo)}}function Jt(o,l){if(1&o&&(e.TgZ(0,"editable-selectone",8),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,Pt,1,1,"editable-create-related",9),e._UZ(4,"editable-view-related",5),e.ALo(5,"translate"),e._UZ(6,"editable-error",6),e.ALo(7,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,10,"proyecto.relacion-evento-view.form.hijo.label")),e.s9C("placeholder",e.lcZ(2,12,"proyecto.relacion-evento-view.form.hijo.placeholder")),e.Q6J("control",t.fields.hijo.control)("required",!0)("search",t.relatedRelacionEventoHijo)("retrieve",t.retrieveRelacionEventoHijo),e.xp6(3),e.Q6J("ngIf",t.allowCreateEventoViewHijo),e.xp6(1),e.s9C("title",e.lcZ(5,14,"proyecto.evento-view.hijo.showRelated")),e.Q6J("build",t.loadViewRelatedRelacionEventoHijo),e.xp6(2),e.s9C("message",e.lcZ(7,16,"proyecto.relacion-evento-view.form.hijo.rule.required"))}}function It(o,l){if(1&o&&(e.YNc(0,Ft,8,18,"editable-selectone",1),e.YNc(1,Jt,8,18,"editable-selectone",2)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.padre?null:t.fields.padre.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.hijo?null:t.fields.hijo.visible)}}let De=(()=>{class o{constructor(t,i,n,s,v){this.relacionEventoRepository=t,this.eventoRepository=i,this.cdRef=n,this.appState=s,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={padre:{visible:!0,editable:!0,disabled:!1},hijo:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new z.w0,this.allowCreateEventoViewPadre=!1,this.allowCreateEventoViewHijo=!1,this.loadCreateRelatedRelacionEventoPadre=d=>(0,A.D)(Promise.resolve().then(a.bind(a,5029))).pipe((0,J.z)(()=>(0,A.D)(Promise.resolve().then(a.bind(a,519))).pipe((0,I.U)(({EventoViewEditComponent:r})=>{const p=d.createComponent(r);return p.instance.data=p.instance.initialsAndDefaults,p.instance})))),this.loadViewRelatedRelacionEventoPadre=d=>(0,A.D)(Promise.resolve().then(a.bind(a,3955))).pipe((0,J.z)(()=>(0,A.D)(Promise.resolve().then(a.bind(a,4942))).pipe((0,I.U)(({EventoViewDetailComponent:r})=>{const p=d.createComponent(r);return p.instance.data=this.fields.padre.value,p.instance})))),this.relatedRelacionEventoPadre=d=>this.eventoRepository.list(this.filter(new j.er,d,this.relacionEventoPadreFilter)),this.retrieveRelacionEventoPadre=d=>this.eventoRepository.retrieve(d.uid),this.loadCreateRelatedRelacionEventoHijo=d=>(0,A.D)(Promise.resolve().then(a.bind(a,5029))).pipe((0,J.z)(()=>(0,A.D)(Promise.resolve().then(a.bind(a,519))).pipe((0,I.U)(({EventoViewEditComponent:r})=>{const p=d.createComponent(r);return p.instance.data=p.instance.initialsAndDefaults,p.instance})))),this.loadViewRelatedRelacionEventoHijo=d=>(0,A.D)(Promise.resolve().then(a.bind(a,3955))).pipe((0,J.z)(()=>(0,A.D)(Promise.resolve().then(a.bind(a,4942))).pipe((0,I.U)(({EventoViewDetailComponent:r})=>{const p=d.createComponent(r);return p.instance.data=this.fields.hijo.value,p.instance})))),this.relatedRelacionEventoHijo=d=>this.eventoRepository.list(this.filter(new j.er,d,this.relacionEventoHijoFilter)),this.retrieveRelacionEventoHijo=d=>this.eventoRepository.retrieve(d.uid),this.initialsAndDefaults={padre:(0,N.of)({$ref:0}),hijo:(0,N.of)({$ref:0})},this.form=v.group({padre:this.fields.padre.control=new u.NI("",[u.kI.required]),hijo:this.fields.hijo.control=new u.NI("",[u.kI.required])}),this.subscriptions.add(this.eventoRepository.genericAcl().subscribe(d=>{if(this.allowCreateEventoViewPadre=!1,d.allows)for(const r of d.allows)"create"===r.name&&(this.allowCreateEventoViewPadre=r.allowed||!1)})),this.subscriptions.add(this.eventoRepository.genericAcl().subscribe(d=>{if(this.allowCreateEventoViewHijo=!1,d.allows)for(const r of d.allows)"create"===r.name&&(this.allowCreateEventoViewHijo=r.allowed||!1)}))}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){var t;this.acl?this.updateAcl():null!==(t=this.data)&&void 0!==t&&t.uid?this.relacionEventoRepository.specificAcl(this.data.uid).subscribe(i=>{this.acl=i,this.updateAcl()}):this.relacionEventoRepository.genericAcl().subscribe(i=>{this.acl=i,this.updateAcl()}),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(t){t.defaults&&Object.assign(this.initialsAndDefaults,this.defaults),t.fixed&&(this.fixedFields=[],this.fixed.forEach&&this.fixed.forEach(i=>{this.fixedFields.push(i)})),t.acl&&this.updateAcl()}clearErrors(){this.formView&&this.formView.clearErrors()}saveValue(){if(this.formView){const t=this.relacionEventoRepository.key(this.data),i=this.formView.retrieveValue();return(t?this.relacionEventoRepository.update(t,i):this.relacionEventoRepository.add(i)).pipe((0,_e.I)(),(0,me.K)(s=>{var v;return t&&this.relacionEventoRepository.retrieve(t).subscribe(d=>{this.formView&&this.formView.markOriginal(d)}),null===(v=this.formView)||void 0===v||v.showError(s),(0,pe._)(()=>s)}),(0,he.b)(s=>{var v;Object.keys(s).forEach(d=>{this.data[d]=s[d],this.formView&&(this.formView.data[d]=s[d])}),null===(v=this.formView)||void 0===v||v.refresh()}))}throw new Error("Intentando guardar sin formView")}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,n){if(t.search=i,n)for(const s of Object.keys(n))t[s]=n[s];if(this.contextFilter)for(const s of Object.keys(this.contextFilter))t[s]=this.contextFilter[s];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(te),e.Y36(L.h),e.Y36(e.sBO),e.Y36(X.aB),e.Y36(u.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["relacion-evento-view-edit"]],viewQuery:function(t,i){if(1&t&&e.Gf(O.k,7),2&t){let n;e.iGM(n=e.CRH())&&(i.formView=n.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",data:"data",relacionEventoPadreFilter:"relacionEventoPadreFilter",relacionEventoHijoFilter:"relacionEventoHijoFilter"},features:[e.TTD],decls:2,vars:10,consts:[[1,"main-form","form",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl","data"],["class","padre","id","editable-relacion-evento-padre","display","nombre",3,"control","required","label","placeholder","search","retrieve",4,"ngIf"],["class","hijo","id","editable-relacion-evento-hijo","display","nombre",3,"control","required","label","placeholder","search","retrieve",4,"ngIf"],["id","editable-relacion-evento-padre","display","nombre",1,"padre",3,"control","required","label","placeholder","search","retrieve"],["title","proyecto.eventoView.padre.createNew",3,"build",4,"ngIf"],[3,"title","build"],["for","required",3,"message"],["title","proyecto.eventoView.padre.createNew",3,"build"],["id","editable-relacion-evento-hijo","display","nombre",1,"hijo",3,"control","required","label","placeholder","search","retrieve"],["title","proyecto.eventoView.hijo.createNew",3,"build",4,"ngIf"],["title","proyecto.eventoView.hijo.createNew",3,"build"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,It,2,2,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.relacionEvento")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)("data",i.data)},dependencies:[h.O5,be.IK,$.XX,$.MI,q.s,O.k,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.padre[_ngcontent-%COMP%], .hijo[_ngcontent-%COMP%]{flex-basis:100%}@media only screen and (min-width: 992px){.padre[_ngcontent-%COMP%], .hijo[_ngcontent-%COMP%]{flex-basis:50%}}"],changeDetection:0}),o})(),Qt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["relacion-evento-view-detail"]],inputs:{data:"data"},decls:1,vars:4,consts:[[3,"disabled","data"]],template:function(t,i){1&t&&e._UZ(0,"relacion-evento-view-edit",0),2&t&&(e.Akn("detail"),e.Q6J("disabled",!0)("data",i.data))},dependencies:[De],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0}),o})();const Ut=["actions"];function St(o,l){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"relacion-evento-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);return e.KtG(n.clearErrors())}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",11),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execClearAndJumpToAction(n.saveValue(),"create"))}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execAndJumpToAction(n.saveValue(),s.isAllowed("detail")?"detail":"edit",s.empty))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),n=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.relacion-evento-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.relacion-evento-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.relacion-evento-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.relacion-evento-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==n?null:n.empty)("acl",null==n?null:n.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.relacion-evento-view.list.action.create.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.relacion-evento-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.relacion-evento-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}function Yt(o,l){if(1&o&&e._UZ(0,"relacion-evento-view-detail",13),2&o){e.oxw();const t=e.MAs(1);e.Q6J("data",null==t?null:t.selection)}}function jt(o,l){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"relacion-evento-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t),e.oxw();const n=e.MAs(1);return e.KtG(n.jumpToAction(n.isAllowed("detail")?"detail":"",n.isAllowed("detail")?n.selection:null))}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);return e.KtG(n.clearErrors())}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execAndJumpToAction(n.saveValue(),s.isAllowed("detail")?"detail":"edit",s.selection))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),n=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.relacion-evento-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.relacion-evento-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.relacion-evento-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.relacion-evento-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==n?null:n.selection)("acl",null==n?null:n.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.relacion-evento-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=t.formView&&t.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.relacion-evento-view.list.action.edit.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.relacion-evento-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}let Kt=(()=>{class o{constructor(t){this.relacionEventoRepository=t,this.uid="list",this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.delete=i=>this.relacionEventoRepository.delete(this.relacionEventoRepository.key(i)),this.deleteSelection=i=>{const n=new ge;return i&&(n.uids=i.map(s=>s.uid).join(",")),this.relacionEventoRepository.deleteAllForQuery(n)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(te))},o.\u0275cmp=e.Xpm({type:o,selectors:[["relacion-evento-view-actions-container"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ut,5),2&t){let n;e.iGM(n=e.CRH())&&(i.actions=n.first)}},inputs:{uid:"uid",fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:26,vars:62,consts:[[3,"id","repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"]],template:function(t,i){if(1&t&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(s){return i.onAction.emit(s)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,St,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,Yt,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,jt,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e.qZA()),2&t){const n=e.MAs(1);e.Q6J("id",i.uid)("repository",i.relacionEventoRepository)("asDialog",i.asDialog)("parents",i.parents),e.xp6(2),e.s9C("label",e.lcZ(3,30,"proyecto.relacion-evento-view.list.action.create.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.uid),e.s9C("subtitle",e.lcZ(4,32,"proyecto.relacion-evento-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,34,"proyecto.relacion-evento-view.list.action.detail.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.uid),e.s9C("subtitle",e.lcZ(8,36,"proyecto.relacion-evento-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,38,"proyecto.relacion-evento-view.list.action.edit.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.uid),e.s9C("subtitle",e.lcZ(12,40,"proyecto.relacion-evento-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,42,"proyecto.relacion-evento-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,44,"proyecto.relacion-evento-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,46,"proyecto.relacion-evento-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,48,"proyecto.relacion-evento-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,50,"proyecto.relacion-evento-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",i.delete),e.xp6(6),e.s9C("label",e.lcZ(21,52,"proyecto.relacion-evento-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,54,"proyecto.relacion-evento-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,56,"proyecto.relacion-evento-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,58,"proyecto.relacion-evento-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,60,"proyecto.relacion-evento-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",i.deleteSelection)}},dependencies:[D.V4,D.fd,D.Lo,D.Fs,Qt,De,m.X$],changeDetection:0}),o})();function Gt(o,l){if(1&o&&(e._UZ(0,"editable-selectone",4),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.relacion-evento-view.form.padre.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.relacion-evento-view.form.padre.placeholder")),e.Q6J("control",t.fields.padre.control)("search",t.relatedRelacionEventoPadre)("retrieve",t.retrieveRelacionEventoPadre)}}function Ht(o,l){if(1&o&&(e._UZ(0,"editable-text",5),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.relacion-evento-view.form.search.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.relacion-evento-view.form.search.placeholder")),e.Q6J("control",t.fields.search.control)}}function Bt(o,l){if(1&o&&(e._UZ(0,"editable-selectone",6),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.relacion-evento-view.form.hijo.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.relacion-evento-view.form.hijo.placeholder")),e.Q6J("control",t.fields.hijo.control)("search",t.relatedRelacionEventoHijo)("retrieve",t.retrieveRelacionEventoHijo)}}function zt(o,l){if(1&o&&(e.YNc(0,Gt,3,9,"editable-selectone",1),e.YNc(1,Ht,3,7,"editable-text",2),e.YNc(2,Bt,3,9,"editable-selectone",3)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.padre?null:t.fields.padre.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.search?null:t.fields.search.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.hijo?null:t.fields.hijo.visible)}}let Wt=(()=>{class o{constructor(t,i,n,s,v){this.relacionEventoRepository=t,this.eventoRepository=i,this.cdRef=n,this.appState=s,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={padre:{visible:!0,editable:!0,disabled:!1},search:{visible:!0,editable:!0,disabled:!1},hijo:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new z.w0,this.relatedRelacionEventoPadre=d=>this.eventoRepository.list(this.filter(new j.er,d,this.relacionEventoPadreFilter)),this.retrieveRelacionEventoPadre=d=>this.eventoRepository.retrieve(d.uid),this.relatedRelacionEventoHijo=d=>this.eventoRepository.list(this.filter(new j.er,d,this.relacionEventoHijoFilter)),this.retrieveRelacionEventoHijo=d=>this.eventoRepository.retrieve(d.uid),this.initialsAndDefaults={padre:(0,N.of)({$ref:0}),hijo:(0,N.of)({$ref:0})},this.form=v.group({padre:this.fields.padre.control=new u.NI("",[]),search:this.fields.search.control=new u.NI("",[]),hijo:this.fields.hijo.control=new u.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){this.acl&&this.updateAcl(),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,n){if(t.search=i,n)for(const s of Object.keys(n))t[s]=n[s];if(this.contextFilter)for(const s of Object.keys(this.contextFilter))t[s]=this.contextFilter[s];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(te),e.Y36(L.h),e.Y36(e.sBO),e.Y36(X.aB),e.Y36(u.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["relacion-evento-view-search"]],viewQuery:function(t,i){if(1&t&&e.Gf(O.k,7),2&t){let n;e.iGM(n=e.CRH())&&(i.formView=n.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",relacionEventoPadreFilter:"relacionEventoPadreFilter",relacionEventoHijoFilter:"relacionEventoHijoFilter"},decls:2,vars:9,consts:[[1,"main-form","form",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl"],["class","padre","id","editable-relacion-evento-padre","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["class","search","id","editable-relacion-evento-search",3,"control","label","placeholder",4,"ngIf"],["class","hijo","id","editable-relacion-evento-hijo","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["id","editable-relacion-evento-padre","display","nombre",1,"padre",3,"control","label","placeholder","search","retrieve"],["id","editable-relacion-evento-search",1,"search",3,"control","label","placeholder"],["id","editable-relacion-evento-hijo","display","nombre",1,"hijo",3,"control","label","placeholder","search","retrieve"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,zt,3,3,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.relacionEvento")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)},dependencies:[h.O5,q.s,we.x,O.k,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.padre[_ngcontent-%COMP%], .search[_ngcontent-%COMP%], .hijo[_ngcontent-%COMP%]{flex-basis:100%}@media only screen and (min-width: 992px){.padre[_ngcontent-%COMP%], .search[_ngcontent-%COMP%], .hijo[_ngcontent-%COMP%]{flex-basis:33%}}"],changeDetection:0}),o})();const Xt=["list"],$t=["searchForm"],qt=["container"];function kt(o,l){1&o&&e._uU(0),2&o&&e.Oqu(l.$implicit.uid)}function ei(o,l){if(1&o&&(e._uU(0),e.ALo(1,"async")),2&o){const t=l.$implicit;let i;e.Oqu(null==(i=e.lcZ(1,1,null==t.padre?null:t.padre.value))?null:i.nombre)}}function ti(o,l){if(1&o&&(e._uU(0),e.ALo(1,"async")),2&o){const t=l.$implicit;let i;e.Oqu(null==(i=e.lcZ(1,1,null==t.hijo?null:t.hijo.value))?null:i.nombre)}}const ii=function(){return["sort"]},oi=function(){return[]};function ni(o,l){if(1&o){const t=e.EpF();e._UZ(0,"relacion-evento-view-search",10,11),e.TgZ(2,"div",12),e._UZ(3,"span",13),e.TgZ(4,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.advancedSearch())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(1),i=e.oxw();e.Q6J("fixed",i.fixed)("defaults",i.defaults)("hidden",t.showTable?e.DdM(6,ii):e.DdM(7,oi)),e.xp6(5),e.Oqu(e.lcZ(6,4,"APP_SEARCH"))}}function li(o,l){if(1&o&&(e.TgZ(0,"list-view",3,4),e.YNc(2,kt,1,1,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,ei,2,3,"ng-template"),e.qZA(),e.TgZ(7,"list-view-column",6),e.ALo(8,"translate"),e.YNc(9,ti,2,3,"ng-template"),e.qZA(),e.TgZ(10,"list-view-no-content"),e._UZ(11,"img",7),e.TgZ(12,"div")(13,"h1"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"list-view-no-results"),e._UZ(20,"img",8),e.TgZ(21,"div")(22,"h1"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"list-view-search-form",9),e.ALo(29,"translate"),e.ALo(30,"translate"),e.YNc(31,ni,7,8,"ng-template"),e.qZA()()),2&o){const t=e.oxw();e.Q6J("filter",t.filter)("repository",t.relacionEventoRepository)("actionContainer",t.actions)("fullScreen",!t.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,12,"proyecto.relacion-evento-view.list.column.padre-nombre")),e.xp6(3),e.s9C("title",e.lcZ(8,14,"proyecto.relacion-evento-view.list.column.hijo-nombre")),e.xp6(7),e.Oqu(e.lcZ(15,16,"proyecto.relacion-evento-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(18,18,"proyecto.relacion-evento-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(24,20,"proyecto.relacion-evento-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(27,22,"proyecto.relacion-evento-view.list.no-results.message")),e.xp6(2),e.s9C("title",e.lcZ(29,24,"proyecto.relacion-evento-view.list.search.title")),e.s9C("subtitle",e.lcZ(30,26,"proyecto.relacion-evento-view.list.search.subtitle"))}}let si=(()=>{class o{constructor(t,i,n,s,v){this.layoutService=t,this.translateService=i,this.snackService=n,this.cdRef=s,this.relacionEventoRepository=v,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.relacion-evento-view.list.app-title").subscribe(t=>{this.layoutService.title.set(t)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10),this.filter.include||(this.filter.include={}),this.filter.include.padre=!0,this.filter.include.hijo=!0}advancedSearch(){var t,i;if(this.searchForm&&this.list){const n={},s=this.searchForm.first.form.value;!(null===(t=s.padre)||void 0===t)&&t.uid&&(n.padre=s.padre.uid),s.search&&(n.search=s.search),!(null===(i=s.hijo)||void 0===i)&&i.uid&&(n.hijo=s.hijo.uid),this.list.first.advancedFilter=n,this.list.first.makeSearch(n)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.P),e.Y36(m.sK),e.Y36(P.ux),e.Y36(e.sBO),e.Y36(te))},o.\u0275cmp=e.Xpm({type:o,selectors:[["relacion-evento-view-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Xt,5),e.Gf($t,5),e.Gf(qt,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.list=n),e.iGM(n=e.CRH())&&(i.searchForm=n),e.iGM(n=e.CRH())&&(i.container=n)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents"},outputs:{onAction:"onAction"},decls:3,vars:5,consts:[["id","relacionEvento-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"uid","parents","fixed","defaults","onAction"],["container",""],["id","relacionEvento-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"],[3,"title","subtitle"],[3,"fixed","defaults","hidden"],["searchForm",""],[2,"display","flex"],[2,"flex","1 1 auto"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,li,32,28,"list-view",0),e.TgZ(1,"relacion-evento-view-actions-container",1,2),e.NdJ("onAction",function(s){return i.onAction.emit(s)}),e.qZA()),2&t&&(e.Q6J("ngIf",i.actions&&!i.actions.action),e.xp6(1),e.Q6J("uid",i.uid)("parents",i.parents)("fixed",i.fixed)("defaults",i.defaults))},dependencies:[h.O5,y.Rt,y.Yi,y.if,y.JR,y.To,b.lW,Kt,Wt,h.Ov,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),o})();const ai=["actions"];function ci(o,l){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",10),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"evento-view-edit",11,12),e.TgZ(7,"action-command-button",13),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);return e.KtG(n.clearErrors())}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",14),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execClearAndJumpToAction(n.saveValue(),"create"))}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",15),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execAndJumpToAction(n.saveValue(),s.isAllowed("detail")?"detail":"edit",s.empty))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),n=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.evento-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.evento-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.evento-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.evento-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==n?null:n.empty)("acl",null==n?null:n.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.evento-view.list.action.create.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.evento-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.evento-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}function ri(o,l){if(1&o&&e._UZ(0,"evento-view-detail",16),2&o){e.oxw();const t=e.MAs(1);e.Q6J("data",null==t?null:t.selection)}}function di(o,l){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",10),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"evento-view-edit",11,12),e.TgZ(7,"action-command-button",13),e.NdJ("run",function(){e.CHM(t),e.oxw();const n=e.MAs(1);return e.KtG(n.jumpToAction(n.isAllowed("detail")?"detail":"",n.isAllowed("detail")?n.selection:null))}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",13),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);return e.KtG(n.clearErrors())}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",15),e.NdJ("run",function(){e.CHM(t);const n=e.MAs(6);e.oxw();const s=e.MAs(1);return e.KtG(s.execAndJumpToAction(n.saveValue(),s.isAllowed("detail")?"detail":"edit",s.selection))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),n=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.evento-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.evento-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.evento-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.evento-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==n?null:n.selection)("acl",null==n?null:n.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.evento-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=t.formView&&t.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.evento-view.list.action.edit.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.evento-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}const k=function(o){return{evento:o}},ye=function(){return["evento"]};function ui(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"notificacion-evento-view-list",19),e.NdJ("onAction",function(n){e.CHM(t),e.oxw(3);const s=e.MAs(1);return e.KtG(s.fireInnerAction(n))}),e.qZA()}if(2&o){const t=e.oxw(3),i=e.MAs(1);e.Q6J("uid",t.uid+"-notificaciones")("parents",i.childParents())("embbed",!0)("defaults",t.defaultsForChild(e.VKq(6,k,null==i?null:i.selection),"notificaciones"))("fixed",t.fixedForChild(e.DdM(8,ye),"notificaciones"))("filter",t.filtersForChild(e.VKq(9,k,null==i||null==i.selection?null:i.selection.uid),"notificaciones"))}}function fi(o,l){if(1&o&&e.YNc(0,ui,1,11,"notificacion-evento-view-list",18),2&o){e.oxw(2);const t=e.MAs(1);e.Q6J("ngIf",null==t||null==t.selection?null:t.selection.uid)}}function vi(o,l){if(1&o&&(e.TgZ(0,"action-command",17),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,fi,1,1,"ng-template"),e.qZA()),2&o){e.oxw();const t=e.MAs(1);e.s9C("label",e.lcZ(1,3,"proyecto.evento-view.list.action.notificaciones.label")),e.s9C("title",null==t||null==t.selection?null:t.selection.nombre),e.s9C("subtitle",e.lcZ(2,5,"proyecto.evento-view.list.action.notificaciones.subtitle"))}}function mi(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"relacion-evento-view-list",19),e.NdJ("onAction",function(n){e.CHM(t),e.oxw(3);const s=e.MAs(1);return e.KtG(s.fireInnerAction(n))}),e.qZA()}if(2&o){const t=e.oxw(3),i=e.MAs(1);e.Q6J("uid",t.uid+"-hijos")("parents",i.childParents())("embbed",!0)("defaults",t.defaultsForChild(e.VKq(6,k,null==i?null:i.selection),"hijos"))("fixed",t.fixedForChild(e.DdM(8,ye),"hijos"))("filter",t.filtersForChild(e.VKq(9,k,null==i||null==i.selection?null:i.selection.uid),"hijos"))}}function pi(o,l){if(1&o&&e.YNc(0,mi,1,11,"relacion-evento-view-list",18),2&o){e.oxw(2);const t=e.MAs(1);e.Q6J("ngIf",null==t||null==t.selection?null:t.selection.uid)}}function hi(o,l){if(1&o&&(e.TgZ(0,"action-command",20),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,pi,1,1,"ng-template"),e.qZA()),2&o){e.oxw();const t=e.MAs(1);e.s9C("label",e.lcZ(1,3,"proyecto.evento-view.list.action.hijos.label")),e.s9C("title",null==t||null==t.selection?null:t.selection.nombre),e.s9C("subtitle",e.lcZ(2,5,"proyecto.evento-view.list.action.hijos.subtitle"))}}function _i(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"evento-documento-view-list",19),e.NdJ("onAction",function(n){e.CHM(t),e.oxw(3);const s=e.MAs(1);return e.KtG(s.fireInnerAction(n))}),e.qZA()}if(2&o){const t=e.oxw(3),i=e.MAs(1);e.Q6J("uid",t.uid+"-documentos")("parents",i.childParents())("embbed",!0)("defaults",t.defaultsForChild(e.VKq(6,k,null==i?null:i.selection),"documentos"))("fixed",t.fixedForChild(e.DdM(8,ye),"documentos"))("filter",t.filtersForChild(e.VKq(9,k,null==i||null==i.selection?null:i.selection.uid),"documentos"))}}function bi(o,l){if(1&o&&e.YNc(0,_i,1,11,"evento-documento-view-list",18),2&o){e.oxw(2);const t=e.MAs(1);e.Q6J("ngIf",null==t||null==t.selection?null:t.selection.uid)}}function wi(o,l){if(1&o&&(e.TgZ(0,"action-command",21),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,bi,1,1,"ng-template"),e.qZA()),2&o){e.oxw();const t=e.MAs(1);e.s9C("label",e.lcZ(1,3,"proyecto.evento-view.list.action.documentos.label")),e.s9C("title",null==t||null==t.selection?null:t.selection.nombre),e.s9C("subtitle",e.lcZ(2,5,"proyecto.evento-view.list.action.documentos.subtitle"))}}let Ci=(()=>{class o{constructor(t,i,n,s,v){this.notificacionEventoRepository=t,this.relacionEventoRepository=i,this.eventoDocumentoRepository=n,this.cdRef=s,this.eventoRepository=v,this.uid="list",this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.documentosAllow=!1,this.hijosAllow=!1,this.notificacionesAllow=!1,this.delete=d=>this.eventoRepository.delete(this.eventoRepository.key(d)),this.deleteSelection=d=>{const r=new j.er;return d&&(r.uids=d.map(p=>p.uid).join(",")),this.eventoRepository.deleteAllForQuery(r)},this.subscriptions=new z.w0}ngOnInit(){this.subscriptions.add(this.notificacionEventoRepository.genericAcl().subscribe(t=>{var i;this.notificacionesAllow=!1,null===(i=t.allows)||void 0===i||i.forEach(n=>{"list"==n.name&&(this.notificacionesAllow=!!n.allowed)}),this.cdRef.detectChanges()})),this.subscriptions.add(this.relacionEventoRepository.genericAcl().subscribe(t=>{var i;this.hijosAllow=!1,null===(i=t.allows)||void 0===i||i.forEach(n=>{"list"==n.name&&(this.hijosAllow=!!n.allowed)}),this.cdRef.detectChanges()})),this.subscriptions.add(this.eventoDocumentoRepository.genericAcl().subscribe(t=>{var i;this.documentosAllow=!1,null===(i=t.allows)||void 0===i||i.forEach(n=>{"list"==n.name&&(this.documentosAllow=!!n.allowed)}),this.cdRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}fixedForChild(t,i){return this.childFixeds[i]?t.concat(this.childFixeds[i]):t}defaultsForChild(t,i){return this.childDefaults[i]?Object.assign(t,this.childDefaults[i]):t}filtersForChild(t,i){return this.childFilters[i]?Object.assign(t,this.childFilters[i]):t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ee),e.Y36(te),e.Y36(ie),e.Y36(e.sBO),e.Y36(L.h))},o.\u0275cmp=e.Xpm({type:o,selectors:[["evento-view-actions-container"]],viewQuery:function(t,i){if(1&t&&e.Gf(ai,5),2&t){let n;e.iGM(n=e.CRH())&&(i.actions=n.first)}},inputs:{uid:"uid",fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:29,vars:65,consts:[[3,"id","repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","notificaciones","acl","retrieve","icon","home",3,"label","title","subtitle",4,"ngIf"],["name","hijos","acl","retrieve","icon","home",3,"label","title","subtitle",4,"ngIf"],["name","documentos","acl","retrieve","icon","documentos",3,"label","title","subtitle",4,"ngIf"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"],["name","notificaciones","acl","retrieve","icon","home",3,"label","title","subtitle"],["style","display: flex; min-height: 400px",3,"uid","parents","embbed","defaults","fixed","filter","onAction",4,"ngIf"],[2,"display","flex","min-height","400px",3,"uid","parents","embbed","defaults","fixed","filter","onAction"],["name","hijos","acl","retrieve","icon","home",3,"label","title","subtitle"],["name","documentos","acl","retrieve","icon","documentos",3,"label","title","subtitle"]],template:function(t,i){if(1&t&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(s){return i.onAction.emit(s)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,ci,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,ri,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,di,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e.YNc(26,vi,4,7,"action-command",7),e.YNc(27,hi,4,7,"action-command",8),e.YNc(28,wi,4,7,"action-command",9),e.qZA()),2&t){const n=e.MAs(1);e.Q6J("id",i.uid)("repository",i.eventoRepository)("asDialog",i.asDialog)("parents",i.parents),e.xp6(2),e.s9C("label",e.lcZ(3,33,"proyecto.evento-view.list.action.create.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.nombre),e.s9C("subtitle",e.lcZ(4,35,"proyecto.evento-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,37,"proyecto.evento-view.list.action.detail.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.nombre),e.s9C("subtitle",e.lcZ(8,39,"proyecto.evento-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,41,"proyecto.evento-view.list.action.edit.label")),e.s9C("title",null==n||null==n.selection?null:n.selection.nombre),e.s9C("subtitle",e.lcZ(12,43,"proyecto.evento-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,45,"proyecto.evento-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,47,"proyecto.evento-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,49,"proyecto.evento-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,51,"proyecto.evento-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,53,"proyecto.evento-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",i.delete),e.xp6(6),e.s9C("label",e.lcZ(21,55,"proyecto.evento-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,57,"proyecto.evento-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,59,"proyecto.evento-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,61,"proyecto.evento-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,63,"proyecto.evento-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",i.deleteSelection),e.xp6(6),e.Q6J("ngIf",i.notificacionesAllow),e.xp6(1),e.Q6J("ngIf",i.hijosAllow),e.xp6(1),e.Q6J("ngIf",i.documentosAllow)}},dependencies:[D.V4,D.fd,D.Lo,D.Fs,h.O5,tt,it.EventoViewDetailComponent,ot.EventoViewEditComponent,Ot,si,m.X$],changeDetection:0}),o})();const Ai=["list"],gi=["searchForm"],Ei=["container"];function yi(o,l){1&o&&e._uU(0),2&o&&e.Oqu(l.$implicit.nombre)}function xi(o,l){1&o&&e._uU(0),2&o&&e.Oqu(l.$implicit.nombre)}function Vi(o,l){if(1&o&&(e.TgZ(0,"list-view",3,4),e.YNc(2,yi,1,1,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,xi,1,1,"ng-template"),e.qZA(),e.TgZ(7,"list-view-no-content"),e._UZ(8,"img",7),e.TgZ(9,"div")(10,"h1"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"list-view-no-results"),e._UZ(17,"img",8),e.TgZ(18,"div")(19,"h1"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.ALo(24,"translate"),e.qZA()()()()),2&o){const t=e.oxw();e.Q6J("filter",t.filter)("repository",t.eventoRepository)("actionContainer",t.actions)("fullScreen",!t.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,9,"proyecto.evento-view.list.column.nombre")),e.xp6(7),e.Oqu(e.lcZ(12,11,"proyecto.evento-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(15,13,"proyecto.evento-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(21,15,"proyecto.evento-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(24,17,"proyecto.evento-view.list.no-results.message"))}}const Zi=[{path:"",component:(()=>{class o{constructor(t,i,n,s,v){this.layoutService=t,this.translateService=i,this.snackService=n,this.cdRef=s,this.eventoRepository=v,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.evento-view.list.app-title").subscribe(t=>{this.layoutService.title.set(t)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10)}advancedSearch(){if(this.searchForm&&this.list){const t={},i=this.searchForm.first.form.value;i.search&&(t.search=i.search),this.list.first.advancedFilter=t,this.list.first.makeSearch(t)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(T.P),e.Y36(m.sK),e.Y36(P.ux),e.Y36(e.sBO),e.Y36(L.h))},o.\u0275cmp=e.Xpm({type:o,selectors:[["evento-view-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ai,5),e.Gf(gi,5),e.Gf(Ei,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.list=n),e.iGM(n=e.CRH())&&(i.searchForm=n),e.iGM(n=e.CRH())&&(i.container=n)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults"},outputs:{onAction:"onAction"},decls:3,vars:8,consts:[["id","evento-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"uid","parents","childFixeds","childFilters","childDefaults","fixed","defaults","onAction"],["container",""],["id","evento-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"]],template:function(t,i){1&t&&(e.YNc(0,Vi,25,19,"list-view",0),e.TgZ(1,"evento-view-actions-container",1,2),e.NdJ("onAction",function(s){return i.onAction.emit(s)}),e.qZA()),2&t&&(e.Q6J("ngIf",i.actions&&!i.actions.action),e.xp6(1),e.Q6J("uid",i.uid)("parents",i.parents)("childFixeds",i.childFixeds)("childFilters",i.childFilters)("childDefaults",i.childDefaults)("fixed",i.fixed)("defaults",i.defaults))},dependencies:[h.O5,y.Rt,y.Yi,y.if,y.To,Ci,m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),o})()}];let Di=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[Y.Bz.forChild(Zi),Y.Bz]}),o})(),Ri=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[B,Di]}),o})()}}]);