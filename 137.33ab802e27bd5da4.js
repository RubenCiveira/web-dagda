"use strict";(self.webpackChunkagenda_angular=self.webpackChunkagenda_angular||[]).push([[137],{4137:(J,x,n)=>{n.r(x),n.d(x,{DossierViewLazyModule:()=>ei});var f=n(9808),d=n(1062),h=n(2155),v=n(5113),a=n(7423),m=n(6510),w=n(1614),y=n(2375),D=n(2782),X=n(5848),R=n(9596),Q=n(7893),V=n(7531),p=n(3075),O=n(5245),q=n(3662),S=n(960),e=n(5e3);let Y=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[m.V,f.ez,R.B,w.r,S.M,h.o9,D.n,p.u5,v.xu,y.W,q.T,a.ot,V.c,p.UX,d.aw]]}),t})(),$=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[m.V,f.ez,w.r,h.o9,D.n,v.xu,y.W,Y,a.ot,d.aw]]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[m.V,f.ez,w.r,S.M,Q.o,h.o9,D.n,p.u5,v.xu,y.W,$,Y,a.ot,O.Ps,V.c,p.UX,d.aw]]}),t})(),K=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[m.V,f.ez,R.B,X.r,w.r,Q.o,h.o9,D.n,p.u5,v.xu,y.W,W,a.ot,O.Ps,V.c,p.UX,d.aw]]}),t})();var N=n(8390),U=n(8862),E=n(7261),L=n(7130),_=n(7738),F=n(9873),T=n(727),C=n(4610),b=n(8034),k=n(8574),I=n(967),Z=n(6537),P=n(6043),H=n(6305),B=n(970),A=n(7093),ee=n(502),G=n(9952);function ie(t,l){if(1&t&&(e._UZ(0,"editable-text",4),e.ALo(1,"translate"),e.ALo(2,"translate")),2&t){const i=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.lugar-dossier-view.form.search.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.lugar-dossier-view.form.search.placeholder")),e.Q6J("control",i.fields.search.control)}}function te(t,l){if(1&t&&(e._UZ(0,"editable-selectone",5),e.ALo(1,"translate"),e.ALo(2,"translate")),2&t){const i=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.lugar-dossier-view.form.lugar.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.lugar-dossier-view.form.lugar.placeholder")),e.Q6J("control",i.fields.lugar.control)("search",i.relatedLugarDossierLugar)("retrieve",i.retrieveLugarDossierLugar)}}function se(t,l){if(1&t&&(e._UZ(0,"editable-selectone",6),e.ALo(1,"translate"),e.ALo(2,"translate")),2&t){const i=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.lugar-dossier-view.form.dossier.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.lugar-dossier-view.form.dossier.placeholder")),e.Q6J("control",i.fields.dossier.control)("search",i.relatedLugarDossierDossier)("retrieve",i.retrieveLugarDossierDossier)}}function oe(t,l){if(1&t&&(e.YNc(0,ie,3,7,"editable-text",1),e.YNc(1,te,3,9,"editable-selectone",2),e.YNc(2,se,3,9,"editable-selectone",3)),2&t){const i=e.oxw();e.Q6J("ngIf",null==i.fields.search?null:i.fields.search.visible),e.xp6(1),e.Q6J("ngIf",null==i.fields.lugar?null:i.fields.lugar.visible),e.xp6(1),e.Q6J("ngIf",null==i.fields.dossier?null:i.fields.dossier.visible)}}let le=(()=>{class t{constructor(i,s,o,r,c,g){this.lugarDossierRepository=i,this.lugarRepository=s,this.dossierRepository=o,this.cdRef=r,this.appState=c,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={search:{visible:!0,editable:!0,disabled:!1},lugar:{visible:!0,editable:!0,disabled:!1},dossier:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new T.w0,this.relatedLugarDossierLugar=u=>this.lugarRepository.list(this.filter(new P.ae,u,this.lugarDossierLugarFilter)),this.retrieveLugarDossierLugar=u=>this.lugarRepository.retrieve(u.uid),this.relatedLugarDossierDossier=u=>this.dossierRepository.list(this.filter(new F.w4,u,this.lugarDossierDossierFilter)),this.retrieveLugarDossierDossier=u=>this.dossierRepository.retrieve(u.uid),this.initialsAndDefaults={},this.form=g.group({search:this.fields.search.control=new p.NI("",[]),lugar:this.fields.lugar.control=new p.NI("",[]),dossier:this.fields.dossier.control=new p.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:i=>{this.updateValues()}}))}ngAfterViewInit(){this.acl&&this.updateAcl(),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}updateValues(){var i,s;this.formView&&this.formView.bindValues(this.fields),this.dirty=!!(null===(i=this.form)||void 0===i?void 0:i.dirty),this.invalid=!!(null===(s=this.form)||void 0===s?void 0:s.invalid),this.cdRef.detectChanges()}updateAcl(){var i,s;this.formView&&this.formView.bindFields(this.fields),this.dirty=!!(null===(i=this.form)||void 0===i?void 0:i.dirty),this.invalid=!!(null===(s=this.form)||void 0===s?void 0:s.invalid),this.cdRef.detectChanges()}filter(i,s,o){if(i.search=s,o)for(const r of Object.keys(o))i[r]=o[r];if(this.contextFilter)for(const r of Object.keys(this.contextFilter))i[r]=this.contextFilter[r];return i}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(C.S),e.Y36(H._),e.Y36(L.h),e.Y36(e.sBO),e.Y36(B.aB),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["lugar-dossier-view-search"]],viewQuery:function(i,s){if(1&i&&e.Gf(Z.k,7),2&i){let o;e.iGM(o=e.CRH())&&(s.formView=o.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",lugarDossierLugarFilter:"lugarDossierLugarFilter",lugarDossierDossierFilter:"lugarDossierDossierFilter"},decls:2,vars:9,consts:[["fxLayout","row wrap","fxLayoutGap","10px",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-search",3,"control","label","placeholder",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-lugar","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-dossier","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-search",3,"control","label","placeholder"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-lugar","display","nombre",3,"control","label","placeholder","search","retrieve"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-dossier","display","nombre",3,"control","label","placeholder","search","retrieve"]],template:function(i,s){1&i&&(e.TgZ(0,"form-view",0),e.YNc(1,oe,3,3,"ng-template"),e.qZA()),2&i&&e.Q6J("messagePreffix","proyecto.lugarDossier")("form",s.form)("disabled",s.disabled)("fixed",s.fixedFields)("hidden",s.hidden)("editables",s.editables)("visibles",s.visibles)("defaults",s.initialsAndDefaults)("acl",s.acl)},directives:[Z.k,A.xw,A.SQ,f.O5,ee.x,A.yH,G.s],pipes:[d.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.inicial[_ngcontent-%COMP%], .modificado[_ngcontent-%COMP%], .remoto[_ngcontent-%COMP%]{display:block;margin:.5em}.diff-field[_ngcontent-%COMP%]{font-weight:700;font-size:20px}"],changeDetection:0}),t})();class M{static clone(l){const i=new M;return i.pageSize=l.pageSize,i.pageNumber=l.pageNumber,i.lastRow=l.lastRow,i.search=l.search,i.lugar="string"==typeof l.lugar||l.lugar instanceof String?l.lugar:l.lugar?l.lugar.uid:void 0,i.dossier="string"==typeof l.dossier||l.dossier instanceof String?l.dossier:l.dossier?l.dossier.uid:void 0,i}}var re=n(262),ne=n(2843),ae=n(4004),ce=n(8505),de=n(5097),ue=n(9087),pe=n(8184);function fe(t,l){if(1&t&&e._UZ(0,"lugar-view-detail",6),2&t){const i=e.oxw(4);e.Q6J("data",i.fields.lugar.value)}}function me(t,l){if(1&t&&e.YNc(0,fe,1,1,"lugar-view-detail",5),2&t){const i=e.oxw(3);e.Q6J("ngIf",i.fields.lugar.value)}}function ge(t,l){if(1&t&&(e.TgZ(0,"editable-selectone",3),e.ALo(1,"translate"),e.ALo(2,"translate"),e.TgZ(3,"editable-view-related",4),e.ALo(4,"translate"),e.YNc(5,me,1,1,"ng-template"),e.qZA()()),2&t){const i=e.oxw(2);e.s9C("label",e.lcZ(1,6,"proyecto.lugar-dossier-view.form.lugar.label")),e.s9C("placeholder",e.lcZ(2,8,"proyecto.lugar-dossier-view.form.lugar.placeholder")),e.Q6J("control",i.fields.lugar.control)("search",i.relatedLugarDossierLugar)("retrieve",i.retrieveLugarDossierLugar),e.xp6(3),e.s9C("title",e.lcZ(4,10,"geo.lugar-view.lugar.showRelated"))}}function he(t,l){if(1&t&&e._UZ(0,"dossier-view-detail",6),2&t){const i=e.oxw(4);e.Q6J("data",i.fields.dossier.value)}}function _e(t,l){if(1&t&&e.YNc(0,he,1,1,"dossier-view-detail",5),2&t){const i=e.oxw(3);e.Q6J("ngIf",i.fields.dossier.value)}}function ve(t,l){if(1&t&&(e.TgZ(0,"editable-selectone",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.TgZ(3,"editable-view-related",4),e.ALo(4,"translate"),e.YNc(5,_e,1,1,"ng-template"),e.qZA()()),2&t){const i=e.oxw(2);e.s9C("label",e.lcZ(1,6,"proyecto.lugar-dossier-view.form.dossier.label")),e.s9C("placeholder",e.lcZ(2,8,"proyecto.lugar-dossier-view.form.dossier.placeholder")),e.Q6J("control",i.fields.dossier.control)("search",i.relatedLugarDossierDossier)("retrieve",i.retrieveLugarDossierDossier),e.xp6(3),e.s9C("title",e.lcZ(4,10,"proyecto.dossier-view.dossier.showRelated"))}}function we(t,l){if(1&t&&(e.YNc(0,ge,6,12,"editable-selectone",1),e.YNc(1,ve,6,12,"editable-selectone",2)),2&t){const i=e.oxw();e.Q6J("ngIf",null==i.fields.lugar?null:i.fields.lugar.visible),e.xp6(1),e.Q6J("ngIf",null==i.fields.dossier?null:i.fields.dossier.visible)}}let j=(()=>{class t{constructor(i,s,o,r,c,g){this.lugarDossierRepository=i,this.lugarRepository=s,this.dossierRepository=o,this.cdRef=r,this.appState=c,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={lugar:{visible:!0,editable:!0,disabled:!1},dossier:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new T.w0,this.relatedLugarDossierLugar=u=>this.lugarRepository.list(this.filter(new P.ae,u,this.lugarDossierLugarFilter)),this.retrieveLugarDossierLugar=u=>this.lugarRepository.retrieve(u.uid),this.relatedLugarDossierDossier=u=>this.dossierRepository.list(this.filter(new F.w4,u,this.lugarDossierDossierFilter)),this.retrieveLugarDossierDossier=u=>this.dossierRepository.retrieve(u.uid),this.initialsAndDefaults={},this.form=g.group({lugar:this.fields.lugar.control=new p.NI("",[]),dossier:this.fields.dossier.control=new p.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:i=>{this.updateValues()}}))}ngAfterViewInit(){var i;this.acl?this.updateAcl():(null===(i=this.data)||void 0===i?void 0:i.uid)?this.lugarDossierRepository.specificAcl(this.data.uid).subscribe(s=>{this.acl=s,this.updateAcl()}):this.lugarDossierRepository.genericAcl().subscribe(s=>{this.acl=s,this.updateAcl()}),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(i){i.defaults&&Object.assign(this.initialsAndDefaults,this.defaults),i.fixed&&(this.fixedFields=[],this.fixed.forEach&&this.fixed.forEach(s=>{this.fixedFields.push(s)})),i.acl&&this.updateAcl()}clearErrors(){this.formView&&this.formView.clearErrors()}saveValue(){if(this.formView){const i=this.lugarDossierRepository.key(this.data),s=this.formView.retrieveValue();return(i?this.lugarDossierRepository.update(i,s):this.lugarDossierRepository.add(s)).pipe((0,de.I)(),(0,re.K)(r=>{var c;return i&&this.lugarDossierRepository.retrieve(i).subscribe(g=>{this.formView&&this.formView.markOriginal(g)}),null===(c=this.formView)||void 0===c||c.showError(r),(0,ne._)(()=>r)}),(0,ce.b)(r=>{var c;Object.keys(r).forEach(g=>{this.data[g]=r[g],this.formView&&(this.formView.data[g]=r[g])}),null===(c=this.formView)||void 0===c||c.refresh()}),(0,ae.U)(r=>"Lugar dossier guardado"))}throw new Error("Intentando guardar sin formView")}updateValues(){var i,s;this.formView&&this.formView.bindValues(this.fields),this.dirty=!!(null===(i=this.form)||void 0===i?void 0:i.dirty),this.invalid=!!(null===(s=this.form)||void 0===s?void 0:s.invalid),this.cdRef.detectChanges()}updateAcl(){var i,s;this.formView&&this.formView.bindFields(this.fields),this.dirty=!!(null===(i=this.form)||void 0===i?void 0:i.dirty),this.invalid=!!(null===(s=this.form)||void 0===s?void 0:s.invalid),this.cdRef.detectChanges()}filter(i,s,o){if(i.search=s,o)for(const r of Object.keys(o))i[r]=o[r];if(this.contextFilter)for(const r of Object.keys(this.contextFilter))i[r]=this.contextFilter[r];return i}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(C.S),e.Y36(H._),e.Y36(L.h),e.Y36(e.sBO),e.Y36(B.aB),e.Y36(p.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["lugar-dossier-view-edit"]],viewQuery:function(i,s){if(1&i&&e.Gf(Z.k,7),2&i){let o;e.iGM(o=e.CRH())&&(s.formView=o.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",data:"data",lugarDossierLugarFilter:"lugarDossierLugarFilter",lugarDossierDossierFilter:"lugarDossierDossierFilter"},features:[e.TTD],decls:2,vars:10,consts:[["fxLayout","row wrap","fxLayoutGap","10px",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl","data"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-lugar-dossier-lugar","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-lugar-dossier-dossier","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-lugar-dossier-lugar","display","nombre",3,"control","label","placeholder","search","retrieve"],[3,"title"],[3,"data",4,"ngIf"],[3,"data"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-lugar-dossier-dossier","display","nombre",3,"control","label","placeholder","search","retrieve"]],template:function(i,s){1&i&&(e.TgZ(0,"form-view",0),e.YNc(1,we,2,2,"ng-template"),e.qZA()),2&i&&e.Q6J("messagePreffix","proyecto.lugarDossier")("form",s.form)("disabled",s.disabled)("fixed",s.fixedFields)("hidden",s.hidden)("editables",s.editables)("visibles",s.visibles)("defaults",s.initialsAndDefaults)("acl",s.acl)("data",s.data)},directives:[Z.k,A.xw,A.SQ,f.O5,G.s,A.yH,ue.MI,pe.K,I.n],pipes:[d.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.inicial[_ngcontent-%COMP%], .modificado[_ngcontent-%COMP%], .remoto[_ngcontent-%COMP%]{display:block;margin:.5em}.diff-field[_ngcontent-%COMP%]{font-weight:700;font-size:20px}"],changeDetection:0}),t})(),be=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["lugar-dossier-view-detail"]],inputs:{data:"data"},decls:1,vars:4,consts:[[3,"disabled","data"]],template:function(i,s){1&i&&e._UZ(0,"lugar-dossier-view-edit",0),2&i&&(e.Akn("detail"),e.Q6J("disabled",!0)("data",s.data))},directives:[j],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0}),t})();const xe=["actions"];function Ae(t,l){if(1&t){const i=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"lugar-dossier-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){return e.CHM(i),e.MAs(6).clearErrors()}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",11),e.NdJ("run",function(){e.CHM(i);const o=e.MAs(6);return e.oxw(),e.MAs(1).execClearAndJumpToAction(o.saveValue(),"create")}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(i);const o=e.MAs(6);e.oxw();const r=e.MAs(1);return r.execAndJumpToAction(o.saveValue(),r.isAllowed("detail")?"detail":"edit",r.empty)}),e.ALo(12,"translate"),e.qZA()}if(2&t){const i=e.MAs(6),s=e.oxw(),o=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.lugar-dossier-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.lugar-dossier-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.lugar-dossier-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.lugar-dossier-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",i.dirty),e.xp6(5),e.Q6J("fixed",s.fixed)("defaults",s.defaults)("data",null==o?null:o.empty)("acl",null==o?null:o.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.lugar-dossier-view.list.action.create.back")),e.Q6J("visible",null==i.formView?null:i.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.lugar-dossier-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=i.formView&&i.formView.error))("disabled",!i.dirty||i.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.lugar-dossier-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=i.formView&&i.formView.error))("disabled",!i.dirty||i.invalid)}}function Ce(t,l){if(1&t&&e._UZ(0,"lugar-dossier-view-detail",13),2&t){e.oxw();const i=e.MAs(1);e.Q6J("data",null==i?null:i.selection)}}function ye(t,l){if(1&t){const i=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"lugar-dossier-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(i),e.oxw();const o=e.MAs(1);return o.jumpToAction(o.isAllowed("detail")?"detail":"",o.isAllowed("detail")?o.selection:null)}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",10),e.NdJ("run",function(){return e.CHM(i),e.MAs(6).clearErrors()}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(i);const o=e.MAs(6);e.oxw();const r=e.MAs(1);return r.execAndJumpToAction(o.saveValue(),r.isAllowed("detail")?"detail":"edit",r.selection)}),e.ALo(12,"translate"),e.qZA()}if(2&t){const i=e.MAs(6),s=e.oxw(),o=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.lugar-dossier-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.lugar-dossier-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.lugar-dossier-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.lugar-dossier-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",i.dirty),e.xp6(5),e.Q6J("fixed",s.fixed)("defaults",s.defaults)("data",null==o?null:o.selection)("acl",null==o?null:o.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.lugar-dossier-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=i.formView&&i.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.lugar-dossier-view.list.action.edit.back")),e.Q6J("visible",null==i.formView?null:i.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.lugar-dossier-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=i.formView&&i.formView.error))("disabled",!i.dirty||i.invalid)}}let De=(()=>{class t{constructor(i){this.lugarDossierRepository=i,this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.delete=s=>this.lugarDossierRepository.delete(this.lugarDossierRepository.key(s)),this.deleteSelection=s=>{const o=new M;return s&&(o.uids=s.map(r=>r.uid).join(",")),this.lugarDossierRepository.deleteAllForQuery(o)}}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(C.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["lugar-dossier-view-actions-container"]],viewQuery:function(i,s){if(1&i&&e.Gf(xe,5),2&i){let o;e.iGM(o=e.CRH())&&(s.actions=o.first)}},inputs:{fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:26,vars:64,consts:[[3,"repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"]],template:function(i,s){if(1&i&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(r){return s.onAction.emit(r)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,Ae,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,Ce,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,ye,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e.qZA()),2&i){const o=e.MAs(1);e.Q6J("repository",s.lugarDossierRepository)("asDialog",s.asDialog)("parents",s.parents),e.xp6(2),e.s9C("label",e.lcZ(3,32,"proyecto.lugar-dossier-view.list.action.create.label")),e.hYB("title","",null==o||null==o.selection?null:o.selection.lugar," ",null==o||null==o.selection?null:o.selection.dossier,""),e.s9C("subtitle",e.lcZ(4,34,"proyecto.lugar-dossier-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,36,"proyecto.lugar-dossier-view.list.action.detail.label")),e.hYB("title","",null==o||null==o.selection?null:o.selection.lugar," ",null==o||null==o.selection?null:o.selection.dossier,""),e.s9C("subtitle",e.lcZ(8,38,"proyecto.lugar-dossier-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,40,"proyecto.lugar-dossier-view.list.action.edit.label")),e.hYB("title","",null==o||null==o.selection?null:o.selection.lugar," ",null==o||null==o.selection?null:o.selection.dossier,""),e.s9C("subtitle",e.lcZ(12,42,"proyecto.lugar-dossier-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,44,"proyecto.lugar-dossier-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,46,"proyecto.lugar-dossier-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,48,"proyecto.lugar-dossier-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,50,"proyecto.lugar-dossier-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,52,"proyecto.lugar-dossier-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",s.delete),e.xp6(6),e.s9C("label",e.lcZ(21,54,"proyecto.lugar-dossier-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,56,"proyecto.lugar-dossier-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,58,"proyecto.lugar-dossier-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,60,"proyecto.lugar-dossier-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,62,"proyecto.lugar-dossier-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",s.deleteSelection)}},directives:[b.Fs,b.Lo,b.V4,j,b.fd,be],pipes:[d.X$],styles:[""],changeDetection:0}),t})();const Le=["list"],Ze=["searchForm"],Ve=["container"];function Fe(t,l){if(1&t&&e._uU(0),2&t){const i=l.$implicit;e.AsE("",i.lugar,"",i.dossier,"")}}function Te(t,l){1&t&&e._uU(0),2&t&&e.Oqu(l.$implicit.lugar)}function Me(t,l){1&t&&e._uU(0),2&t&&e.Oqu(l.$implicit.dossier)}const Je=function(){return["sort"]},Re=function(){return[]};function Qe(t,l){if(1&t){const i=e.EpF();e._UZ(0,"lugar-dossier-view-search",10,11),e.TgZ(2,"div",12),e._UZ(3,"span",13),e.TgZ(4,"button",14),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).advancedSearch()}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&t){e.oxw();const i=e.MAs(1),s=e.oxw();e.Q6J("fixed",s.fixed)("defaults",s.defaults)("hidden",i.showTable?e.DdM(6,Je):e.DdM(7,Re)),e.xp6(5),e.Oqu(e.lcZ(6,4,"APP_SEARCH"))}}function Oe(t,l){if(1&t&&(e.TgZ(0,"list-view",3,4),e.YNc(2,Fe,1,2,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,Te,1,1,"ng-template"),e.qZA(),e.TgZ(7,"list-view-column",6),e.ALo(8,"translate"),e.YNc(9,Me,1,1,"ng-template"),e.qZA(),e.TgZ(10,"list-view-no-content"),e._UZ(11,"img",7),e.TgZ(12,"div")(13,"h1"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"list-view-no-results"),e._UZ(20,"img",8),e.TgZ(21,"div")(22,"h1"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"list-view-search-form",9),e.ALo(29,"translate"),e.ALo(30,"translate"),e.YNc(31,Qe,7,8,"ng-template"),e.qZA()()),2&t){const i=e.oxw();e.Q6J("filter",i.filter)("repository",i.lugarDossierRepository)("actionContainer",i.actions)("fullScreen",!i.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,12,"proyecto.lugar-dossier-view.list.column.lugar")),e.xp6(3),e.s9C("title",e.lcZ(8,14,"proyecto.lugar-dossier-view.list.column.dossier")),e.xp6(7),e.Oqu(e.lcZ(15,16,"proyecto.lugar-dossier-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(18,18,"proyecto.lugar-dossier-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(24,20,"proyecto.lugar-dossier-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(27,22,"proyecto.lugar-dossier-view.list.no-results.message")),e.xp6(2),e.s9C("title",e.lcZ(29,24,"proyecto.lugar-dossier-view.list.search.title")),e.s9C("subtitle",e.lcZ(30,26,"proyecto.lugar-dossier-view.list.search.subtitle"))}}let Se=(()=>{class t{constructor(i,s,o,r,c){this.layoutService=i,this.translateService=s,this.snackService=o,this.cdRef=r,this.lugarDossierRepository=c,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.lugar-dossier-view.list.app-title").subscribe(i=>{this.layoutService.title.set(i)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10)}advancedSearch(){var i,s;if(this.searchForm&&this.list){const o={},r=this.searchForm.first.form.value;r.search&&(o.search=r.search),(null===(i=r.lugar)||void 0===i?void 0:i.uid)&&(o.lugar=r.lugar.uid),(null===(s=r.dossier)||void 0===s?void 0:s.uid)&&(o.dossier=r.dossier.uid),this.list.first.advancedFilter=o,this.list.first.makeSearch()}}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(U.P),e.Y36(d.sK),e.Y36(E.ux),e.Y36(e.sBO),e.Y36(C.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["lugar-dossier-view-list"]],viewQuery:function(i,s){if(1&i&&(e.Gf(Le,5),e.Gf(Ze,5),e.Gf(Ve,5)),2&i){let o;e.iGM(o=e.CRH())&&(s.list=o),e.iGM(o=e.CRH())&&(s.searchForm=o),e.iGM(o=e.CRH())&&(s.container=o)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents"},outputs:{onAction:"onAction"},decls:3,vars:4,consts:[["id","lugarDossier-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"parents","fixed","defaults","onAction"],["container",""],["id","lugarDossier-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"],[3,"title","subtitle"],[3,"fixed","defaults","hidden"],["searchForm",""],[2,"display","flex"],[2,"flex","1 1 auto"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,s){1&i&&(e.YNc(0,Oe,32,28,"list-view",0),e.TgZ(1,"lugar-dossier-view-actions-container",1,2),e.NdJ("onAction",function(r){return s.onAction.emit(r)}),e.qZA()),2&i&&(e.Q6J("ngIf",s.actions&&!s.actions.action),e.xp6(1),e.Q6J("parents",s.parents)("fixed",s.fixed)("defaults",s.defaults))},directives:[f.O5,_.To,_.if,_.Rt,_.Yi,_.JR,le,a.lW,De],pipes:[d.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),t})();const Ye=["actions"];function Ne(t,l){if(1&t){const i=e.EpF();e._UZ(0,"action-close-confirm",8),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"dossier-view-edit",9,10),e.TgZ(7,"action-command-button",11),e.NdJ("run",function(){return e.CHM(i),e.MAs(6).clearErrors()}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",12),e.NdJ("run",function(){e.CHM(i);const o=e.MAs(6);return e.oxw(),e.MAs(1).execClearAndJumpToAction(o.saveValue(),"create")}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",13),e.NdJ("run",function(){e.CHM(i);const o=e.MAs(6);e.oxw();const r=e.MAs(1);return r.execAndJumpToAction(o.saveValue(),r.isAllowed("detail")?"detail":"edit",r.empty)}),e.ALo(12,"translate"),e.qZA()}if(2&t){const i=e.MAs(6),s=e.oxw(),o=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.dossier-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.dossier-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.dossier-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.dossier-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",i.dirty),e.xp6(5),e.Q6J("fixed",s.fixed)("defaults",s.defaults)("data",null==o?null:o.empty)("acl",null==o?null:o.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.dossier-view.list.action.create.back")),e.Q6J("visible",null==i.formView?null:i.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.dossier-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=i.formView&&i.formView.error))("disabled",!i.dirty||i.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.dossier-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=i.formView&&i.formView.error))("disabled",!i.dirty||i.invalid)}}function Ue(t,l){if(1&t&&e._UZ(0,"dossier-view-detail",14),2&t){e.oxw();const i=e.MAs(1);e.Q6J("data",null==i?null:i.selection)}}function Ee(t,l){if(1&t){const i=e.EpF();e._UZ(0,"action-close-confirm",8),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"dossier-view-edit",9,10),e.TgZ(7,"action-command-button",11),e.NdJ("run",function(){e.CHM(i),e.oxw();const o=e.MAs(1);return o.jumpToAction(o.isAllowed("detail")?"detail":"",o.isAllowed("detail")?o.selection:null)}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",11),e.NdJ("run",function(){return e.CHM(i),e.MAs(6).clearErrors()}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",13),e.NdJ("run",function(){e.CHM(i);const o=e.MAs(6);e.oxw();const r=e.MAs(1);return r.execAndJumpToAction(o.saveValue(),r.isAllowed("detail")?"detail":"edit",r.selection)}),e.ALo(12,"translate"),e.qZA()}if(2&t){const i=e.MAs(6),s=e.oxw(),o=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.dossier-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.dossier-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.dossier-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.dossier-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",i.dirty),e.xp6(5),e.Q6J("fixed",s.fixed)("defaults",s.defaults)("data",null==o?null:o.selection)("acl",null==o?null:o.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.dossier-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=i.formView&&i.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.dossier-view.list.action.edit.back")),e.Q6J("visible",null==i.formView?null:i.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.dossier-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=i.formView&&i.formView.error))("disabled",!i.dirty||i.invalid)}}const z=function(t){return{dossier:t}},Ie=function(){return["dossier"]};function Pe(t,l){if(1&t){const i=e.EpF();e.TgZ(0,"lugar-dossier-view-list",17),e.NdJ("onAction",function(o){return e.CHM(i),e.oxw(3),e.MAs(1).fireInnerAction(o)}),e.qZA()}if(2&t){const i=e.oxw(3),s=e.MAs(1);e.Q6J("uid","lugaresDossier")("parents",s.childParents())("embbed",!0)("defaults",i.defaultsForChild(e.VKq(6,z,null==s?null:s.selection),"lugaresDossier"))("fixed",i.fixedForChild(e.DdM(8,Ie),"lugaresDossier"))("filter",i.filtersForChild(e.VKq(9,z,null==s||null==s.selection?null:s.selection.uid),"lugaresDossier"))}}function He(t,l){if(1&t&&e.YNc(0,Pe,1,11,"lugar-dossier-view-list",16),2&t){e.oxw(2);const i=e.MAs(1);e.Q6J("ngIf",null==i||null==i.selection?null:i.selection.uid)}}function Be(t,l){if(1&t&&(e.TgZ(0,"action-command",15),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,He,1,1,"ng-template"),e.qZA()),2&t){e.oxw();const i=e.MAs(1);e.s9C("label",e.lcZ(1,3,"proyecto.dossier-view.list.action.lugares-dossier.label")),e.s9C("title",null==i||null==i.selection?null:i.selection.nombre),e.s9C("subtitle",e.lcZ(2,5,"proyecto.dossier-view.list.action.lugares-dossier.subtitle"))}}let Ge=(()=>{class t{constructor(i,s,o){this.lugarDossierRepository=i,this.cdRef=s,this.dossierRepository=o,this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.lugaresDossierAllow=!1,this.delete=r=>this.dossierRepository.delete(this.dossierRepository.key(r)),this.deleteSelection=r=>{const c=new F.w4;return r&&(c.uids=r.map(g=>g.uid).join(",")),this.dossierRepository.deleteAllForQuery(c)},this.subscriptions=new T.w0}ngOnInit(){this.subscriptions.add(this.lugarDossierRepository.genericAcl().subscribe(i=>{var s;this.lugaresDossierAllow=!1,null===(s=i.allows)||void 0===s||s.forEach(o=>{"list"==o.name&&(this.lugaresDossierAllow=!!o.allowed)}),this.cdRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}fixedForChild(i,s){return this.childFixeds[s]?i.concat(this.childFixeds[s]):i}defaultsForChild(i,s){return this.childDefaults[s]?Object.assign(i,this.childDefaults[s]):i}filtersForChild(i,s){return this.childFilters[s]?Object.assign(i,this.childFilters[s]):i}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(C.S),e.Y36(e.sBO),e.Y36(L.h))},t.\u0275cmp=e.Xpm({type:t,selectors:[["dossier-view-actions-container"]],viewQuery:function(i,s){if(1&i&&e.Gf(Ye,5),2&i){let o;e.iGM(o=e.CRH())&&(s.actions=o.first)}},inputs:{fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:27,vars:62,consts:[[3,"repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","lugaresDossier","acl","retrieve","icon","home",3,"label","title","subtitle",4,"ngIf"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"],["name","lugaresDossier","acl","retrieve","icon","home",3,"label","title","subtitle"],["style","display: flex; min-height: 400px",3,"uid","parents","embbed","defaults","fixed","filter","onAction",4,"ngIf"],[2,"display","flex","min-height","400px",3,"uid","parents","embbed","defaults","fixed","filter","onAction"]],template:function(i,s){if(1&i&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(r){return s.onAction.emit(r)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,Ne,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,Ue,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,Ee,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e.YNc(26,Be,4,7,"action-command",7),e.qZA()),2&i){const o=e.MAs(1);e.Q6J("repository",s.dossierRepository)("asDialog",s.asDialog)("parents",s.parents),e.xp6(2),e.s9C("label",e.lcZ(3,30,"proyecto.dossier-view.list.action.create.label")),e.s9C("title",null==o||null==o.selection?null:o.selection.nombre),e.s9C("subtitle",e.lcZ(4,32,"proyecto.dossier-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,34,"proyecto.dossier-view.list.action.detail.label")),e.s9C("title",null==o||null==o.selection?null:o.selection.nombre),e.s9C("subtitle",e.lcZ(8,36,"proyecto.dossier-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,38,"proyecto.dossier-view.list.action.edit.label")),e.s9C("title",null==o||null==o.selection?null:o.selection.nombre),e.s9C("subtitle",e.lcZ(12,40,"proyecto.dossier-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,42,"proyecto.dossier-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,44,"proyecto.dossier-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,46,"proyecto.dossier-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,48,"proyecto.dossier-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,50,"proyecto.dossier-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",s.delete),e.xp6(6),e.s9C("label",e.lcZ(21,52,"proyecto.dossier-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,54,"proyecto.dossier-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,56,"proyecto.dossier-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,58,"proyecto.dossier-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,60,"proyecto.dossier-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",s.deleteSelection),e.xp6(6),e.Q6J("ngIf",s.lugaresDossierAllow)}},directives:[b.Fs,b.Lo,b.V4,k.P,b.fd,I.n,f.O5,Se],pipes:[d.X$],styles:[""],changeDetection:0}),t})();const je=["list"],ze=["searchForm"],Xe=["container"];function qe(t,l){1&t&&e._uU(0),2&t&&e.Oqu(l.$implicit.nombre)}function $e(t,l){1&t&&e._uU(0),2&t&&e.Oqu(l.$implicit.nombre)}function We(t,l){if(1&t&&(e.TgZ(0,"list-view",3,4),e.YNc(2,qe,1,1,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,$e,1,1,"ng-template"),e.qZA(),e.TgZ(7,"list-view-no-content"),e._UZ(8,"img",7),e.TgZ(9,"div")(10,"h1"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"list-view-no-results"),e._UZ(17,"img",8),e.TgZ(18,"div")(19,"h1"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.ALo(24,"translate"),e.qZA()()()()),2&t){const i=e.oxw();e.Q6J("filter",i.filter)("repository",i.dossierRepository)("actionContainer",i.actions)("fullScreen",!i.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,9,"proyecto.dossier-view.list.column.nombre")),e.xp6(7),e.Oqu(e.lcZ(12,11,"proyecto.dossier-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(15,13,"proyecto.dossier-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(21,15,"proyecto.dossier-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(24,17,"proyecto.dossier-view.list.no-results.message"))}}const Ke=[{path:"",component:(()=>{class t{constructor(i,s,o,r,c){this.layoutService=i,this.translateService=s,this.snackService=o,this.cdRef=r,this.dossierRepository=c,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.dossier-view.list.app-title").subscribe(i=>{this.layoutService.title.set(i)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10)}advancedSearch(){if(this.searchForm&&this.list){const i={},s=this.searchForm.first.form.value;s.search&&(i.search=s.search),this.list.first.advancedFilter=i,this.list.first.makeSearch()}}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(U.P),e.Y36(d.sK),e.Y36(E.ux),e.Y36(e.sBO),e.Y36(L.h))},t.\u0275cmp=e.Xpm({type:t,selectors:[["dossier-view-list"]],viewQuery:function(i,s){if(1&i&&(e.Gf(je,5),e.Gf(ze,5),e.Gf(Xe,5)),2&i){let o;e.iGM(o=e.CRH())&&(s.list=o),e.iGM(o=e.CRH())&&(s.searchForm=o),e.iGM(o=e.CRH())&&(s.container=o)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults"},outputs:{onAction:"onAction"},decls:3,vars:7,consts:[["id","dossier-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"parents","childFixeds","childFilters","childDefaults","fixed","defaults","onAction"],["container",""],["id","dossier-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"]],template:function(i,s){1&i&&(e.YNc(0,We,25,19,"list-view",0),e.TgZ(1,"dossier-view-actions-container",1,2),e.NdJ("onAction",function(r){return s.onAction.emit(r)}),e.qZA()),2&i&&(e.Q6J("ngIf",s.actions&&!s.actions.action),e.xp6(1),e.Q6J("parents",s.parents)("childFixeds",s.childFixeds)("childFilters",s.childFilters)("childDefaults",s.childDefaults)("fixed",s.fixed)("defaults",s.defaults))},directives:[f.O5,_.To,_.if,_.Rt,_.Yi,Ge],pipes:[d.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),t})()}];let ke=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[N.Bz.forChild(Ke)],N.Bz]}),t})(),ei=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[K,ke]]}),t})()},9873:(J,x,n)=>{n.d(x,{w4:()=>h});class h{static clone(a){const m=new h;return m.pageSize=a.pageSize,m.pageNumber=a.pageNumber,m.lastRow=a.lastRow,m.search=a.search,m}}},7130:(J,x,n)=>{n.d(x,{h:()=>v});var f=n(2433),d=n(5e3),h=n(5276);let v=(()=>{class a extends f._j{constructor(w){super({uid:"uid",group:"net-civeira-ejemplos-agenda",name:"dossier",path:"proyecto-dossieres",acl:"proyecto-dossieres"},w)}}return a.\u0275fac=function(w){return new(w||a)(d.LFG(h.D))},a.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);