"use strict";(self.webpackChunkagenda_angular=self.webpackChunkagenda_angular||[]).push([[380],{9380:(fe,w,n)=>{n.r(w),n.d(w,{EscritorViewLazyModule:()=>ue});var f=n(9808),c=n(1062),b=n(2155),y=n(5113),x=n(7423),g=n(6510),_=n(1614),Z=n(2375),V=n(2782),E=n(2362),L=n(3519),T=n(7893),M=n(960),F=n(7531),a=n(3075),J=n(5245),e=n(5e3);let S=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.V,f.ez,_.r,M.M,T.o,L.EscritorViewDetailModule,E.EscritorViewEditModule,b.o9,V.n,a.u5,y.xu,Z.W,x.ot,J.Ps,F.c,a.UX,c.aw]}),o})();var A=n(8390),Q=n(8862),O=n(7261),m=n(48),d=n(7738),D=n(1947),u=n(8034),R=n(745),Y=n(4558);const N=["actions"];function U(o,r){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"escritor-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const s=e.MAs(6);return e.KtG(s.clearErrors())}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",11),e.NdJ("run",function(){e.CHM(t);const s=e.MAs(6);e.oxw();const l=e.MAs(1);return e.KtG(l.execClearAndJumpToAction(s.saveValue(),"create"))}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const s=e.MAs(6);e.oxw();const l=e.MAs(1);return e.KtG(l.execAndJumpToAction(s.saveValue(),l.isAllowed("detail")?"detail":"edit",l.empty))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),s=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.escritor-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.escritor-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.escritor-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.escritor-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==s?null:s.empty)("acl",null==s?null:s.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.escritor-view.list.action.create.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.escritor-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.escritor-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}function G(o,r){if(1&o&&e._UZ(0,"escritor-view-detail",13),2&o){e.oxw();const t=e.MAs(1);e.Q6J("data",null==t?null:t.selection)}}function P(o,r){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"escritor-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t),e.oxw();const s=e.MAs(1);return e.KtG(s.jumpToAction(s.isAllowed("detail")?"detail":"",s.isAllowed("detail")?s.selection:null))}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const s=e.MAs(6);return e.KtG(s.clearErrors())}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const s=e.MAs(6);e.oxw();const l=e.MAs(1);return e.KtG(l.execAndJumpToAction(s.saveValue(),l.isAllowed("detail")?"detail":"edit",l.selection))}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),s=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.escritor-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.escritor-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.escritor-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.escritor-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==s?null:s.selection)("acl",null==s?null:s.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.escritor-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=t.formView&&t.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.escritor-view.list.action.edit.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.escritor-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}let H=(()=>{class o{constructor(t){this.escritorRepository=t,this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.delete=i=>this.escritorRepository.delete(this.escritorRepository.key(i)),this.deleteSelection=i=>{const s=new D.XJ;return i&&(s.uids=i.map(l=>l.uid).join(",")),this.escritorRepository.deleteAllForQuery(s)}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.X))},o.\u0275cmp=e.Xpm({type:o,selectors:[["escritor-view-actions-container"]],viewQuery:function(t,i){if(1&t&&e.Gf(N,5),2&t){let s;e.iGM(s=e.CRH())&&(i.actions=s.first)}},inputs:{fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:26,vars:61,consts:[[3,"repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"]],template:function(t,i){if(1&t&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(l){return i.onAction.emit(l)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,U,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,G,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,P,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e.qZA()),2&t){const s=e.MAs(1);e.Q6J("repository",i.escritorRepository)("asDialog",i.asDialog)("parents",i.parents),e.xp6(2),e.s9C("label",e.lcZ(3,29,"proyecto.escritor-view.list.action.create.label")),e.s9C("title",null==s||null==s.selection?null:s.selection.uid),e.s9C("subtitle",e.lcZ(4,31,"proyecto.escritor-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,33,"proyecto.escritor-view.list.action.detail.label")),e.s9C("title",null==s||null==s.selection?null:s.selection.uid),e.s9C("subtitle",e.lcZ(8,35,"proyecto.escritor-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,37,"proyecto.escritor-view.list.action.edit.label")),e.s9C("title",null==s||null==s.selection?null:s.selection.uid),e.s9C("subtitle",e.lcZ(12,39,"proyecto.escritor-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,41,"proyecto.escritor-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,43,"proyecto.escritor-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,45,"proyecto.escritor-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,47,"proyecto.escritor-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,49,"proyecto.escritor-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",i.delete),e.xp6(6),e.s9C("label",e.lcZ(21,51,"proyecto.escritor-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,53,"proyecto.escritor-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,55,"proyecto.escritor-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,57,"proyecto.escritor-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,59,"proyecto.escritor-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",i.deleteSelection)}},dependencies:[u.V4,u.fd,u.Lo,u.Fs,R.EscritorViewDetailComponent,Y.EscritorViewEditComponent,c.X$],changeDetection:0}),o})();var C=n(6537),I=n(9873),X=n(727),z=n(7130),B=n(970),K=n(9952),j=n(502),p=n(7093);function $(o,r){if(1&o&&(e._UZ(0,"editable-text",3),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.escritor-view.form.search.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.escritor-view.form.search.placeholder")),e.Q6J("control",t.fields.search.control)}}function W(o,r){if(1&o&&(e._UZ(0,"editable-selectone",4),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.escritor-view.form.dossier.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.escritor-view.form.dossier.placeholder")),e.Q6J("control",t.fields.dossier.control)("search",t.relatedEscritorDossier)("retrieve",t.retrieveEscritorDossier)}}function q(o,r){if(1&o&&(e.YNc(0,$,3,7,"editable-text",1),e.YNc(1,W,3,9,"editable-selectone",2)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.search?null:t.fields.search.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.dossier?null:t.fields.dossier.visible)}}let k=(()=>{class o{constructor(t,i,s,l,v){this.escritorRepository=t,this.dossierRepository=i,this.cdRef=s,this.appState=l,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={search:{visible:!0,editable:!0,disabled:!1},dossier:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new X.w0,this.relatedEscritorDossier=h=>this.dossierRepository.list(this.filter(new I.w4,h,this.escritorDossierFilter)),this.retrieveEscritorDossier=h=>this.dossierRepository.retrieve(h.uid),this.initialsAndDefaults={},this.form=v.group({search:this.fields.search.control=new a.NI("",[]),dossier:this.fields.dossier.control=new a.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){this.acl&&this.updateAcl(),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,s){if(t.search=i,s)for(const l of Object.keys(s))t[l]=s[l];if(this.contextFilter)for(const l of Object.keys(this.contextFilter))t[l]=this.contextFilter[l];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.X),e.Y36(z.h),e.Y36(e.sBO),e.Y36(B.aB),e.Y36(a.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["escritor-view-search"]],viewQuery:function(t,i){if(1&t&&e.Gf(C.k,7),2&t){let s;e.iGM(s=e.CRH())&&(i.formView=s.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",escritorDossierFilter:"escritorDossierFilter"},decls:2,vars:9,consts:[["fxLayout","row wrap","fxLayoutGap","10px",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-escritor-search",3,"control","label","placeholder",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-escritor-dossier","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-escritor-search",3,"control","label","placeholder"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-escritor-dossier","display","nombre",3,"control","label","placeholder","search","retrieve"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,q,2,2,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.escritor")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)},dependencies:[f.O5,K.s,j.x,p.xw,p.SQ,p.yH,C.k,c.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.inicial[_ngcontent-%COMP%], .modificado[_ngcontent-%COMP%], .remoto[_ngcontent-%COMP%]{display:block;margin:.5em}.diff-field[_ngcontent-%COMP%]{font-weight:700;font-size:20px}"],changeDetection:0}),o})();const ee=["list"],te=["searchForm"],ie=["container"];function oe(o,r){1&o&&e._uU(0),2&o&&e.Oqu(r.$implicit.uid)}function se(o,r){1&o&&e._uU(0),2&o&&e.Oqu(r.$implicit.uid)}const ne=function(){return["sort"]},re=function(){return[]};function le(o,r){if(1&o){const t=e.EpF();e._UZ(0,"escritor-view-search",10,11),e.TgZ(2,"div",12),e._UZ(3,"span",13),e.TgZ(4,"button",14),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.advancedSearch())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(1),i=e.oxw();e.Q6J("fixed",i.fixed)("defaults",i.defaults)("hidden",t.showTable?e.DdM(6,ne):e.DdM(7,re)),e.xp6(5),e.Oqu(e.lcZ(6,4,"APP_SEARCH"))}}function ce(o,r){if(1&o&&(e.TgZ(0,"list-view",3,4),e.YNc(2,oe,1,1,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,se,1,1,"ng-template"),e.qZA(),e.TgZ(7,"list-view-no-content"),e._UZ(8,"img",7),e.TgZ(9,"div")(10,"h1"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"list-view-no-results"),e._UZ(17,"img",8),e.TgZ(18,"div")(19,"h1"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"list-view-search-form",9),e.ALo(26,"translate"),e.ALo(27,"translate"),e.YNc(28,le,7,8,"ng-template"),e.qZA()()),2&o){const t=e.oxw();e.Q6J("filter",t.filter)("repository",t.escritorRepository)("actionContainer",t.actions)("fullScreen",!t.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,11,"proyecto.escritor-view.list.column.uid")),e.xp6(7),e.Oqu(e.lcZ(12,13,"proyecto.escritor-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(15,15,"proyecto.escritor-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(21,17,"proyecto.escritor-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(24,19,"proyecto.escritor-view.list.no-results.message")),e.xp6(2),e.s9C("title",e.lcZ(26,21,"proyecto.escritor-view.list.search.title")),e.s9C("subtitle",e.lcZ(27,23,"proyecto.escritor-view.list.search.subtitle"))}}const ae=[{path:"",component:(()=>{class o{constructor(t,i,s,l,v){this.layoutService=t,this.translateService=i,this.snackService=s,this.cdRef=l,this.escritorRepository=v,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.escritor-view.list.app-title").subscribe(t=>{this.layoutService.title.set(t)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10)}advancedSearch(){var t;if(this.searchForm&&this.list){const i={},s=this.searchForm.first.form.value;s.search&&(i.search=s.search),!(null===(t=s.dossier)||void 0===t)&&t.uid&&(i.dossier=s.dossier.uid),this.list.first.advancedFilter=i,this.list.first.makeSearch()}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Q.P),e.Y36(c.sK),e.Y36(O.ux),e.Y36(e.sBO),e.Y36(m.X))},o.\u0275cmp=e.Xpm({type:o,selectors:[["escritor-view-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ee,5),e.Gf(te,5),e.Gf(ie,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.list=s),e.iGM(s=e.CRH())&&(i.searchForm=s),e.iGM(s=e.CRH())&&(i.container=s)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents"},outputs:{onAction:"onAction"},decls:3,vars:4,consts:[["id","escritor-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"parents","fixed","defaults","onAction"],["container",""],["id","escritor-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"],[3,"title","subtitle"],[3,"fixed","defaults","hidden"],["searchForm",""],[2,"display","flex"],[2,"flex","1 1 auto"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,ce,29,25,"list-view",0),e.TgZ(1,"escritor-view-actions-container",1,2),e.NdJ("onAction",function(l){return i.onAction.emit(l)}),e.qZA()),2&t&&(e.Q6J("ngIf",i.actions&&!i.actions.action),e.xp6(1),e.Q6J("parents",i.parents)("fixed",i.fixed)("defaults",i.defaults))},dependencies:[f.O5,d.Rt,d.Yi,d.if,d.JR,d.To,x.lW,H,k,c.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),o})()}];let de=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[A.Bz.forChild(ae),A.Bz]}),o})(),ue=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[S,de]}),o})()}}]);