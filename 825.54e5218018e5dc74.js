"use strict";(self.webpackChunkagenda_angular=self.webpackChunkagenda_angular||[]).push([[825],{3825:(q,O,c)=>{c.r(O),c.d(O,{DocumentoViewEditComponent:()=>gt});var T=c(6537),l=c(4006),y=c(208),E=c(727),a=c(262),C=c(2843),A=c(8505),J=c(5097),e=c(4650),Q=c(112),U=c(2320),L=c(970),h=c(6895),M=c(244),f=c(5191),D=c(8372),b=c(9521),w=c(9087),m=c(7957),I=c(6050),p=c(791),v=c(4144),d=c(9549),u=c(4859),_=c(3238),Z=c(3162),N=c(7331),k=c(7392),R=c(7274),Y=c(9383);const K=["inputForChips"];function j(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.displayLabel(t[i.join].value)," ")}}function H(o,r){1&o&&e.GkF(0)}const V=function(o){return{$implicit:o}};function S(o,r){if(1&o&&(e.ynx(0),e.YNc(1,H,1,0,"ng-container",20),e.BQk()),2&o){const t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",e.VKq(2,V,t[i.join].value))}}function B(o,r){if(1&o&&(e.ynx(0),e.YNc(1,j,2,1,"ng-container",3),e.YNc(2,S,2,4,"ng-container",3),e.BQk()),2&o){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",!t.template),e.xp6(1),e.Q6J("ngIf",t.template)}}function G(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",t[i.literal],"")}}function W(o,r){1&o&&(e.TgZ(0,"mat-icon",21),e._uU(1,"cancel"),e.qZA())}function $(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-chip-row",18),e.NdJ("removed",function(){const s=e.CHM(t).$implicit,x=e.oxw(3);return e.KtG(x.removeChip(s))}),e.YNc(1,B,3,2,"ng-container",3),e.YNc(2,G,2,1,"ng-container",3),e.YNc(3,W,2,0,"mat-icon",19),e.qZA()}if(2&o){const t=r.$implicit,i=e.oxw(3);e.Q6J("removable",!i.control.disabled),e.xp6(1),e.Q6J("ngIf",t[i.join].value),e.xp6(1),e.Q6J("ngIf",i.literal&&t[i.literal]),e.xp6(1),e.Q6J("ngIf",!i.control.disabled)}}function X(o,r){if(1&o&&(e.ynx(0),e.YNc(1,$,4,4,"mat-chip-row",17),e.BQk()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.control.value)}}function z(o,r){1&o&&e._UZ(0,"mat-progress-bar",22)}function ee(o,r){1&o&&e._UZ(0,"div",23)}function te(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",24),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.searchAll())}),e._uU(1,"keyboard_arrow_down"),e.qZA()}}function oe(o,r){if(1&o&&(e.TgZ(0,"mat-error",25),e._UZ(1,"editable-error-block",26),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("messages",t.errorMessages)("control",t.control)}}function ie(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",8)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-chip-grid",9,10),e.YNc(5,X,2,1,"ng-container",3),e.TgZ(6,"input",11,12),e.NdJ("matChipInputTokenEnd",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.addChip(n.value))}),e.qZA(),e.YNc(8,z,1,0,"mat-progress-bar",13),e.YNc(9,ee,1,0,"div",14),e.qZA(),e.YNc(10,te,2,0,"mat-icon",15),e.TgZ(11,"div"),e.YNc(12,oe,2,2,"mat-error",16),e.qZA()()}if(2&o){const t=e.MAs(4),i=e.oxw(),n=e.MAs(2);e.Q6J("floatLabel",i.floatLabel)("appearance",i.appearance),e.xp6(2),e.Oqu(i.label),e.xp6(1),e.Q6J("required",i.required)("disabled",i.control.disabled),e.xp6(2),e.Q6J("ngIf",!i.searching&&i.isArray(i.control.value)),e.xp6(1),e.Q6J("placeholder",i.placeholder)("matChipInputFor",t)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",!0)("formControl",i.auxControl)("matAutocomplete",n),e.xp6(2),e.Q6J("ngIf",i.searching||!i.isArray(i.control.value)),e.xp6(1),e.Q6J("ngIf",!i.searching),e.xp6(1),e.Q6J("ngIf",!i.control.disabled),e.xp6(2),e.Q6J("ngIf",i.control.invalid&&i.control.dirty)}}function le(o,r){if(1&o&&(e.TgZ(0,"mat-option"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("",t.errorSearching," ")}}function ae(o,r){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.hij(" ",i.displayLabel(t)," ")}}function ne(o,r){1&o&&e.GkF(0)}function ce(o,r){if(1&o&&(e.ynx(0),e.YNc(1,ne,1,0,"ng-container",20),e.BQk()),2&o){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",i.template)("ngTemplateOutletContext",e.VKq(2,V,t))}}function re(o,r){if(1&o&&(e.TgZ(0,"mat-option",27),e.YNc(1,ae,2,1,"ng-container",3),e.YNc(2,ce,2,4,"ng-container",3),e.qZA()),2&o){const t=r.$implicit,i=e.oxw();e.Q6J("value",t),e.xp6(1),e.Q6J("ngIf",!i.template),e.xp6(1),e.Q6J("ngIf",i.template)}}function se(o,r){if(1&o&&(e.TgZ(0,"mat-option")(1,"mat-icon"),e._uU(2,"warning"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,1,t.label+".noResults")," ")}}function de(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",28),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.openCreateRelatedData(n))}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,1,t.createRelated.title+".label")," ")}}function me(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",35),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(null==n.dialogRef?null:n.dialogRef.close())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createRelatedData())}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,(null==t.createRelated?null:t.createRelated.title)+".cancel")),e.xp6(2),e.Q6J("disabled",null==t.createRelated?null:t.createRelated.isInvalid()),e.xp6(1),e.hij(" ",e.lcZ(6,5,(null==t.createRelated?null:t.createRelated.title)+".save")," ")}}function ue(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",35),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(null==n.dialogRef?null:n.dialogRef.close())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.error=null)}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,(null==t.createRelated?null:t.createRelated.title)+".cancel")),e.xp6(3),e.hij(" ",e.lcZ(6,4,(null==t.createRelated?null:t.createRelated.title)+".back")," ")}}function pe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(null==n.dialogRef?null:n.dialogRef.close())}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"h2",31),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e._UZ(7,"hr",32),e.Hsn(8),e.TgZ(9,"div",33),e._UZ(10,"span",34),e.YNc(11,me,7,7,"ng-container",3),e.YNc(12,ue,7,6,"ng-container",3),e.qZA()}if(2&o){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,3,(null==t.createRelated?null:t.createRelated.title)+".title")),e.xp6(6),e.Q6J("ngIf",!t.error),e.xp6(1),e.Q6J("ngIf",t.error)}}function _e(o,r){if(1&o&&(e.TgZ(0,"h2",38),e._uU(1),e.qZA(),e.Hsn(2,1,["mat-dialog-content",""])),2&o){const t=e.oxw();e.xp6(1),e.Oqu(null==t.viewRelated?null:t.viewRelated.title)}}const fe=[[["editable-create-related"]],[["editable-view-related"]]],he=["editable-create-related","editable-view-related"];let ge=(()=>{class o extends w.Kr{constructor(t,i){super(t,i),this.join="",this.literal="",this.limit=null,this.isArray=n=>Array.isArray(n),this.isObservable=n=>(0,f.b)(n),this.separatorKeysCodes=[b.K5,b.OC],this.fillSubscriptions=new E.w0}ngOnDestroy(){this.fillSubscriptions.unsubscribe(),super.ngOnDestroy()}ngAfterContentInit(){var t;null===(t=this.control)||void 0===t||t.valueChanges.subscribe(i=>{this.valueChange(this.value(),!1)}),this.valueChange(this.value(),!0),this.auxControl=new l.NI(""),this.subscriptions.add(this.auxControl.valueChanges.pipe((0,D.b)(700)).subscribe({next:i=>{this.searchOptions(i)}}))}valueChange(t,i){if(this.fillSubscriptions.unsubscribe(),this.fillSubscriptions=new E.w0,!this.control)throw new Error("No existe el control para asignarle el valor");t?(0,f.b)(t)?this.fillSubscriptions.add(t.subscribe({next:n=>{this.resolve(n,!0)}})):i?this.control.setValue(t):this.resolve(t,!1):i&&this.control.setValue([]),this.cdRef.markForCheck()}searchAll(){this.searchOptions(""),this.autocomplete&&this.autocomplete.openPanel()}addSelectChip(t){this.calculateAddChip(t)}addChip(t){setTimeout(()=>{this.auxControl&&this.calculateAddChip(this.auxControl.value)},300)}removeChip(t){if(this.control){const i=this.value();for(const n in i){const x=this.literal&&t[this.literal]&&i[n][this.literal]===t[this.literal],g=t[this.searchId]&&i[n][this.searchId]==t[this.searchId];if(i[n][this.join]&&t[this.join]&&i[n][this.join].value[this.searchId]===t[this.join].value[this.searchId]||x||g){i.splice(n,1),this.control.markAsDirty(),this.control.updateValueAndValidity(),this.cdRef.markForCheck();break}}}}displayLabel(t){if(!t)return"";let i=t;const n=this.display.split(".");for(const s of n){if(!i[s])return"";i=i[s]}return i}resolve(t,i){const n=[];let s=0;if(t.forEach(x=>{x[this.join]&&(0,f.b)(x[this.join].value)&&(++s,this.fillSubscriptions.add(x[this.join].value.subscribe(g=>{x[this.join].value=g,--s,s<1&&(this.searching=!1,this.cdRef.detectChanges(),this.cdRef.markForCheck())}))),n.push(x)}),s>0&&(this.searching=!0,this.cdRef.detectChanges()),this.cdRef.markForCheck(),!this.control)throw new Error("No existe el control para asignarle el valor");this.control.setValue(n,{emitEvent:i})}valueCreated(t){const i={};i[this.join]=t,this.addChipToData(i)}updateOptions(t){const i=this.value();return t.filter(n=>!(i&&i.find(s=>s[this.join]&&s[this.join][this.searchId]==n[this.searchId])))}calculateAddChip(t){var i,n;const s=null===(n=null===(i=this.inputForChips)||void 0===i?void 0:i.first)||void 0===n?void 0:n.nativeElement;s&&(s.value="",s.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0}))),this.auxControl&&this.auxControl.reset();let x=this.value();if(x||(x=this.setValue([])),t&&"string"!=typeof t){const P=x.filter(F=>F[this.join]&&F[this.join][this.searchId]==t[this.searchId]).shift()||{};P[this.join]={$ref:t.uid,value:t},this.addChipToData(P)}else if(this.literal&&t){const g={};g[this.literal]={$ref:t.uid,value:t},this.addChipToData(g)}else t&&this.search&&this.control&&this.subscriptions.add(this.search(t,this.contextFilter,this.control).subscribe({next:g=>{if(1===g.length){const F={};F[this.join]={$ref:g[0].uid,value:g[0]},this.addChipToData(F)}}}))}addChipToData(t){if(this.control&&"string"!=typeof t&&(t[this.join]||this.literal)){let i=!1;const n=this.value();if(null!==this.limit)for(;n.length>=this.limit;)n.shift();if(t[this.join])for(const s of n)if(s[this.join]&&s[this.join].value[this.searchId]===t[this.join].value[this.searchId]){i=!0;break}i||(n.push(t),this.control.markAsDirty(),this.control.updateValueAndValidity(),this.cdRef.markForCheck())}}value(){var t;const i=null===(t=this.control)||void 0===t?void 0:t.value;return Array.isArray(i)?i:i?.value}setValue(t){var i;return this.control&&this.control.setValue({value:t}),null===(i=this.control)||void 0===i?void 0:i.value.value}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(I.U),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["editable-chips"]],viewQuery:function(t,i){if(1&t&&(e.Gf(m.ZL,5,m.ZL),e.Gf(K,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.autocomplete=n.first),e.iGM(n=e.CRH())&&(i.inputForChips=n)}},inputs:{join:"join",literal:"literal",limit:"limit"},features:[e.qOj],ngContentSelectors:he,decls:11,vars:5,consts:[["style","flex-basis: 100%; margin: 0 5px",3,"floatLabel","appearance",4,"ngIf"],[3,"optionSelected","opened"],["autoForChips",""],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],["showCreateRelated",""],["showViewRelated",""],[2,"flex-basis","100%","margin","0 5px",3,"floatLabel","appearance"],[3,"required","disabled"],["chipList",""],["matInput","",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputTokenEnd"],["inputForChips",""],["mode","query",4,"ngIf"],["style","width: 100%; height: 3px",4,"ngIf"],["matSuffix","",3,"click",4,"ngIf"],["style","font-size: 75%",4,"ngIf"],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["matChipRemove",""],["mode","query"],[2,"width","100%","height","3px"],["matSuffix","",3,"click"],[2,"font-size","75%"],[3,"messages","control"],[3,"value"],[3,"click"],["mat-dialog-title","",2,"display","flex","margin-bottom","0px"],["mat-icon-button","",2,"margin-top","-5px",3,"click"],[2,"margin-top","0"],[2,"margin","-5px -25px 15px -25px"],["mat-dialog-actions","",2,"display","flex","margin-bottom","0px","margin-top","5px"],[2,"flex","1 1 auto"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-title",""]],template:function(t,i){1&t&&(e.F$t(fe),e.YNc(0,ie,13,16,"mat-form-field",0),e.TgZ(1,"mat-autocomplete",1,2),e.NdJ("optionSelected",function(s){return i.addSelectChip(s.option.value)})("opened",function(){return i.searchOptions(null==i.auxControl?null:i.auxControl.value)}),e.YNc(3,le,2,1,"mat-option",3),e.YNc(4,re,3,3,"mat-option",4),e.YNc(5,se,5,3,"mat-option",3),e.YNc(6,de,5,3,"mat-option",5),e.qZA(),e.YNc(7,pe,13,5,"ng-template",null,6,e.W1O),e.YNc(9,_e,3,1,"ng-template",null,7,e.W1O)),2&t&&(e.Q6J("ngIf",i.control&&i.auxControl),e.xp6(3),e.Q6J("ngIf",i.errorSearching),e.xp6(1),e.Q6J("ngForOf",i.options),e.xp6(1),e.Q6J("ngIf",!i.errorSearching&&i.options&&0==i.options.length),e.xp6(1),e.Q6J("ngIf",i.createRelated&&i.options))},dependencies:[h.sg,h.O5,h.tP,l.Fj,l.JJ,p.qJ,l.oH,v.Nt,d.KE,d.hX,d.TO,d.R9,u.lW,u.RK,m.XC,_.ey,m.ZL,Z.pW,N.RA,N.oH,N.qH,N.z3,k.Hw,R.uh,R.H8,Y.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}"],changeDetection:0}),o})();var be=c(5753),xe=c(6266),ve=c(3076),Ce=c(502),Ze=c(7500),Te=c(3103),Ee=c(4850);const we=["fileDialog"],Ie=["errorDialog"];function ye(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.showHelp())}),e.TgZ(1,"mat-icon"),e._uU(2,"help_outline"),e.qZA()()}}function Ae(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"img",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectFile())}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("src",t.control.value,e.LSH)}}function Me(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"img",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectFile())}),e.qZA()}}function Oe(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._UZ(1,"editable-error-block",15),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("messages",t.errorMessages)("control",t.control)}}const Je=function(o){return{"img-registry-editable":o}};function Ue(o,r){if(1&o&&(e.TgZ(0,"div",4)(1,"mat-form-field",5),e._UZ(2,"input",6),e.YNc(3,ye,3,0,"button",7),e.qZA(),e._UZ(4,"div",8),e.YNc(5,Ae,1,1,"img",9),e.YNc(6,Me,1,0,"img",10),e.YNc(7,Oe,2,2,"mat-error",11),e.qZA()),2&o){const t=e.oxw();e.Q6J("ngClass",e.VKq(8,Je,t.control.enabled)),e.xp6(2),e.s9C("value",t.label),e.Q6J("placeholder",t.placeholder)("disabled",!0),e.xp6(1),e.Q6J("ngIf",t.help),e.xp6(2),e.Q6J("ngIf",t.control.value),e.xp6(1),e.Q6J("ngIf",!t.control.value),e.xp6(1),e.Q6J("ngIf",t.control.invalid)}}function De(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.showHelp())}),e.TgZ(1,"mat-icon"),e._uU(2,"help_outline"),e.qZA()()}}function Qe(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._UZ(1,"editable-error-block",15),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("messages",t.errorMessages)("control",t.control)}}function Le(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",16)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",17),e.TgZ(4,"mat-icon",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectFile())}),e._uU(5,"cloud_upload"),e.qZA(),e.YNc(6,De,3,0,"button",7),e.YNc(7,Qe,2,2,"mat-error",11),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("floatLabel",t.floatLabel),e.xp6(2),e.Oqu(t.label),e.xp6(1),e.Q6J("value",t.control.value)("disabled",!0),e.xp6(3),e.Q6J("ngIf",t.help),e.xp6(1),e.Q6J("ngIf",t.control.invalid)}}function Ne(o,r){1&o&&(e.TgZ(0,"p",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"component.fileupload.selectImage")," "))}function Pe(o,r){1&o&&(e.TgZ(0,"p",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"component.fileupload.selectFile")," "))}function Re(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"img",35),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.openFileBrowser(n))}),e.qZA()}if(2&o){const t=e.oxw(3);e.Q6J("src",t.srcTemporal,e.LSH)}}function Fe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"img",36),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw(3);return e.KtG(s.openFileBrowser(n))}),e.qZA()}}function qe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"div",30)(2,"button",31),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.openFileBrowser(n))}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"mat-divider",24),e.TgZ(6,"input",32),e.NdJ("change",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.showPreviewImage(n))}),e.qZA()(),e.YNc(7,Re,1,1,"img",33),e.YNc(8,Fe,1,0,"img",34),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,4,"component.fileupload.clickToChooseImage")," "),e.xp6(3),e.s9C("id",t.buttonId),e.xp6(1),e.Q6J("ngIf",t.srcTemporal),e.xp6(1),e.Q6J("ngIf",!t.srcTemporal)}}function Ye(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"button",37),e.NdJ("click",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.openFileBrowser(n))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",32),e.NdJ("change",function(n){e.CHM(t);const s=e.oxw(2);return e.KtG(s.showPreviewImage(n))}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"component.fileupload.chooseFile")," "),e.xp6(2),e.s9C("id",t.buttonId)}}function ke(o,r){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"mat-progress-bar",38),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("value",t.progressValue),e.xp6(2),e.hij("",t.progressValue,"%")}}function Ve(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(null==n.dialogRef?null:n.dialogRef.close())}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.YNc(4,Ne,3,3,"p",21),e.YNc(5,Pe,3,3,"p",21),e.qZA(),e.TgZ(6,"mat-dialog-content",22),e.YNc(7,qe,9,6,"div",23),e.YNc(8,Ye,5,4,"div",23),e.YNc(9,ke,4,2,"div",11),e.qZA(),e._UZ(10,"mat-divider",24),e.TgZ(11,"mat-dialog-actions",19),e._UZ(12,"span",25),e.TgZ(13,"button",26),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.save(null))}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.save(n.response))}),e._uU(17),e.ALo(18,"translate"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("ngIf","image"===t.contentType),e.xp6(1),e.Q6J("ngIf","image"!==t.contentType),e.xp6(2),e.Q6J("ngIf","image"===t.contentType),e.xp6(1),e.Q6J("ngIf","image"!==t.contentType),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(5),e.Oqu(e.lcZ(15,8,"component.fileupload.quit")),e.xp6(2),e.Q6J("disabled",null==t.response||""==t.response),e.xp6(1),e.hij(" ",e.lcZ(18,10,"component.fileupload.accept")," ")}}function Ke(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"h5",39),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"p",40),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"mat-dialog-actions")(8,"button",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(null==n.errorDialogRef?null:n.errorDialogRef.close())}),e._uU(9),e.ALo(10,"translate"),e.qZA()()}2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,3,"component.fileupload.error")),e.xp6(4),e.Oqu(e.lcZ(6,5,"component.fileupload.toBig")),e.xp6(4),e.Oqu(e.lcZ(10,7,"component.fileupload.close")))}let je=1,He=(()=>{class o extends p.G7{constructor(t,i){super(t),this.cdRef=i,this.contentType="file",this.localUrl="assets/perfilDefecto.jpg",this.srcTemporal="",this.loading=!1,this.progressValue=0,this.buttonId="_upload_button_id_"+je+++(new Date).getTime()}selectFile(){var t;if(null===(t=this.control)||void 0===t||!t.disabled){if(!this.fileDialog)throw new Error("Intentando levantar el dialogo sin la plantailla");this.dialogRef=this.service.dialog.open(this.fileDialog)}}openFileBrowser(t){t.preventDefault(),document.getElementById(this.buttonId)?.click()}showPreviewImage(t){if(t.target.files&&t.target.files[0]){this.loading=!0;const i=new FileReader;if(i.onload=n=>{this.localUrl=n.target.result},i.readAsDataURL(t.target.files[0]),!this.upload)throw new Error("Intentando subir sin indicar el callback");{const n=this.upload(t.target.files[0]).pipe((0,A.b)(s=>{this.progressValue=s.progressPercent}),(0,Te.Z)()).subscribe({next:s=>{this.srcTemporal=this.response=s.data,this.subscriptions.remove(n)},error:s=>{if(this.subscriptions.remove(n),413===s.status){if(this.service.errorHandler.cancelError(s),!this.errorDialog)throw new Error("Intentando pintar un error sin la plantilla");this.errorDialogRef=this.service.dialog.open(this.errorDialog)}}});this.subscriptions.add(n)}}}save(t){this.srcTemporal="",this.response="",this.loading=!1,this.progressValue=0,this.dialogRef&&this.dialogRef.close(),this.control&&(this.control.markAsDirty(),this.control.setValue(t)),this.cdRef.markForCheck()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(I.U),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["editable-upload"]],viewQuery:function(t,i){if(1&t&&(e.Gf(we,5),e.Gf(Ie,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.fileDialog=n.first),e.iGM(n=e.CRH())&&(i.errorDialog=n.first)}},inputs:{contentType:"contentType",upload:"upload"},features:[e.qOj],decls:6,vars:2,consts:[["class","img-registry mat-typography","style","flex: 1; display: flex; flex-direction: column; justify-content: center; position: relative",3,"ngClass",4,"ngIf"],["style","flex-basis: 100%; margin: 0 5px",3,"floatLabel",4,"ngIf"],["fileDialog",""],["errorDialog",""],[1,"img-registry","mat-typography",2,"flex","1","display","flex","flex-direction","column","justify-content","center","position","relative",3,"ngClass"],[2,"position","absolute","top","0px","left","0px","right","0px","flex-basis","100%"],["matInput","",3,"placeholder","disabled","value"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],[2,"height","40px"],["style","width: 100%; margin: auto; border: solid silver 1px","class","img-fluid","alt","image",3,"src","click",4,"ngIf"],["style","width: 20%; border: solid silver 1px","class","img-fluid","src","./assets/img/resources/no-image.png","alt","no-image",3,"click",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click"],["alt","image",1,"img-fluid",2,"width","100%","margin","auto","border","solid silver 1px",3,"src","click"],["src","./assets/img/resources/no-image.png","alt","no-image",1,"img-fluid",2,"width","20%","border","solid silver 1px",3,"click"],[3,"messages","control"],[2,"flex-basis","100%","margin","0 5px",3,"floatLabel"],["matInput","",3,"value","disabled"],["matSuffix","",3,"click"],[2,"display","flex"],["mat-icon-button","",3,"click"],["mat-dialog-title","","mat-dialog-title","",4,"ngIf"],[2,"position","relative"],["class","form-group img-registry mat-typography",4,"ngIf"],[2,"margin","0px -25px 0px -25px"],[2,"flex","1"],["mat-button","","color","warn",3,"click"],["mat-button","","color","primary",3,"disabled","click"],["mat-dialog-title","","mat-dialog-title",""],[1,"form-group","img-registry","mat-typography"],[1,"upload-img"],["mat-button","",3,"click"],["type","file",2,"display","none",3,"id","change"],["class","img-fluid","alt","uploaded",3,"src","click",4,"ngIf"],["src","./assets/img/resources/upload-file.png","class","img-fluid","alt","no-upload",3,"click",4,"ngIf"],["alt","uploaded",1,"img-fluid",3,"src","click"],["src","./assets/img/resources/upload-file.png","alt","no-upload",1,"img-fluid",3,"click"],["mat-stroked-button","",3,"click"],[3,"value"],["mat-dialog-title",""],[1,"mat-typography"]],template:function(t,i){1&t&&(e.YNc(0,Ue,8,10,"div",0),e.YNc(1,Le,8,6,"mat-form-field",1),e.YNc(2,Ve,19,12,"ng-template",null,2,e.W1O),e.YNc(4,Ke,11,9,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("ngIf",i.control&&"image"===i.contentType),e.xp6(1),e.Q6J("ngIf",i.control&&"image"!==i.contentType))},dependencies:[h.mk,h.O5,p.qJ,v.Nt,d.KE,d.hX,d.TO,d.R9,u.lW,u.RK,R.uh,R.xY,R.H8,Ee.d,k.Hw,Z.pW,Y.X$],styles:[".img-registry[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0;padding:0}.img-registry-editable[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.5}#input-img-registry[_ngcontent-%COMP%]{display:none}","[_nghost-%COMP%]{display:flex;flex-direction:row}"],changeDetection:0}),o})();function Se(o,r){if(1&o&&(e._UZ(0,"editable-check",24),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.guardado.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.guardado.placeholder")),e.Q6J("control",t.fields.guardado.control)}}function Be(o,r){if(1&o&&(e._UZ(0,"editable-check",25),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.validado.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.validado.placeholder")),e.Q6J("control",t.fields.validado.control)}}function Ge(o,r){if(1&o&&(e._UZ(0,"editable-datetime",26),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.fecha-subida.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.fecha-subida.placeholder")),e.Q6J("hasTimeInput",!0)("control",t.fields.fechaSubida.control)}}function We(o,r){if(1&o&&(e._UZ(0,"editable-datetime",27),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.fecha-validacion.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.fecha-validacion.placeholder")),e.Q6J("hasTimeInput",!0)("control",t.fields.fechaValidacion.control)}}function $e(o,r){if(1&o&&(e.TgZ(0,"editable-datetime",28),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",29),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,6,"proyecto.documento-view.form.fecha.label")),e.s9C("placeholder",e.lcZ(2,8,"proyecto.documento-view.form.fecha.placeholder")),e.Q6J("hasTimeInput",!0)("control",t.fields.fecha.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,10,"proyecto.documento-view.form.fecha.rule.required"))}}function Xe(o,r){if(1&o&&(e.TgZ(0,"editable-text",30),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",31),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.guid.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.guid.placeholder")),e.Q6J("control",t.fields.guid.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.guid.rule.maxlength"))}}function ze(o,r){if(1&o&&(e.TgZ(0,"editable-textarea",32),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",29),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.documento-view.form.contenido.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.documento-view.form.contenido.placeholder")),e.Q6J("control",t.fields.contenido.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,9,"proyecto.documento-view.form.contenido.rule.required"))}}function et(o,r){if(1&o&&(e._UZ(0,"editable-textarea",33),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.contenido-traducido.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.contenido-traducido.placeholder")),e.Q6J("control",t.fields.contenidoTraducido.control)}}function tt(o,r){if(1&o&&(e.TgZ(0,"editable-text",34),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",31),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.autor.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.autor.placeholder")),e.Q6J("control",t.fields.autor.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.autor.rule.maxlength"))}}function ot(o,r){if(1&o&&(e._UZ(0,"editable-textarea",35),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.meta-datos.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.meta-datos.placeholder")),e.Q6J("control",t.fields.metaDatos.control)}}function it(o,r){if(1&o&&(e._UZ(0,"editable-upload",36),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.adjunto.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.adjunto.placeholder")),e.Q6J("control",t.fields.adjunto.control)("upload",t.uploadDocumentoAdjunto)}}function lt(o,r){if(1&o&&(e._UZ(0,"editable-upload",37),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.multimedia.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.multimedia.placeholder")),e.Q6J("control",t.fields.multimedia.control)("upload",t.uploadDocumentoMultimedia)}}function at(o,r){if(1&o&&(e.TgZ(0,"editable-text",38),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",31),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.tipo.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.tipo.placeholder")),e.Q6J("control",t.fields.tipo.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.tipo.rule.maxlength"))}}function nt(o,r){if(1&o&&(e.TgZ(0,"editable-text",39),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",31),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.origen.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.origen.placeholder")),e.Q6J("control",t.fields.origen.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.origen.rule.maxlength"))}}function ct(o,r){if(1&o&&(e.TgZ(0,"editable-text",40),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",31),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.idioma.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.idioma.placeholder")),e.Q6J("control",t.fields.idioma.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.idioma.rule.maxlength"))}}function rt(o,r){if(1&o&&(e.TgZ(0,"editable-choose",41),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",29),e.ALo(4,"translate"),e._UZ(5,"editable-option",42),e.ALo(6,"translate"),e._UZ(7,"editable-option",42),e.ALo(8,"translate"),e._UZ(9,"editable-option",42),e.ALo(10,"translate"),e._UZ(11,"editable-option",42),e.ALo(12,"translate"),e._UZ(13,"editable-option",42),e.ALo(14,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,15,"proyecto.documento-view.form.valoracion-fuente.label")),e.s9C("placeholder",e.lcZ(2,17,"proyecto.documento-view.form.valoracion-fuente.placeholder")),e.Q6J("control",t.fields.valoracionFuente.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,19,"proyecto.documento-view.form.valoracionFuente.rule.required")),e.xp6(2),e.s9C("label",e.lcZ(6,21,"proyecto.documento-view.form.valoracionFuente.options.f-a")),e.Q6J("value","F_A"),e.xp6(2),e.s9C("label",e.lcZ(8,23,"proyecto.documento-view.form.valoracionFuente.options.f-b")),e.Q6J("value","F_B"),e.xp6(2),e.s9C("label",e.lcZ(10,25,"proyecto.documento-view.form.valoracionFuente.options.f-c")),e.Q6J("value","F_C"),e.xp6(2),e.s9C("label",e.lcZ(12,27,"proyecto.documento-view.form.valoracionFuente.options.f-d")),e.Q6J("value","F_D"),e.xp6(2),e.s9C("label",e.lcZ(14,29,"proyecto.documento-view.form.valoracionFuente.options.f-e")),e.Q6J("value","F_E")}}function st(o,r){if(1&o&&(e.TgZ(0,"editable-choose",43),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",29),e.ALo(4,"translate"),e._UZ(5,"editable-option",42),e.ALo(6,"translate"),e._UZ(7,"editable-option",42),e.ALo(8,"translate"),e._UZ(9,"editable-option",42),e.ALo(10,"translate"),e._UZ(11,"editable-option",42),e.ALo(12,"translate"),e._UZ(13,"editable-option",42),e.ALo(14,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,15,"proyecto.documento-view.form.valoracion-informacion.label")),e.s9C("placeholder",e.lcZ(2,17,"proyecto.documento-view.form.valoracion-informacion.placeholder")),e.Q6J("control",t.fields.valoracionInformacion.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,19,"proyecto.documento-view.form.valoracionInformacion.rule.required")),e.xp6(2),e.s9C("label",e.lcZ(6,21,"proyecto.documento-view.form.valoracionInformacion.options.i-1")),e.Q6J("value","I_1"),e.xp6(2),e.s9C("label",e.lcZ(8,23,"proyecto.documento-view.form.valoracionInformacion.options.i-2")),e.Q6J("value","I_2"),e.xp6(2),e.s9C("label",e.lcZ(10,25,"proyecto.documento-view.form.valoracionInformacion.options.i-3")),e.Q6J("value","I_3"),e.xp6(2),e.s9C("label",e.lcZ(12,27,"proyecto.documento-view.form.valoracionInformacion.options.i-4")),e.Q6J("value","I_4"),e.xp6(2),e.s9C("label",e.lcZ(14,29,"proyecto.documento-view.form.valoracionInformacion.options.i-5")),e.Q6J("value","I_5")}}function dt(o,r){if(1&o&&(e._UZ(0,"editable-check",44),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.ubicacion-explicita.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.ubicacion-explicita.placeholder")),e.Q6J("control",t.fields.ubicacionExplicita.control)}}function mt(o,r){if(1&o&&(e._UZ(0,"editable-decimal",45),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.longitud-minima.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.longitud-minima.placeholder")),e.Q6J("control",t.fields.longitudMinima.control)}}function ut(o,r){if(1&o&&(e._UZ(0,"editable-decimal",46),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.longitud-maxima.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.longitud-maxima.placeholder")),e.Q6J("control",t.fields.longitudMaxima.control)}}function pt(o,r){if(1&o&&(e._UZ(0,"editable-decimal",47),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.latitud-minima.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.latitud-minima.placeholder")),e.Q6J("control",t.fields.latitudMinima.control)}}function _t(o,r){if(1&o&&(e._UZ(0,"editable-decimal",48),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.latitud-maxima.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.latitud-maxima.placeholder")),e.Q6J("control",t.fields.latitudMaxima.control)}}function ft(o,r){if(1&o&&(e._UZ(0,"editable-chips",49),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.documento-view.form.etiquetas.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.documento-view.form.etiquetas.placeholder")),e.Q6J("control",t.fields.etiquetas.control)("search",t.relatedDocumentoEtiquetas)("retrieve",t.retrieveDocumentoEtiquetas)}}function ht(o,r){if(1&o&&(e.YNc(0,Se,3,7,"editable-check",1),e.YNc(1,Be,3,7,"editable-check",2),e.YNc(2,Ge,3,8,"editable-datetime",3),e.YNc(3,We,3,8,"editable-datetime",4),e.YNc(4,$e,5,12,"editable-datetime",5),e.YNc(5,Xe,5,10,"editable-text",6),e.YNc(6,ze,5,11,"editable-textarea",7),e.YNc(7,et,3,7,"editable-textarea",8),e.YNc(8,tt,5,10,"editable-text",9),e.YNc(9,ot,3,7,"editable-textarea",10),e.YNc(10,it,3,8,"editable-upload",11),e.YNc(11,lt,3,8,"editable-upload",12),e.YNc(12,at,5,10,"editable-text",13),e.YNc(13,nt,5,10,"editable-text",14),e.YNc(14,ct,5,10,"editable-text",15),e.YNc(15,rt,15,31,"editable-choose",16),e.YNc(16,st,15,31,"editable-choose",17),e.YNc(17,dt,3,7,"editable-check",18),e.YNc(18,mt,3,7,"editable-decimal",19),e.YNc(19,ut,3,7,"editable-decimal",20),e.YNc(20,pt,3,7,"editable-decimal",21),e.YNc(21,_t,3,7,"editable-decimal",22),e.YNc(22,ft,3,9,"editable-chips",23)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.guardado?null:t.fields.guardado.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.validado?null:t.fields.validado.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.fechaSubida?null:t.fields.fechaSubida.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.fechaValidacion?null:t.fields.fechaValidacion.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.fecha?null:t.fields.fecha.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.guid?null:t.fields.guid.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.contenido?null:t.fields.contenido.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.contenidoTraducido?null:t.fields.contenidoTraducido.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.autor?null:t.fields.autor.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.metaDatos?null:t.fields.metaDatos.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.adjunto?null:t.fields.adjunto.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.multimedia?null:t.fields.multimedia.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.tipo?null:t.fields.tipo.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.origen?null:t.fields.origen.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.idioma?null:t.fields.idioma.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.valoracionFuente?null:t.fields.valoracionFuente.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.valoracionInformacion?null:t.fields.valoracionInformacion.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.ubicacionExplicita?null:t.fields.ubicacionExplicita.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.longitudMinima?null:t.fields.longitudMinima.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.longitudMaxima?null:t.fields.longitudMaxima.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.latitudMinima?null:t.fields.latitudMinima.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.latitudMaxima?null:t.fields.latitudMaxima.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.etiquetas?null:t.fields.etiquetas.visible)}}let gt=(()=>{class o{constructor(t,i,n,s,x){this.documentoRepository=t,this.etiquetaRepository=i,this.cdRef=n,this.appState=s,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={guardado:{visible:!0,editable:!0,disabled:!1},validado:{visible:!0,editable:!0,disabled:!1},fechaSubida:{visible:!0,editable:!0,disabled:!1},fechaValidacion:{visible:!0,editable:!0,disabled:!1},fecha:{visible:!0,editable:!0,disabled:!1},guid:{visible:!0,editable:!0,disabled:!1},contenido:{visible:!0,editable:!0,disabled:!1},contenidoTraducido:{visible:!0,editable:!0,disabled:!1},autor:{visible:!0,editable:!0,disabled:!1},metaDatos:{visible:!0,editable:!0,disabled:!1},adjunto:{visible:!0,editable:!0,disabled:!1},multimedia:{visible:!0,editable:!0,disabled:!1},tipo:{visible:!0,editable:!0,disabled:!1},origen:{visible:!0,editable:!0,disabled:!1},idioma:{visible:!0,editable:!0,disabled:!1},valoracionFuente:{visible:!0,editable:!0,disabled:!1},valoracionInformacion:{visible:!0,editable:!0,disabled:!1},ubicacionExplicita:{visible:!0,editable:!0,disabled:!1},longitudMinima:{visible:!0,editable:!0,disabled:!1},longitudMaxima:{visible:!0,editable:!0,disabled:!1},latitudMinima:{visible:!0,editable:!0,disabled:!1},latitudMaxima:{visible:!0,editable:!0,disabled:!1},etiquetas:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new E.w0,this.uploadDocumentoAdjunto=g=>this.documentoRepository.storeFile(g),this.uploadDocumentoMultimedia=g=>this.documentoRepository.storeFile(g),this.relatedDocumentoEtiquetas=g=>this.etiquetaRepository.list(this.filter(new y.Gw,g,this.documentoEtiquetasFilter)),this.retrieveDocumentoEtiquetas=g=>this.etiquetaRepository.retrieve(g.uid),this.initialsAndDefaults={guardado:!1,validado:!1,fecha:0,contenido:"",valoracionFuente:"F_E",valoracionInformacion:"I_4"},this.form=x.group({guardado:this.fields.guardado.control=new l.NI("",[]),validado:this.fields.validado.control=new l.NI("",[]),fechaSubida:this.fields.fechaSubida.control=new l.NI("",[]),fechaValidacion:this.fields.fechaValidacion.control=new l.NI("",[]),fecha:this.fields.fecha.control=new l.NI("",[l.kI.required]),guid:this.fields.guid.control=new l.NI("",[l.kI.maxLength(250)]),contenido:this.fields.contenido.control=new l.NI("",[l.kI.required]),contenidoTraducido:this.fields.contenidoTraducido.control=new l.NI("",[]),autor:this.fields.autor.control=new l.NI("",[l.kI.maxLength(250)]),metaDatos:this.fields.metaDatos.control=new l.NI("",[]),adjunto:this.fields.adjunto.control=new l.NI("",[]),multimedia:this.fields.multimedia.control=new l.NI("",[]),tipo:this.fields.tipo.control=new l.NI("",[l.kI.maxLength(250)]),origen:this.fields.origen.control=new l.NI("",[l.kI.maxLength(250)]),idioma:this.fields.idioma.control=new l.NI("",[l.kI.maxLength(250)]),valoracionFuente:this.fields.valoracionFuente.control=new l.NI("",[l.kI.required]),valoracionInformacion:this.fields.valoracionInformacion.control=new l.NI("",[l.kI.required]),ubicacionExplicita:this.fields.ubicacionExplicita.control=new l.NI("",[]),longitudMinima:this.fields.longitudMinima.control=new l.NI("",[]),longitudMaxima:this.fields.longitudMaxima.control=new l.NI("",[]),latitudMinima:this.fields.latitudMinima.control=new l.NI("",[]),latitudMaxima:this.fields.latitudMaxima.control=new l.NI("",[]),etiquetas:this.fields.etiquetas.control=new l.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){var t;this.acl?this.updateAcl():null!==(t=this.data)&&void 0!==t&&t.uid?this.documentoRepository.specificAcl(this.data.uid).subscribe(i=>{this.acl=i,this.updateAcl()}):this.documentoRepository.genericAcl().subscribe(i=>{this.acl=i,this.updateAcl()}),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(t){t.defaults&&Object.assign(this.initialsAndDefaults,this.defaults),t.fixed&&(this.fixedFields=["guardado","validado","fechaSubida","fechaValidacion"],this.fixed.forEach&&this.fixed.forEach(i=>{this.fixedFields.push(i)})),t.acl&&this.updateAcl()}clearErrors(){this.formView&&this.formView.clearErrors()}saveValue(){if(this.formView){const t=this.documentoRepository.key(this.data),i=this.formView.retrieveValue();return(t?this.documentoRepository.update(t,i):this.documentoRepository.add(i)).pipe((0,J.I)(),(0,a.K)(s=>{var x;return t&&this.documentoRepository.retrieve(t).subscribe(g=>{this.formView&&this.formView.markOriginal(g)}),null===(x=this.formView)||void 0===x||x.showError(s),(0,C._)(()=>s)}),(0,A.b)(s=>{var x;Object.keys(s).forEach(g=>{this.data[g]=s[g],this.formView&&(this.formView.data[g]=s[g])}),null===(x=this.formView)||void 0===x||x.refresh()}))}throw new Error("Intentando guardar sin formView")}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,n){if(t.search=i,n)for(const s of Object.keys(n))t[s]=n[s];if(this.contextFilter)for(const s of Object.keys(this.contextFilter))t[s]=this.contextFilter[s];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Q.Y),e.Y36(U.J),e.Y36(e.sBO),e.Y36(L.aB),e.Y36(l.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["documento-view-edit"]],viewQuery:function(t,i){if(1&t&&e.Gf(T.k,7),2&t){let n;e.iGM(n=e.CRH())&&(i.formView=n.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",data:"data",documentoEtiquetasFilter:"documentoEtiquetasFilter"},features:[e.TTD],decls:2,vars:10,consts:[[1,"main-form","form",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl","data"],["class","guardado","id","editable-documento-guardado",3,"control","label","placeholder",4,"ngIf"],["class","validado","id","editable-documento-validado",3,"control","label","placeholder",4,"ngIf"],["class","fecha-subida","id","editable-documento-fechaSubida",3,"hasTimeInput","control","label","placeholder",4,"ngIf"],["class","fecha-validacion","id","editable-documento-fechaValidacion",3,"hasTimeInput","control","label","placeholder",4,"ngIf"],["class","fecha","id","editable-documento-fecha",3,"hasTimeInput","control","required","label","placeholder",4,"ngIf"],["class","guid","id","editable-documento-guid",3,"control","label","placeholder",4,"ngIf"],["class","contenido","id","editable-documento-contenido",3,"control","required","label","placeholder",4,"ngIf"],["class","contenido-traducido","id","editable-documento-contenidoTraducido",3,"control","label","placeholder",4,"ngIf"],["class","autor","id","editable-documento-autor",3,"control","label","placeholder",4,"ngIf"],["class","meta-datos","id","editable-documento-metaDatos",3,"control","label","placeholder",4,"ngIf"],["class","adjunto","contentType","file","id","editable-documento-adjunto",3,"control","upload","label","placeholder",4,"ngIf"],["class","multimedia","contentType","file","id","editable-documento-multimedia",3,"control","upload","label","placeholder",4,"ngIf"],["class","tipo","id","editable-documento-tipo",3,"control","label","placeholder",4,"ngIf"],["class","origen","id","editable-documento-origen",3,"control","label","placeholder",4,"ngIf"],["class","idioma","id","editable-documento-idioma",3,"control","label","placeholder",4,"ngIf"],["class","valoracion-fuente","id","editable-documento-valoracionFuente",3,"control","required","label","placeholder",4,"ngIf"],["class","valoracion-informacion","id","editable-documento-valoracionInformacion",3,"control","required","label","placeholder",4,"ngIf"],["class","ubicacion-explicita","id","editable-documento-ubicacionExplicita",3,"control","label","placeholder",4,"ngIf"],["class","longitud-minima","id","editable-documento-longitudMinima",3,"control","label","placeholder",4,"ngIf"],["class","longitud-maxima","id","editable-documento-longitudMaxima",3,"control","label","placeholder",4,"ngIf"],["class","latitud-minima","id","editable-documento-latitudMinima",3,"control","label","placeholder",4,"ngIf"],["class","latitud-maxima","id","editable-documento-latitudMaxima",3,"control","label","placeholder",4,"ngIf"],["class","etiquetas","id","editable-documento-etiquetas","display","nombre","join","etiqueta",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["id","editable-documento-guardado",1,"guardado",3,"control","label","placeholder"],["id","editable-documento-validado",1,"validado",3,"control","label","placeholder"],["id","editable-documento-fechaSubida",1,"fecha-subida",3,"hasTimeInput","control","label","placeholder"],["id","editable-documento-fechaValidacion",1,"fecha-validacion",3,"hasTimeInput","control","label","placeholder"],["id","editable-documento-fecha",1,"fecha",3,"hasTimeInput","control","required","label","placeholder"],["for","required",3,"message"],["id","editable-documento-guid",1,"guid",3,"control","label","placeholder"],["for","maxlength",3,"message"],["id","editable-documento-contenido",1,"contenido",3,"control","required","label","placeholder"],["id","editable-documento-contenidoTraducido",1,"contenido-traducido",3,"control","label","placeholder"],["id","editable-documento-autor",1,"autor",3,"control","label","placeholder"],["id","editable-documento-metaDatos",1,"meta-datos",3,"control","label","placeholder"],["contentType","file","id","editable-documento-adjunto",1,"adjunto",3,"control","upload","label","placeholder"],["contentType","file","id","editable-documento-multimedia",1,"multimedia",3,"control","upload","label","placeholder"],["id","editable-documento-tipo",1,"tipo",3,"control","label","placeholder"],["id","editable-documento-origen",1,"origen",3,"control","label","placeholder"],["id","editable-documento-idioma",1,"idioma",3,"control","label","placeholder"],["id","editable-documento-valoracionFuente",1,"valoracion-fuente",3,"control","required","label","placeholder"],[3,"value","label"],["id","editable-documento-valoracionInformacion",1,"valoracion-informacion",3,"control","required","label","placeholder"],["id","editable-documento-ubicacionExplicita",1,"ubicacion-explicita",3,"control","label","placeholder"],["id","editable-documento-longitudMinima",1,"longitud-minima",3,"control","label","placeholder"],["id","editable-documento-longitudMaxima",1,"longitud-maxima",3,"control","label","placeholder"],["id","editable-documento-latitudMinima",1,"latitud-minima",3,"control","label","placeholder"],["id","editable-documento-latitudMaxima",1,"latitud-maxima",3,"control","label","placeholder"],["id","editable-documento-etiquetas","display","nombre","join","etiqueta",1,"etiquetas",3,"control","label","placeholder","search","retrieve"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,ht,23,23,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.documento")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)("data",i.data)},dependencies:[h.O5,M.Z,ge,be.b,p.tx,xe.Q,ve.S,p.IK,Ce.x,Ze.w,He,T.k,Y.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap}.guardado[_ngcontent-%COMP%], .validado[_ngcontent-%COMP%], .fecha-subida[_ngcontent-%COMP%], .fecha-validacion[_ngcontent-%COMP%], .fecha[_ngcontent-%COMP%], .guid[_ngcontent-%COMP%], .contenido[_ngcontent-%COMP%], .contenido-traducido[_ngcontent-%COMP%], .autor[_ngcontent-%COMP%], .meta-datos[_ngcontent-%COMP%], .adjunto[_ngcontent-%COMP%], .multimedia[_ngcontent-%COMP%], .tipo[_ngcontent-%COMP%], .origen[_ngcontent-%COMP%], .idioma[_ngcontent-%COMP%], .valoracion-fuente[_ngcontent-%COMP%], .valoracion-informacion[_ngcontent-%COMP%], .ubicacion-explicita[_ngcontent-%COMP%], .longitud-minima[_ngcontent-%COMP%], .longitud-maxima[_ngcontent-%COMP%], .latitud-minima[_ngcontent-%COMP%], .latitud-maxima[_ngcontent-%COMP%], .etiquetas[_ngcontent-%COMP%]{flex-basis:100%}@media only screen and (min-width: 992px){.guardado[_ngcontent-%COMP%], .validado[_ngcontent-%COMP%], .fecha-subida[_ngcontent-%COMP%], .fecha-validacion[_ngcontent-%COMP%], .fecha[_ngcontent-%COMP%], .guid[_ngcontent-%COMP%], .contenido[_ngcontent-%COMP%], .contenido-traducido[_ngcontent-%COMP%], .autor[_ngcontent-%COMP%], .meta-datos[_ngcontent-%COMP%], .adjunto[_ngcontent-%COMP%], .multimedia[_ngcontent-%COMP%], .tipo[_ngcontent-%COMP%], .origen[_ngcontent-%COMP%], .idioma[_ngcontent-%COMP%], .valoracion-fuente[_ngcontent-%COMP%], .valoracion-informacion[_ngcontent-%COMP%], .ubicacion-explicita[_ngcontent-%COMP%], .longitud-minima[_ngcontent-%COMP%], .longitud-maxima[_ngcontent-%COMP%], .latitud-minima[_ngcontent-%COMP%], .latitud-maxima[_ngcontent-%COMP%], .etiquetas[_ngcontent-%COMP%]{flex-basis:50%}}"],changeDetection:0}),o})()},208:(q,O,c)=>{c.d(O,{Gw:()=>y});class y{static clone(a){const C=new y;return C.pageSize=a.pageSize,C.pageNumber=a.pageNumber,C.lastRow=a.lastRow,C.search=a.search,C}}},5753:(q,O,c)=>{c.d(O,{b:()=>D});var T=c(791),l=c(4650),y=c(6050),E=c(6895),a=c(4006),C=c(9549),A=c(7392),J=c(4859),e=c(4385),Q=c(3238);function U(b,w){if(1&b&&(l.TgZ(0,"mat-option",7),l._uU(1),l.qZA()),2&b){const m=w.$implicit;l.s9C("value",m.value),l.xp6(1),l.hij(" ",m.label," ")}}function L(b,w){if(1&b){const m=l.EpF();l.TgZ(0,"button",8),l.NdJ("click",function(p){return l.CHM(m),l.oxw(2).control.setValue(null),l.KtG(p.stopPropagation())}),l.TgZ(1,"mat-icon"),l._uU(2,"close"),l.qZA()()}}function h(b,w){if(1&b){const m=l.EpF();l.TgZ(0,"button",9),l.NdJ("click",function(){l.CHM(m);const p=l.oxw(2);return l.KtG(p.showHelp())}),l.TgZ(1,"mat-icon"),l._uU(2,"help_outline"),l.qZA()()}}function M(b,w){if(1&b&&(l.TgZ(0,"mat-error"),l._UZ(1,"editable-error-block",10),l.qZA()),2&b){const m=l.oxw(2);l.xp6(1),l.Q6J("messages",m.errorMessages)("control",m.control)}}function f(b,w){if(1&b&&(l.TgZ(0,"mat-form-field",1)(1,"mat-label"),l._uU(2),l.qZA(),l.TgZ(3,"mat-select",2),l.YNc(4,U,2,2,"mat-option",3),l.qZA(),l.YNc(5,L,3,0,"button",4),l.YNc(6,h,3,0,"button",5),l.YNc(7,M,2,2,"mat-error",6),l.qZA()),2&b){const m=l.oxw();l.Q6J("floatLabel",m.floatLabel)("appearance",m.appearance),l.xp6(2),l.Oqu(m.label),l.xp6(1),l.Q6J("required",m.required)("placeholder",m.placeholder)("formControl",m.control),l.xp6(1),l.Q6J("ngForOf",m.options),l.xp6(1),l.Q6J("ngIf",!m.required&&(null==m.control?null:m.control.value)),l.xp6(1),l.Q6J("ngIf",m.help),l.xp6(1),l.Q6J("ngIf",m.control.invalid)}}let D=(()=>{class b extends T.G7{constructor(m){super(m),this.options=[]}ngAfterViewInit(){if(this.options.splice(0,this.options.length),this.contentOptions){const m=this.contentOptions.toArray();for(const I of m)this.options.push({value:I.value,label:I.label})}}}return b.\u0275fac=function(m){return new(m||b)(l.Y36(y.U))},b.\u0275cmp=l.Xpm({type:b,selectors:[["editable-choose"]],contentQueries:function(m,I,p){if(1&m&&l.Suo(p,T.tx,4),2&m){let v;l.iGM(v=l.CRH())&&(I.contentOptions=v)}},features:[l.qOj],decls:1,vars:1,consts:[["style","flex-basis: 100%; margin: 0 5px",3,"floatLabel","appearance",4,"ngIf"],[2,"flex-basis","100%","margin","0 5px",3,"floatLabel","appearance"],[3,"required","placeholder","formControl"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","mat-icon-button","","type","button","aria-label","Clear",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],[4,"ngIf"],[3,"value"],["matSuffix","","mat-icon-button","","type","button","aria-label","Clear",3,"click"],["mat-icon-button","","matSuffix","",3,"click"],[3,"messages","control"]],template:function(m,I){1&m&&l.YNc(0,f,8,10,"mat-form-field",0),2&m&&l.Q6J("ngIf",I.control)},dependencies:[E.sg,E.O5,a.JJ,a.Q7,T.qJ,a.oH,C.KE,C.hX,C.TO,C.R9,A.Hw,J.RK,e.gD,Q.ey],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}"],changeDetection:0}),b})()},6266:(q,O,c)=>{c.d(O,{Q:()=>I});var T=c(791),l=c(4006),y=c(8675),E=c(4004),a=c(4650),C=c(6050),A=c(135),J=c(6895),e=c(9602),Q=c(3238),U=c(7957),L=c(4144),h=c(9549);function M(p,v){if(1&p&&(a.TgZ(0,"mat-error"),a._UZ(1,"editable-error-block",10),a.qZA()),2&p){const d=a.oxw(2);a.xp6(1),a.Q6J("messages",d.errorMessages)("control",d.control)}}const f=function(p,v){return{"margin-right":p,"flex-basis":v}};function D(p,v){if(1&p){const d=a.EpF();a.TgZ(0,"mat-form-field",4)(1,"mat-label"),a._uU(2),a.qZA(),a.TgZ(3,"input",5),a.NdJ("ngModelChange",function(_){a.CHM(d);const Z=a.oxw();return a.KtG(Z.value.day=_)})("change",function(){a.CHM(d);const _=a.oxw();return a.KtG(_.update(!0))})("dateChange",function(){a.CHM(d);const _=a.oxw();return a.KtG(_.update(!0))}),a.qZA(),a._UZ(4,"mat-datepicker-toggle",6)(5,"mat-datepicker",7,8),a.YNc(7,M,2,2,"mat-error",9),a.qZA()}if(2&p){const d=a.MAs(6),u=a.oxw();a.Q6J("ngStyle",a.WLB(12,f,u.hasTimeInput?"10px":"0px",u.hasTimeInput?"80%":"100%"))("floatLabel",u.floatLabel)("appearance",u.appearance),a.xp6(2),a.Oqu(u.label),a.xp6(1),a.s9C("placeholder",u.placeholder),a.Q6J("ngModel",u.value.day)("matDatepicker",d)("required",u.required)("disabled",u.control.disabled),a.xp6(1),a.Q6J("for",d),a.xp6(1),a.Q6J("touchUi",u.touchUi),a.xp6(2),a.Q6J("ngIf",u.control.invalid)}}function b(p,v){if(1&p){const d=a.EpF();a.TgZ(0,"mat-form-field",11)(1,"input",12),a.NdJ("ngModelChange",function(_){a.CHM(d);const Z=a.oxw();return a.KtG(Z.value.hour=_)})("change",function(){a.CHM(d);const _=a.oxw();return a.KtG(_.update(!0))}),a.qZA()()}if(2&p){const d=a.oxw();a.Q6J("floatLabel",d.floatLabel)("appearance",d.appearance),a.xp6(1),a.Q6J("ngModel",d.value.hour)("placeholder",d.hourPlaceholder)("required",d.required)("disabled",d.control.disabled)}}function w(p,v){if(1&p&&(a.TgZ(0,"mat-option",18),a._uU(1),a.qZA()),2&p){const d=v.$implicit;a.Q6J("value",d.name),a.xp6(1),a.hij(" ",d.label," ")}}function m(p,v){if(1&p){const d=a.EpF();a.TgZ(0,"mat-form-field",13),a._UZ(1,"input",14),a.TgZ(2,"mat-autocomplete",15,16),a.NdJ("optionSelected",function(){a.CHM(d);const _=a.oxw();return a.KtG(_.update(!0))}),a.YNc(4,w,2,2,"mat-option",17),a.ALo(5,"async"),a.qZA()()}if(2&p){const d=a.MAs(3),u=a.oxw();a.xp6(1),a.Q6J("formControl",u.myControl)("matAutocomplete",d),a.xp6(3),a.Q6J("ngForOf",a.lcZ(5,3,u.filteredZones))}}let I=(()=>{class p extends T.G7{constructor(d,u){super(d),this.dateService=u,this.touchUi=!1,this.hasTimeInput=!0,this.showTimeZone=!1,this.bindToTimeZone=!1,this.timeZoneEditable=!0,this.timeZone="",this.hourPlaceholder="",this.value={day:null,hour:""},this.zones=[],this.subscriptions.add(this.service.state.availablesTimezones.get().subscribe(_=>{for(const Z of _)this.zones.push(Z)})),this.subscriptions.add(this.service.state.timeZone.get().subscribe(_=>{this.timeZone=_})),this.myControl=new l.NI,this.myControl.setValue(this.timeZone),this.filteredZones=this.myControl.valueChanges.pipe((0,y.O)(""),(0,E.U)(_=>_&&"string"!=typeof _?_.name:_),(0,E.U)(_=>_?this._filter(_):this.zones.slice()))}_filter(d){const u=d.toLowerCase();return this.zones.filter(_=>_.code.toLowerCase().includes(u))}ngOnChanges(d){d.timeZone&&this.value.day&&(this.bindToTimeZone&&(this.value.day=this.dateService.localToTimeZone(this.value.day,this.timeZone),this.value.hour=this.dateService.format(this.value.day,"HH:mm")),this.update(!1),this.myControl.setValue(this.timeZone)),d.timeZoneEditable&&this.checkUpdate()}ngAfterContentInit(){this.control&&(this.writeValue(this.control.value),this.subscriptions.add(this.control.valueChanges.subscribe(d=>{this.writeValue(d)})))}update(d){let u=this.value.hour;this.hasTimeInput&&!u&&(u="00:00");const _=this.value.day;if(this.hasTimeInput&&_&&u){const Z=this.dateService.parse(this.dateService.format(_,"YYYY-MM-DD")+" "+u,"YYYY-MM-DD HH:mm");this.selected=Z,this.selected=this.timeZone?this.dateService.localToTimeZone(Z,this.timeZone):Z}else this.selected=!this.hasTimeInput&&_?this.dateService.format(_,"YYYY-MM-DD"):null;if(this.control){const N=this.selected===this.control.value;(!this.selected&&this.control.value||!N)&&(this.control.markAsDirty(),this.control.setValue(this.selected,{emitEvent:d}))}}checkUpdate(){this.timeZoneEditable&&this.control&&this.control.enabled?this.myControl.enable():this.myControl.disable()}writeValue(d){d?("string"==typeof d&&(d=new Date(d)),this.value.day=this.dateService.localToTimeZone(d,this.timeZone),this.value.hour=this.dateService.format(this.value.day,"HH:mm")):(this.value.day=null,this.value.hour=""),this.checkUpdate()}}return p.\u0275fac=function(d){return new(d||p)(a.Y36(C.U),a.Y36(A.R))},p.\u0275cmp=a.Xpm({type:p,selectors:[["editable-datetime"]],inputs:{touchUi:"touchUi",hasTimeInput:"hasTimeInput",showTimeZone:"showTimeZone",bindToTimeZone:"bindToTimeZone",timeZoneEditable:"timeZoneEditable",timeZone:"timeZone",hourPlaceholder:"hourPlaceholder"},features:[a.qOj,a.TTD],decls:4,vars:3,consts:[["class","input-date",3,"ngStyle","floatLabel","appearance",4,"ngIf"],["class","input-time","style","min-width: 70px; flex-basis: 20%",3,"floatLabel","appearance",4,"ngIf"],[1,"form-zone"],["class","input-zone",4,"ngIf"],[1,"input-date",3,"ngStyle","floatLabel","appearance"],["matInput","",2,"width","auto",3,"ngModel","matDatepicker","placeholder","required","disabled","ngModelChange","change","dateChange"],["matSuffix","",3,"for"],[3,"touchUi"],["picker",""],[4,"ngIf"],[3,"messages","control"],[1,"input-time",2,"min-width","70px","flex-basis","20%",3,"floatLabel","appearance"],["type","time","matInput","",3,"ngModel","placeholder","required","disabled","ngModelChange","change"],[1,"input-zone"],["type","text","matInput","","placeholder","Zona horaria",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(d,u){1&d&&(a.YNc(0,D,8,15,"mat-form-field",0),a.YNc(1,b,2,6,"mat-form-field",1),a.TgZ(2,"form",2),a.YNc(3,m,6,5,"mat-form-field",3),a.qZA()),2&d&&(a.Q6J("ngIf",u.control),a.xp6(1),a.Q6J("ngIf",u.control&&u.hasTimeInput),a.xp6(2),a.Q6J("ngIf",u.hasTimeInput&&u.showTimeZone))},dependencies:[J.sg,J.O5,J.PC,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F,T.qJ,l.oH,e.Mq,e.hl,e.nW,Q.ey,U.XC,U.ZL,L.Nt,h.KE,h.hX,h.TO,h.R9,J.Ov],styles:[".changeQuickDay[_ngcontent-%COMP%]{border:0;cursor:pointer;font-size:large;margin-bottom:8px}","[_nghost-%COMP%]{display:flex;flex-direction:row}"],changeDetection:0}),p})()},7500:(q,O,c)=>{c.d(O,{w:()=>L});var T=c(791),l=c(4650),y=c(6050),E=c(6895),a=c(4006),C=c(4144),A=c(9549),J=c(7392);function e(h,M){if(1&h){const f=l.EpF();l.TgZ(0,"button",5),l.NdJ("click",function(){l.CHM(f);const b=l.oxw(2);return l.KtG(b.showHelp())}),l.TgZ(1,"mat-icon"),l._uU(2,"help_outline"),l.qZA()()}}function Q(h,M){if(1&h&&(l.TgZ(0,"mat-error"),l._UZ(1,"editable-error-block",6),l.qZA()),2&h){const f=l.oxw(2);l.xp6(1),l.Q6J("messages",f.errorMessages)("control",f.control)}}function U(h,M){if(1&h&&(l.TgZ(0,"mat-form-field",1)(1,"mat-label"),l._uU(2),l.qZA(),l.TgZ(3,"textarea",2),l._uU(4," "),l.qZA(),l.YNc(5,e,3,0,"button",3),l.YNc(6,Q,2,2,"mat-error",4),l.qZA()),2&h){const f=l.oxw();l.Q6J("floatLabel",f.floatLabel)("appearance",f.appearance),l.xp6(2),l.Oqu(f.label),l.xp6(1),l.Q6J("required",f.required)("placeholder",f.placeholder)("formControl",f.control),l.xp6(2),l.Q6J("ngIf",f.help),l.xp6(1),l.Q6J("ngIf",f.control.invalid)}}let L=(()=>{class h extends T.G7{constructor(f){super(f)}}return h.\u0275fac=function(f){return new(f||h)(l.Y36(y.U))},h.\u0275cmp=l.Xpm({type:h,selectors:[["editable-textarea"]],features:[l.qOj],decls:1,vars:1,consts:[["style","flex-basis: 100%; margin: 0 5px",3,"floatLabel","appearance",4,"ngIf"],[2,"flex-basis","100%","margin","0 5px",3,"floatLabel","appearance"],["matInput","","type","color",3,"required","placeholder","formControl"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click"],[3,"messages","control"]],template:function(f,D){1&f&&l.YNc(0,U,7,8,"mat-form-field",0),2&f&&l.Q6J("ngIf",D.control)},dependencies:[E.O5,a.Fj,a.JJ,a.Q7,T.qJ,a.oH,C.Nt,A.KE,A.hX,A.TO,A.R9,J.Hw],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row}"]}),h})()}}]);