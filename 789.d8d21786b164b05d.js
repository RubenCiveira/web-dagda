"use strict";(self.webpackChunkagenda_angular=self.webpackChunkagenda_angular||[]).push([[789],{1850:(v,m,a)=>{a.d(m,{np:()=>p});class p{static clone(_){const t=new p;return t.pageSize=_.pageSize,t.pageNumber=_.pageNumber,t.lastRow=_.lastRow,t.search=_.search,t}}},1654:(v,m,a)=>{a.d(m,{m:()=>f});var d=a(2433),u=a(5e3),p=a(5276);let f=(()=>{class _ extends d._j{constructor(g){super({uid:"uid",group:"net-civeira-ejemplos-agenda",name:"users",path:"users",acl:"users"},g)}}return _.\u0275fac=function(g){return new(g||_)(u.LFG(p.D))},_.\u0275prov=u.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},9952:(v,m,a)=>{a.d(m,{s:()=>z});var d=a(1079),u=a(727),p=a(5191),f=a(8372),_=a(9087),t=a(5e3),g=a(6050),b=a(9808),x=a(3075),O=a(791),R=a(7093),E=a(7322),A=a(7531),Z=a(508),D=a(5899),C=a(2349),M=a(7423),S=a(5245),U=a(1062);function y(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",14),t.NdJ("click",function(l){t.CHM(e);const r=t.oxw(2);return t.KtG(r.openShowRelatedData(l))}),t._uU(1,"loupe"),t.qZA()}}function I(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",14),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.searchOptions())}),t._uU(1,"keyboard_arrow_down"),t.qZA()}}function P(o,i){1&o&&t._UZ(0,"mat-progress-bar",15)}function w(o,i){if(1&o&&(t.TgZ(0,"mat-error"),t._UZ(1,"editable-error-block",16),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("messages",e.errorMessages)("control",e.control)}}function L(o,i){if(1&o&&(t.TgZ(0,"mat-form-field",9)(1,"mat-label"),t._uU(2),t.qZA(),t._UZ(3,"input",10),t.TgZ(4,"span",11),t.YNc(5,y,2,0,"mat-icon",6),t.YNc(6,I,2,0,"mat-icon",6),t.qZA(),t.TgZ(7,"div",12),t.YNc(8,P,1,0,"mat-progress-bar",13),t.qZA(),t.YNc(9,w,2,2,"mat-error",4),t.qZA()),2&o){const e=t.oxw(),n=t.MAs(3);t.Q6J("floatLabel",e.floatLabel)("appearance",e.appearance),t.xp6(2),t.Oqu(e.label),t.xp6(1),t.Q6J("required",e.required)("placeholder",e.placeholder)("formControl",e.control)("matAutocomplete",n),t.xp6(2),t.Q6J("ngIf",e.viewRelated&&e.control.value),t.xp6(1),t.Q6J("ngIf",!e.control.disabled),t.xp6(2),t.Q6J("ngIf",e.searching),t.xp6(1),t.Q6J("ngIf",e.control.invalid)}}function N(o,i){1&o&&t.GkF(0)}const T=function(o){return{$implicit:o}};function J(o,i){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,N,1,0,"ng-container",18),t.qZA()),2&o){const e=t.oxw();t.s9C("id",e.displayUid),t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.VKq(3,T,e.control.value))}}function K(o,i){if(1&o&&(t.TgZ(0,"mat-option"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.errorSearchingLabel)}}function W(o,i){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.displayLabel(e)," ")}}function Q(o,i){1&o&&t.GkF(0)}function B(o,i){if(1&o&&(t.ynx(0),t.YNc(1,Q,1,0,"ng-container",18),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",n.template)("ngTemplateOutletContext",t.VKq(2,T,e))}}function k(o,i){if(1&o&&(t.TgZ(0,"mat-option",19),t.YNc(1,W,2,1,"ng-container",4),t.YNc(2,B,2,4,"ng-container",4),t.qZA()),2&o){const e=i.$implicit,n=t.oxw();t.Q6J("value",e),t.xp6(1),t.Q6J("ngIf",!n.template),t.xp6(1),t.Q6J("ngIf",n.template)}}function Y(o,i){if(1&o&&(t.TgZ(0,"mat-option")(1,"mat-icon"),t._uU(2,"warning"),t.qZA(),t._uU(3),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.hij("",e.noResultLabel," ")}}function F(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",14),t.NdJ("click",function(l){t.CHM(e);const r=t.oxw();return t.KtG(r.openCreateRelatedData(l))}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA(),t._uU(3),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",e.createLabel," ")}}function q(o,i){}function V(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",27),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(null==l.dialogRef?null:l.dialogRef.close())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",28),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.createRelatedData())}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,(null==e.createRelated?null:e.createRelated.title)+".cancel")),t.xp6(2),t.Q6J("disabled",!e.createRelated||e.createRelated.isInvalid()),t.xp6(1),t.hij(" ",t.lcZ(6,5,(null==e.createRelated?null:e.createRelated.title)+".save")," ")}}function G(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",27),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(null==l.dialogRef?null:l.dialogRef.close())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",29),t.NdJ("click",function(){t.CHM(e);const l=t.oxw(2);return t.KtG(l.error=null)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,(null==e.createRelated?null:e.createRelated.title)+".cancel")),t.xp6(3),t.hij(" ",t.lcZ(6,4,(null==e.createRelated?null:e.createRelated.title)+".back")," ")}}function j(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"button",21),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(null==l.dialogRef?null:l.dialogRef.close())}),t.TgZ(2,"mat-icon"),t._uU(3,"close"),t.qZA()(),t.TgZ(4,"h2",22),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t._UZ(7,"hr",23),t.YNc(8,q,0,0,"ng-template",null,24,t.W1O),t.TgZ(10,"div",25),t._UZ(11,"span",26),t.YNc(12,V,7,7,"ng-container",4),t.YNc(13,G,7,6,"ng-container",4),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,3,(null==e.createRelated?null:e.createRelated.title)+".title")),t.xp6(7),t.Q6J("ngIf",!e.error),t.xp6(1),t.Q6J("ngIf",e.error)}}function H(o,i){}function $(o,i){if(1&o&&(t.TgZ(0,"h2",30),t._uU(1),t.qZA(),t.TgZ(2,"div",31),t.YNc(3,H,0,0,"ng-template",null,32,t.W1O),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(null==e.viewRelated?null:e.viewRelated.title)}}let X=0,z=(()=>{class o extends _.Kr{constructor(e,n){super(e,n),this.searchSubscription=new u.w0,this.displayUid="_display_"+X+++(new Date).getTime()}valueCreated(e){console.log("CREANDO EL VALOR ASOCIADO",e),this.control&&(console.log("ASIGNANDO COMO VALOR A ",e),this.control.setValue(e),setTimeout(()=>{var n;null===(n=this.trigger)||void 0===n||n.closePanel()},100))}ngOnDestroy(){this.searchSubscription.unsubscribe(),super.ngOnDestroy()}ngAfterContentInit(){if(!this.control)throw new Error("Control no asignado");{this.subscriptions.add(this.control.valueChanges.subscribe(l=>{const r=this.value();console.log("TNEGO A ",r),(0,p.b)(r)&&this.wait(r,n)})),this.subscriptions.add(this.control.valueChanges.pipe((0,f.b)(700)).subscribe({next:l=>{var r,c;const s=this.value();s&&!(0,p.b)(s)&&(s&&"object"==typeof s?JSON.stringify(s)!==JSON.stringify(null===(r=this.control)||void 0===r?void 0:r.value)&&(null===(c=this.control)||void 0===c||c.setValue(s)):this.searchOptions(s))}}));const e=this.value(),n=this.control.disabled;if((0,p.b)(e))this.wait(e,n);else if(e&&"object"!=typeof e){const l={};l[this.searchId]=e,this.loadSearch(l,n)}else!e&&null!==e&&this.control.setValue(null)}}loadSearch(e,n){var l;if(n||null===(l=this.control)||void 0===l||l.markAsPending(),this.searching=!0,this.cdRef.detectChanges(),this.cdRef.markForCheck(),this.searchSubscription.unsubscribe(),this.searchSubscription=new u.w0,!this.retrieve)throw new Error("No existe la funcion para recuperar relacionados");this.searchSubscription.add(this.retrieve(e).subscribe({next:r=>{var c;this.searching=!1,null===(c=this.control)||void 0===c||c.setValue(r)}}))}checkRelatedValue(){this.control&&"string"==typeof this.control.value&&this.control.setValue(null)}displayLabel(e){var n;if(this.template){const c=null===(n=document.getElementById(this.displayUid))||void 0===n?void 0:n.innerText;return this.oldDisplay!==c&&setTimeout(()=>{var s,h;null===(s=this.control)||void 0===s||s.patchValue(null===(h=this.control)||void 0===h?void 0:h.value)},1e3),this.oldDisplay=c,c}if(!e)return"";let l=e;const r=this.display.split(".");for(const c of r){if(!l[c])return"";l=l[c]}return l}wait(e,n){var l;n||null===(l=this.control)||void 0===l||l.markAsPending(),this.searching=!0,this.cdRef.detectChanges(),this.cdRef.markForCheck(),this.searchSubscription.unsubscribe(),this.searchSubscription=new u.w0,this.searchSubscription.add(e.subscribe({next:r=>{var c;this.searching=!1,null===(c=this.control)||void 0===c||c.setValue(r)}}))}value(){var e;const n=null===(e=this.control)||void 0===e?void 0:e.value;return"string"==typeof n?n:n&&n.value&&n.$ref?n.value:n&&void 0===n.$ref?n:void 0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.U),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["editable-selectone"]],viewQuery:function(e,n){if(1&e&&t.Gf(d.ZL,5),2&e){let l;t.iGM(l=t.CRH())&&(n.trigger=l.first)}},features:[t.qOj],decls:12,vars:7,consts:[["fxFlex","100%",3,"floatLabel","appearance",4,"ngIf"],["style","position: absolute; width: 1px; height: 1px; overflow: hidden",3,"id",4,"ngIf"],[3,"displayWith","opened","closed"],["autocomplete","matAutocomplete"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],["showCreateRelated",""],["showViewRelated",""],["fxFlex","100%",3,"floatLabel","appearance"],["matInput","",3,"required","placeholder","formControl","matAutocomplete"],["matSuffix","",2,"display","flex"],[2,"position","absolute","width","100%","height","3px"],["mode","query",4,"ngIf"],[3,"click"],["mode","query"],[3,"messages","control"],[2,"position","absolute","width","1px","height","1px","overflow","hidden",3,"id"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"value"],["mat-dialog-title","",2,"display","flex","margin-bottom","0px"],["mat-icon-button","",2,"margin-top","-5px",3,"click"],[2,"margin-top","0"],[2,"margin","-5px -25px 15px -25px"],["contentCreateRelated",""],["mat-dialog-actions","",2,"display","flex","margin-bottom","0px","margin-top","5px"],[2,"flex","1 1 auto"],["mat-button","",3,"click"],["mat-button","","color","primary",3,"disabled","click"],["mat-button","","color","primary",3,"click"],["mat-dialog-title",""],[2,"display","flex","flex-direction","column","max-height","600px","overflow","auto"],["contentViewRelated",""]],template:function(e,n){1&e&&(t.YNc(0,L,10,11,"mat-form-field",0),t.YNc(1,J,2,5,"div",1),t.TgZ(2,"mat-autocomplete",2,3),t.NdJ("opened",function(){return n.searchOptions()})("closed",function(){return n.checkRelatedValue()}),t.YNc(4,K,2,1,"mat-option",4),t.YNc(5,k,3,3,"mat-option",5),t.YNc(6,Y,4,1,"mat-option",4),t.YNc(7,F,4,1,"mat-option",6),t.qZA(),t.YNc(8,j,14,5,"ng-template",null,7,t.W1O),t.YNc(10,$,5,1,"ng-template",null,8,t.W1O)),2&e&&(t.Q6J("ngIf",n.control),t.xp6(1),t.Q6J("ngIf",n.control&&n.template),t.xp6(1),t.Q6J("displayWith",n.displayLabel.bind(n)),t.xp6(2),t.Q6J("ngIf",n.errorSearching),t.xp6(1),t.Q6J("ngForOf",n.options),t.xp6(1),t.Q6J("ngIf",!n.errorSearching&&n.options&&0==n.options.length),t.xp6(1),t.Q6J("ngIf",n.createRelated&&n.options))},dependencies:[b.sg,b.O5,b.tP,x.Fj,x.JJ,x.Q7,O.qJ,x.oH,R.yH,E.TO,E.KE,E.hX,E.R9,A.Nt,d.XC,d.ZL,Z.ey,D.pW,C.uh,C.H8,M.lW,S.Hw,U.X$],encapsulation:2,changeDetection:0}),o})()}}]);