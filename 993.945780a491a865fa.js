"use strict";(self.webpackChunkagenda_angular=self.webpackChunkagenda_angular||[]).push([[993],{4993:(ht,D,a)=>{a.r(D),a.d(D,{DocumentoViewLazyModule:()=>vt});var f=a(9808),m=a(1062),w=a(2155),g=a(5113),b=a(7423),C=a(6510),y=a(1614),Z=a(2375),A=a(2782),P=a(9596),L=a(960),X=a(2499),H=a(4392),V=a(7893),B=a(6051),G=a(3519),q=a(8195),z=a(8473),$=a(553),T=a(7531),s=a(3075),e=a(5e3);let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[],imports:[[C.V,f.ez,P.B,X.r,z.x,H.f,$.L,y.r,L.M,V.o,B.a,q.M,G.g,w.o9,A.n,s.u5,g.xu,Z.W,b.ot,T.c,s.UX,m.aw]]}),o})(),k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[],imports:[[C.V,f.ez,I,y.r,w.o9,A.n,g.xu,Z.W,b.ot,m.aw]]}),o})();var W=a(5245);let K=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[],imports:[[C.V,f.ez,k,I,y.r,L.M,V.o,w.o9,A.n,s.u5,g.xu,Z.W,b.ot,W.Ps,T.c,s.UX,m.aw]]}),o})();var J=a(8390),ee=a(8862),te=a(7261),v=a(112),x=a(7738),h=a(6537),Q=a(1947),M=a(9873),N=a(727),E=a(48),U=a(7130),S=a(970),p=a(7093),Y=a(9952),O=a(502);function oe(o,n){if(1&o&&(e._UZ(0,"editable-selectone",4),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.documento-view.form.escritor.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.documento-view.form.escritor.placeholder")),e.Q6J("control",t.fields.escritor.control)("search",t.relatedDocumentoEscritor)("retrieve",t.retrieveDocumentoEscritor)}}function ie(o,n){if(1&o&&(e._UZ(0,"editable-text",5),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.search.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.search.placeholder")),e.Q6J("control",t.fields.search.control)}}function le(o,n){if(1&o&&(e._UZ(0,"editable-selectone",6),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.documento-view.form.dossier.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.documento-view.form.dossier.placeholder")),e.Q6J("control",t.fields.dossier.control)("search",t.relatedDocumentoDossier)("retrieve",t.retrieveDocumentoDossier)}}function ne(o,n){if(1&o&&(e.YNc(0,oe,3,9,"editable-selectone",1),e.YNc(1,ie,3,7,"editable-text",2),e.YNc(2,le,3,9,"editable-selectone",3)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.escritor?null:t.fields.escritor.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.search?null:t.fields.search.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.dossier?null:t.fields.dossier.visible)}}let ae=(()=>{class o{constructor(t,i,l,c,d,u){this.documentoRepository=t,this.escritorRepository=i,this.dossierRepository=l,this.cdRef=c,this.appState=d,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={escritor:{visible:!0,editable:!0,disabled:!1},search:{visible:!0,editable:!0,disabled:!1},dossier:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new N.w0,this.relatedDocumentoEscritor=r=>this.escritorRepository.list(this.filter(new Q.XJ,r,this.documentoEscritorFilter)),this.retrieveDocumentoEscritor=r=>this.escritorRepository.retrieve(r.uid),this.relatedDocumentoDossier=r=>this.dossierRepository.list(this.filter(new M.w4,r,this.documentoDossierFilter)),this.retrieveDocumentoDossier=r=>this.dossierRepository.retrieve(r.nombre),this.initialsAndDefaults={guardado:!1,validado:!1,fecha:0,contenido:"",valoracionFuente:"F_E",valoracionInformacion:"I_4"},this.form=u.group({escritor:this.fields.escritor.control=new s.NI("",[]),search:this.fields.search.control=new s.NI("",[]),dossier:this.fields.dossier.control=new s.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){this.acl&&this.updateAcl(),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!!(null===(t=this.form)||void 0===t?void 0:t.dirty),this.invalid=!!(null===(i=this.form)||void 0===i?void 0:i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!!(null===(t=this.form)||void 0===t?void 0:t.dirty),this.invalid=!!(null===(i=this.form)||void 0===i?void 0:i.invalid),this.cdRef.detectChanges()}filter(t,i,l){if(t.search=i,l)for(const c of Object.keys(l))t[c]=l[c];if(this.contextFilter)for(const c of Object.keys(this.contextFilter))t[c]=this.contextFilter[c];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.Y),e.Y36(E.X),e.Y36(U.h),e.Y36(e.sBO),e.Y36(S.aB),e.Y36(s.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["documento-view-search"]],viewQuery:function(t,i){if(1&t&&e.Gf(h.k,7),2&t){let l;e.iGM(l=e.CRH())&&(i.formView=l.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",documentoEscritorFilter:"documentoEscritorFilter",documentoDossierFilter:"documentoDossierFilter"},decls:2,vars:9,consts:[["fxLayout","row wrap","fxLayoutGap","10px",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-documento-escritor","display","uid",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-documento-search",3,"control","label","placeholder",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-documento-dossier","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-documento-escritor","display","uid",3,"control","label","placeholder","search","retrieve"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-documento-search",3,"control","label","placeholder"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-documento-dossier","display","nombre",3,"control","label","placeholder","search","retrieve"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,ne,3,3,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.documento")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)},directives:[h.k,p.xw,p.SQ,f.O5,Y.s,p.yH,O.x],pipes:[m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.inicial[_ngcontent-%COMP%], .modificado[_ngcontent-%COMP%], .remoto[_ngcontent-%COMP%]{display:block;margin:.5em}.diff-field[_ngcontent-%COMP%]{font-weight:700;font-size:20px}"],changeDetection:0}),o})();var F=a(2169),_=a(8034),ce=a(262),se=a(2843),re=a(4004),de=a(8505),ue=a(5097),me=a(9087),fe=a(967),pe=a(244),xe=a(6266),R=a(791),be=a(7500),ve=a(745),he=a(5031),_e=a(5753),we=a(3076);function ge(o,n){if(1&o&&e._UZ(0,"dossier-view-detail",28),2&o){const t=e.oxw(4);e.Q6J("data",t.fields.dossier.value)}}function Ce(o,n){if(1&o&&e.YNc(0,ge,1,1,"dossier-view-detail",27),2&o){const t=e.oxw(3);e.Q6J("ngIf",t.fields.dossier.value)}}function ye(o,n){if(1&o&&(e.TgZ(0,"editable-selectone",25),e.ALo(1,"translate"),e.ALo(2,"translate"),e.TgZ(3,"editable-view-related",26),e.ALo(4,"translate"),e.YNc(5,Ce,1,1,"ng-template"),e.qZA()()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,6,"proyecto.documento-view.form.dossier.label")),e.s9C("placeholder",e.lcZ(2,8,"proyecto.documento-view.form.dossier.placeholder")),e.Q6J("control",t.fields.dossier.control)("search",t.relatedDocumentoDossier)("retrieve",t.retrieveDocumentoDossier),e.xp6(3),e.s9C("title",e.lcZ(4,10,"proyecto.dossier-view.dossier.showRelated"))}}function Ze(o,n){if(1&o&&(e._UZ(0,"editable-check",29),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.guardado.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.guardado.placeholder")),e.Q6J("control",t.fields.guardado.control)}}function Ae(o,n){if(1&o&&(e._UZ(0,"editable-check",30),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.validado.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.validado.placeholder")),e.Q6J("control",t.fields.validado.control)}}function Fe(o,n){if(1&o&&(e._UZ(0,"editable-datetime",31),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.fecha-subida.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.fecha-subida.placeholder")),e.Q6J("hasTimeInput",!0)("control",t.fields.fechaSubida.control)}}function De(o,n){if(1&o&&(e._UZ(0,"editable-datetime",32),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.fecha-validacion.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.fecha-validacion.placeholder")),e.Q6J("hasTimeInput",!0)("control",t.fields.fechaValidacion.control)}}function Le(o,n){if(1&o&&(e.TgZ(0,"editable-datetime",33),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",34),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,6,"proyecto.documento-view.form.fecha.label")),e.s9C("placeholder",e.lcZ(2,8,"proyecto.documento-view.form.fecha.placeholder")),e.Q6J("hasTimeInput",!0)("control",t.fields.fecha.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,10,"proyecto.documento-view.form.fecha.rule.required"))}}function Ve(o,n){if(1&o&&(e.TgZ(0,"editable-text",35),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",36),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.guid.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.guid.placeholder")),e.Q6J("control",t.fields.guid.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.guid.rule.maxlength"))}}function Te(o,n){if(1&o&&(e.TgZ(0,"editable-textarea",37),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",34),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.documento-view.form.contenido.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.documento-view.form.contenido.placeholder")),e.Q6J("control",t.fields.contenido.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,9,"proyecto.documento-view.form.contenido.rule.required"))}}function Ie(o,n){if(1&o&&(e._UZ(0,"editable-textarea",38),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.contenido-traducido.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.contenido-traducido.placeholder")),e.Q6J("control",t.fields.contenidoTraducido.control)}}function Je(o,n){if(1&o&&(e.TgZ(0,"editable-text",39),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",36),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.autor.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.autor.placeholder")),e.Q6J("control",t.fields.autor.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.autor.rule.maxlength"))}}function Qe(o,n){if(1&o&&e._UZ(0,"escritor-view-detail",28),2&o){const t=e.oxw(4);e.Q6J("data",t.fields.escritor.value)}}function Me(o,n){if(1&o&&e.YNc(0,Qe,1,1,"escritor-view-detail",27),2&o){const t=e.oxw(3);e.Q6J("ngIf",t.fields.escritor.value)}}function Ne(o,n){if(1&o&&(e.TgZ(0,"editable-selectone",40),e.ALo(1,"translate"),e.ALo(2,"translate"),e.TgZ(3,"editable-view-related",26),e.ALo(4,"translate"),e.YNc(5,Me,1,1,"ng-template"),e.qZA()()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,6,"proyecto.documento-view.form.escritor.label")),e.s9C("placeholder",e.lcZ(2,8,"proyecto.documento-view.form.escritor.placeholder")),e.Q6J("control",t.fields.escritor.control)("search",t.relatedDocumentoEscritor)("retrieve",t.retrieveDocumentoEscritor),e.xp6(3),e.s9C("title",e.lcZ(4,10,"proyecto.escritor-view.escritor.showRelated"))}}function Ee(o,n){if(1&o&&(e._UZ(0,"editable-textarea",41),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.meta-datos.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.meta-datos.placeholder")),e.Q6J("control",t.fields.metaDatos.control)}}function Ue(o,n){if(1&o&&(e._UZ(0,"editable-upload",42),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.adjunto.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.adjunto.placeholder")),e.Q6J("control",t.fields.adjunto.control)("upload",t.uploadDocumentoAdjunto)}}function Se(o,n){if(1&o&&(e._UZ(0,"editable-upload",43),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.multimedia.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.multimedia.placeholder")),e.Q6J("control",t.fields.multimedia.control)("upload",t.uploadDocumentoMultimedia)}}function Ye(o,n){if(1&o&&(e.TgZ(0,"editable-text",44),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",36),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.tipo.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.tipo.placeholder")),e.Q6J("control",t.fields.tipo.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.tipo.rule.maxlength"))}}function Oe(o,n){if(1&o&&(e.TgZ(0,"editable-text",45),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",36),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.origen.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.origen.placeholder")),e.Q6J("control",t.fields.origen.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.origen.rule.maxlength"))}}function Re(o,n){if(1&o&&(e.TgZ(0,"editable-text",46),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",36),e.ALo(4,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,4,"proyecto.documento-view.form.idioma.label")),e.s9C("placeholder",e.lcZ(2,6,"proyecto.documento-view.form.idioma.placeholder")),e.Q6J("control",t.fields.idioma.control),e.xp6(3),e.s9C("message",e.lcZ(4,8,"proyecto.documento-view.form.idioma.rule.maxlength"))}}function je(o,n){if(1&o&&(e.TgZ(0,"editable-choose",47),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",34),e.ALo(4,"translate"),e._UZ(5,"editable-option",48),e.ALo(6,"translate"),e._UZ(7,"editable-option",48),e.ALo(8,"translate"),e._UZ(9,"editable-option",48),e.ALo(10,"translate"),e._UZ(11,"editable-option",48),e.ALo(12,"translate"),e._UZ(13,"editable-option",48),e.ALo(14,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,15,"proyecto.documento-view.form.valoracion-fuente.label")),e.s9C("placeholder",e.lcZ(2,17,"proyecto.documento-view.form.valoracion-fuente.placeholder")),e.Q6J("control",t.fields.valoracionFuente.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,19,"proyecto.documento-view.form.valoracionFuente.rule.required")),e.xp6(2),e.s9C("label",e.lcZ(6,21,"proyecto.documento-view.form.valoracionFuente.options.f-a")),e.Q6J("value","F_A"),e.xp6(2),e.s9C("label",e.lcZ(8,23,"proyecto.documento-view.form.valoracionFuente.options.f-b")),e.Q6J("value","F_B"),e.xp6(2),e.s9C("label",e.lcZ(10,25,"proyecto.documento-view.form.valoracionFuente.options.f-c")),e.Q6J("value","F_C"),e.xp6(2),e.s9C("label",e.lcZ(12,27,"proyecto.documento-view.form.valoracionFuente.options.f-d")),e.Q6J("value","F_D"),e.xp6(2),e.s9C("label",e.lcZ(14,29,"proyecto.documento-view.form.valoracionFuente.options.f-e")),e.Q6J("value","F_E")}}function Pe(o,n){if(1&o&&(e.TgZ(0,"editable-choose",49),e.ALo(1,"translate"),e.ALo(2,"translate"),e._UZ(3,"editable-error",34),e.ALo(4,"translate"),e._UZ(5,"editable-option",48),e.ALo(6,"translate"),e._UZ(7,"editable-option",48),e.ALo(8,"translate"),e._UZ(9,"editable-option",48),e.ALo(10,"translate"),e._UZ(11,"editable-option",48),e.ALo(12,"translate"),e._UZ(13,"editable-option",48),e.ALo(14,"translate"),e.qZA()),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,15,"proyecto.documento-view.form.valoracion-informacion.label")),e.s9C("placeholder",e.lcZ(2,17,"proyecto.documento-view.form.valoracion-informacion.placeholder")),e.Q6J("control",t.fields.valoracionInformacion.control)("required",!0),e.xp6(3),e.s9C("message",e.lcZ(4,19,"proyecto.documento-view.form.valoracionInformacion.rule.required")),e.xp6(2),e.s9C("label",e.lcZ(6,21,"proyecto.documento-view.form.valoracionInformacion.options.i-1")),e.Q6J("value","I_1"),e.xp6(2),e.s9C("label",e.lcZ(8,23,"proyecto.documento-view.form.valoracionInformacion.options.i-2")),e.Q6J("value","I_2"),e.xp6(2),e.s9C("label",e.lcZ(10,25,"proyecto.documento-view.form.valoracionInformacion.options.i-3")),e.Q6J("value","I_3"),e.xp6(2),e.s9C("label",e.lcZ(12,27,"proyecto.documento-view.form.valoracionInformacion.options.i-4")),e.Q6J("value","I_4"),e.xp6(2),e.s9C("label",e.lcZ(14,29,"proyecto.documento-view.form.valoracionInformacion.options.i-5")),e.Q6J("value","I_5")}}function Xe(o,n){if(1&o&&(e._UZ(0,"editable-check",50),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.ubicacion-explicita.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.ubicacion-explicita.placeholder")),e.Q6J("control",t.fields.ubicacionExplicita.control)}}function He(o,n){if(1&o&&(e._UZ(0,"editable-decimal",51),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.longitud-minima.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.longitud-minima.placeholder")),e.Q6J("control",t.fields.longitudMinima.control)}}function Be(o,n){if(1&o&&(e._UZ(0,"editable-decimal",52),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.longitud-maxima.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.longitud-maxima.placeholder")),e.Q6J("control",t.fields.longitudMaxima.control)}}function Ge(o,n){if(1&o&&(e._UZ(0,"editable-decimal",53),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.latitud-minima.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.latitud-minima.placeholder")),e.Q6J("control",t.fields.latitudMinima.control)}}function qe(o,n){if(1&o&&(e._UZ(0,"editable-decimal",54),e.ALo(1,"translate"),e.ALo(2,"translate")),2&o){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.documento-view.form.latitud-maxima.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.documento-view.form.latitud-maxima.placeholder")),e.Q6J("control",t.fields.latitudMaxima.control)}}function ze(o,n){if(1&o&&(e.YNc(0,ye,6,12,"editable-selectone",1),e.YNc(1,Ze,3,7,"editable-check",2),e.YNc(2,Ae,3,7,"editable-check",3),e.YNc(3,Fe,3,8,"editable-datetime",4),e.YNc(4,De,3,8,"editable-datetime",5),e.YNc(5,Le,5,12,"editable-datetime",6),e.YNc(6,Ve,5,10,"editable-text",7),e.YNc(7,Te,5,11,"editable-textarea",8),e.YNc(8,Ie,3,7,"editable-textarea",9),e.YNc(9,Je,5,10,"editable-text",10),e.YNc(10,Ne,6,12,"editable-selectone",11),e.YNc(11,Ee,3,7,"editable-textarea",12),e.YNc(12,Ue,3,8,"editable-upload",13),e.YNc(13,Se,3,8,"editable-upload",14),e.YNc(14,Ye,5,10,"editable-text",15),e.YNc(15,Oe,5,10,"editable-text",16),e.YNc(16,Re,5,10,"editable-text",17),e.YNc(17,je,15,31,"editable-choose",18),e.YNc(18,Pe,15,31,"editable-choose",19),e.YNc(19,Xe,3,7,"editable-check",20),e.YNc(20,He,3,7,"editable-decimal",21),e.YNc(21,Be,3,7,"editable-decimal",22),e.YNc(22,Ge,3,7,"editable-decimal",23),e.YNc(23,qe,3,7,"editable-decimal",24)),2&o){const t=e.oxw();e.Q6J("ngIf",null==t.fields.dossier?null:t.fields.dossier.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.guardado?null:t.fields.guardado.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.validado?null:t.fields.validado.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.fechaSubida?null:t.fields.fechaSubida.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.fechaValidacion?null:t.fields.fechaValidacion.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.fecha?null:t.fields.fecha.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.guid?null:t.fields.guid.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.contenido?null:t.fields.contenido.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.contenidoTraducido?null:t.fields.contenidoTraducido.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.autor?null:t.fields.autor.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.escritor?null:t.fields.escritor.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.metaDatos?null:t.fields.metaDatos.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.adjunto?null:t.fields.adjunto.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.multimedia?null:t.fields.multimedia.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.tipo?null:t.fields.tipo.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.origen?null:t.fields.origen.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.idioma?null:t.fields.idioma.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.valoracionFuente?null:t.fields.valoracionFuente.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.valoracionInformacion?null:t.fields.valoracionInformacion.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.ubicacionExplicita?null:t.fields.ubicacionExplicita.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.longitudMinima?null:t.fields.longitudMinima.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.longitudMaxima?null:t.fields.longitudMaxima.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.latitudMinima?null:t.fields.latitudMinima.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.latitudMaxima?null:t.fields.latitudMaxima.visible)}}let j=(()=>{class o{constructor(t,i,l,c,d,u){this.documentoRepository=t,this.dossierRepository=i,this.escritorRepository=l,this.cdRef=c,this.appState=d,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={dossier:{visible:!0,editable:!0,disabled:!1},guardado:{visible:!0,editable:!0,disabled:!1},validado:{visible:!0,editable:!0,disabled:!1},fechaSubida:{visible:!0,editable:!0,disabled:!1},fechaValidacion:{visible:!0,editable:!0,disabled:!1},fecha:{visible:!0,editable:!0,disabled:!1},guid:{visible:!0,editable:!0,disabled:!1},contenido:{visible:!0,editable:!0,disabled:!1},contenidoTraducido:{visible:!0,editable:!0,disabled:!1},autor:{visible:!0,editable:!0,disabled:!1},escritor:{visible:!0,editable:!0,disabled:!1},metaDatos:{visible:!0,editable:!0,disabled:!1},adjunto:{visible:!0,editable:!0,disabled:!1},multimedia:{visible:!0,editable:!0,disabled:!1},tipo:{visible:!0,editable:!0,disabled:!1},origen:{visible:!0,editable:!0,disabled:!1},idioma:{visible:!0,editable:!0,disabled:!1},valoracionFuente:{visible:!0,editable:!0,disabled:!1},valoracionInformacion:{visible:!0,editable:!0,disabled:!1},ubicacionExplicita:{visible:!0,editable:!0,disabled:!1},longitudMinima:{visible:!0,editable:!0,disabled:!1},longitudMaxima:{visible:!0,editable:!0,disabled:!1},latitudMinima:{visible:!0,editable:!0,disabled:!1},latitudMaxima:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new N.w0,this.relatedDocumentoDossier=r=>this.dossierRepository.list(this.filter(new M.w4,r,this.documentoDossierFilter)),this.retrieveDocumentoDossier=r=>this.dossierRepository.retrieve(r.nombre),this.relatedDocumentoEscritor=r=>this.escritorRepository.list(this.filter(new Q.XJ,r,this.documentoEscritorFilter)),this.retrieveDocumentoEscritor=r=>this.escritorRepository.retrieve(r.uid),this.uploadDocumentoAdjunto=r=>this.documentoRepository.storeFile(r),this.uploadDocumentoMultimedia=r=>this.documentoRepository.storeFile(r),this.initialsAndDefaults={guardado:!1,validado:!1,fecha:0,contenido:"",valoracionFuente:"F_E",valoracionInformacion:"I_4"},this.form=u.group({dossier:this.fields.dossier.control=new s.NI("",[]),guardado:this.fields.guardado.control=new s.NI("",[]),validado:this.fields.validado.control=new s.NI("",[]),fechaSubida:this.fields.fechaSubida.control=new s.NI("",[]),fechaValidacion:this.fields.fechaValidacion.control=new s.NI("",[]),fecha:this.fields.fecha.control=new s.NI("",[s.kI.required]),guid:this.fields.guid.control=new s.NI("",[s.kI.maxLength(250)]),contenido:this.fields.contenido.control=new s.NI("",[s.kI.required]),contenidoTraducido:this.fields.contenidoTraducido.control=new s.NI("",[]),autor:this.fields.autor.control=new s.NI("",[s.kI.maxLength(250)]),escritor:this.fields.escritor.control=new s.NI("",[]),metaDatos:this.fields.metaDatos.control=new s.NI("",[]),adjunto:this.fields.adjunto.control=new s.NI("",[]),multimedia:this.fields.multimedia.control=new s.NI("",[]),tipo:this.fields.tipo.control=new s.NI("",[s.kI.maxLength(250)]),origen:this.fields.origen.control=new s.NI("",[s.kI.maxLength(250)]),idioma:this.fields.idioma.control=new s.NI("",[s.kI.maxLength(250)]),valoracionFuente:this.fields.valoracionFuente.control=new s.NI("",[s.kI.required]),valoracionInformacion:this.fields.valoracionInformacion.control=new s.NI("",[s.kI.required]),ubicacionExplicita:this.fields.ubicacionExplicita.control=new s.NI("",[]),longitudMinima:this.fields.longitudMinima.control=new s.NI("",[]),longitudMaxima:this.fields.longitudMaxima.control=new s.NI("",[]),latitudMinima:this.fields.latitudMinima.control=new s.NI("",[]),latitudMaxima:this.fields.latitudMaxima.control=new s.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){var t;this.acl?this.updateAcl():(null===(t=this.data)||void 0===t?void 0:t.uid)?this.documentoRepository.specificAcl(this.data.uid).subscribe(i=>{this.acl=i,this.updateAcl()}):this.documentoRepository.genericAcl().subscribe(i=>{this.acl=i,this.updateAcl()}),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(t){t.defaults&&Object.assign(this.initialsAndDefaults,this.defaults),t.fixed&&(this.fixedFields=["guardado","validado","fechaSubida","fechaValidacion"],this.fixed.forEach&&this.fixed.forEach(i=>{this.fixedFields.push(i)})),t.acl&&this.updateAcl()}clearErrors(){this.formView&&this.formView.clearErrors()}saveValue(){if(this.formView){const t=this.documentoRepository.key(this.data),i=this.formView.retrieveValue();return(t?this.documentoRepository.update(t,i):this.documentoRepository.add(i)).pipe((0,ue.I)(),(0,ce.K)(c=>{var d;return t&&this.documentoRepository.retrieve(t).subscribe(u=>{this.formView&&this.formView.markOriginal(u)}),null===(d=this.formView)||void 0===d||d.showError(c),(0,se._)(()=>c)}),(0,de.b)(c=>{var d;Object.keys(c).forEach(u=>{this.data[u]=c[u],this.formView&&(this.formView.data[u]=c[u])}),null===(d=this.formView)||void 0===d||d.refresh()}),(0,re.U)(c=>"Documento guardado"))}throw new Error("Intentando guardar sin formView")}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!!(null===(t=this.form)||void 0===t?void 0:t.dirty),this.invalid=!!(null===(i=this.form)||void 0===i?void 0:i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!!(null===(t=this.form)||void 0===t?void 0:t.dirty),this.invalid=!!(null===(i=this.form)||void 0===i?void 0:i.invalid),this.cdRef.detectChanges()}filter(t,i,l){if(t.search=i,l)for(const c of Object.keys(l))t[c]=l[c];if(this.contextFilter)for(const c of Object.keys(this.contextFilter))t[c]=this.contextFilter[c];return t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.Y),e.Y36(U.h),e.Y36(E.X),e.Y36(e.sBO),e.Y36(S.aB),e.Y36(s.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["documento-view-edit"]],viewQuery:function(t,i){if(1&t&&e.Gf(h.k,7),2&t){let l;e.iGM(l=e.CRH())&&(i.formView=l.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",data:"data",documentoDossierFilter:"documentoDossierFilter",documentoEscritorFilter:"documentoEscritorFilter"},features:[e.TTD],decls:2,vars:10,consts:[["fxLayout","row wrap","fxLayoutGap","10px",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl","data"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-dossier","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-guardado",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-validado",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-fechaSubida",3,"hasTimeInput","control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-fechaValidacion",3,"hasTimeInput","control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-fecha",3,"hasTimeInput","control","required","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-guid",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-contenido",3,"control","required","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-contenidoTraducido",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-autor",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-escritor","display","uid",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-metaDatos",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","contentType","file","id","editable-documento-adjunto",3,"control","upload","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","contentType","file","id","editable-documento-multimedia",3,"control","upload","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-tipo",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-origen",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-idioma",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-valoracionFuente",3,"control","required","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-valoracionInformacion",3,"control","required","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-ubicacionExplicita",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-longitudMinima",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-longitudMaxima",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-latitudMinima",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-latitudMaxima",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-dossier","display","nombre",3,"control","label","placeholder","search","retrieve"],[3,"title"],[3,"data",4,"ngIf"],[3,"data"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-guardado",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-validado",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-fechaSubida",3,"hasTimeInput","control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-fechaValidacion",3,"hasTimeInput","control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-fecha",3,"hasTimeInput","control","required","label","placeholder"],["for","required",3,"message"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-guid",3,"control","label","placeholder"],["for","maxlength",3,"message"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-contenido",3,"control","required","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-contenidoTraducido",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-autor",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-escritor","display","uid",3,"control","label","placeholder","search","retrieve"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-metaDatos",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","contentType","file","id","editable-documento-adjunto",3,"control","upload","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","contentType","file","id","editable-documento-multimedia",3,"control","upload","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-tipo",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-origen",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-idioma",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-valoracionFuente",3,"control","required","label","placeholder"],[3,"value","label"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-valoracionInformacion",3,"control","required","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-ubicacionExplicita",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-longitudMinima",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-longitudMaxima",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-latitudMinima",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-documento-latitudMaxima",3,"control","label","placeholder"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,ze,24,24,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.documento")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)("data",i.data)},directives:[h.k,p.xw,p.SQ,f.O5,Y.s,p.yH,me.MI,fe.n,pe.Z,xe.Q,R.IK,O.x,be.w,ve.$,he.Q,_e.b,R.tx,we.S],pipes:[m.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.inicial[_ngcontent-%COMP%], .modificado[_ngcontent-%COMP%], .remoto[_ngcontent-%COMP%]{display:block;margin:.5em}.diff-field[_ngcontent-%COMP%]{font-weight:700;font-size:20px}"],changeDetection:0}),o})(),$e=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["documento-view-detail"]],inputs:{data:"data"},decls:1,vars:4,consts:[[3,"disabled","data"]],template:function(t,i){1&t&&e._UZ(0,"documento-view-edit",0),2&t&&(e.Akn("detail"),e.Q6J("disabled",!0)("data",i.data))},directives:[j],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0}),o})();const ke=["actions"];function We(o,n){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",11),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"documento-view-edit",12,13),e.TgZ(7,"action-command-button",14),e.NdJ("run",function(){return e.CHM(t),e.MAs(6).clearErrors()}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",15),e.NdJ("run",function(){e.CHM(t);const l=e.MAs(6);return e.oxw(),e.MAs(1).execClearAndJumpToAction(l.saveValue(),"create")}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",16),e.NdJ("run",function(){e.CHM(t);const l=e.MAs(6);e.oxw();const c=e.MAs(1);return c.execAndJumpToAction(l.saveValue(),c.isAllowed("detail")?"detail":"edit",c.empty)}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),l=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.documento-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.documento-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.documento-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.documento-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==l?null:l.empty)("acl",null==l?null:l.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.documento-view.list.action.create.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.documento-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.documento-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}function Ke(o,n){if(1&o&&e._UZ(0,"documento-view-detail",17),2&o){e.oxw();const t=e.MAs(1);e.Q6J("data",null==t?null:t.selection)}}function et(o,n){if(1&o){const t=e.EpF();e._UZ(0,"action-close-confirm",11),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"documento-view-edit",12,13),e.TgZ(7,"action-command-button",14),e.NdJ("run",function(){e.CHM(t),e.oxw();const l=e.MAs(1);return l.jumpToAction(l.isAllowed("detail")?"detail":"",l.isAllowed("detail")?l.selection:null)}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",14),e.NdJ("run",function(){return e.CHM(t),e.MAs(6).clearErrors()}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",16),e.NdJ("run",function(){e.CHM(t);const l=e.MAs(6);e.oxw();const c=e.MAs(1);return c.execAndJumpToAction(l.saveValue(),c.isAllowed("detail")?"detail":"edit",c.selection)}),e.ALo(12,"translate"),e.qZA()}if(2&o){const t=e.MAs(6),i=e.oxw(),l=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.documento-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.documento-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.documento-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.documento-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==l?null:l.selection)("acl",null==l?null:l.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.documento-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=t.formView&&t.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.documento-view.list.action.edit.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.documento-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}let tt=(()=>{class o{constructor(t){this.documentoRepository=t,this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.delete=i=>this.documentoRepository.delete(this.documentoRepository.key(i)),this.deleteSelection=i=>{const l=new F.X;return i&&(l.uids=i.map(c=>c.uid).join(",")),this.documentoRepository.deleteAllForQuery(l)},this.validar=i=>this.documentoRepository.validar(i),this.validarSelection=i=>{const l=new F.X;return i&&(l.uids=i.map(c=>c.uid).join(",")),this.documentoRepository.validarAllForQuery(l)},this.validarDisabled=i=>!i||!0===i.validado,this.guardar=i=>this.documentoRepository.guardar(i),this.guardarSelection=i=>{const l=new F.X;return i&&(l.uids=i.map(c=>c.uid).join(",")),this.documentoRepository.guardarAllForQuery(l)},this.guardarDisabled=i=>!i||!1===i.guardado}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.Y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["documento-view-actions-container"]],viewQuery:function(t,i){if(1&t&&e.Gf(ke,5),2&t){let l;e.iGM(l=e.CRH())&&(i.actions=l.first)}},inputs:{fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:50,vars:135,consts:[[3,"repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","validar","acl","validar","icon","fact_check",3,"label","confirmTitle","confirmSubtitle","confirmOk","confirmCancel","hidden","close","exec"],["name","validarSelection","acl","validar","icon","fact_check",3,"multiple","label","confirmTitle","confirmSubtitle","confirmOk","confirmCancel","hidden","close","exec"],["name","guardar","acl","guardar","icon","turned_in_not",3,"label","confirmTitle","confirmSubtitle","confirmOk","confirmCancel","hidden","close","exec"],["name","guardarSelection","acl","guardar","icon","turned_in_not",3,"multiple","label","confirmTitle","confirmSubtitle","confirmOk","confirmCancel","hidden","close","exec"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"]],template:function(t,i){if(1&t&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(c){return i.onAction.emit(c)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,We,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,Ke,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,et,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e._UZ(26,"action-command",7),e.ALo(27,"translate"),e.ALo(28,"translate"),e.ALo(29,"translate"),e.ALo(30,"translate"),e.ALo(31,"translate"),e._UZ(32,"action-command",8),e.ALo(33,"translate"),e.ALo(34,"translate"),e.ALo(35,"translate"),e.ALo(36,"translate"),e.ALo(37,"translate"),e._UZ(38,"action-command",9),e.ALo(39,"translate"),e.ALo(40,"translate"),e.ALo(41,"translate"),e.ALo(42,"translate"),e.ALo(43,"translate"),e._UZ(44,"action-command",10),e.ALo(45,"translate"),e.ALo(46,"translate"),e.ALo(47,"translate"),e.ALo(48,"translate"),e.ALo(49,"translate"),e.qZA()),2&t){const l=e.MAs(1);e.Q6J("repository",i.documentoRepository)("asDialog",i.asDialog)("parents",i.parents),e.xp6(2),e.s9C("label",e.lcZ(3,63,"proyecto.documento-view.list.action.create.label")),e.s9C("title",null==l||null==l.selection?null:l.selection.uid),e.s9C("subtitle",e.lcZ(4,65,"proyecto.documento-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,67,"proyecto.documento-view.list.action.detail.label")),e.s9C("title",null==l||null==l.selection?null:l.selection.uid),e.s9C("subtitle",e.lcZ(8,69,"proyecto.documento-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,71,"proyecto.documento-view.list.action.edit.label")),e.s9C("title",null==l||null==l.selection?null:l.selection.uid),e.s9C("subtitle",e.lcZ(12,73,"proyecto.documento-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,75,"proyecto.documento-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,77,"proyecto.documento-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,79,"proyecto.documento-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,81,"proyecto.documento-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,83,"proyecto.documento-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",i.delete),e.xp6(6),e.s9C("label",e.lcZ(21,85,"proyecto.documento-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,87,"proyecto.documento-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,89,"proyecto.documento-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,91,"proyecto.documento-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,93,"proyecto.documento-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",i.deleteSelection),e.xp6(6),e.s9C("label",e.lcZ(27,95,"proyecto.documento-view.list.action.validar.label")),e.s9C("confirmTitle",e.lcZ(28,97,"proyecto.documento-view.list.action.validar.title")),e.s9C("confirmSubtitle",e.lcZ(29,99,"proyecto.documento-view.list.action.validar.subtitle")),e.s9C("confirmOk",e.lcZ(30,101,"proyecto.documento-view.list.action.validar.confirm")),e.s9C("confirmCancel",e.lcZ(31,103,"proyecto.documento-view.list.action.validar.cancel")),e.Q6J("hidden",i.validarDisabled)("close",!1)("exec",i.validar),e.xp6(6),e.s9C("label",e.lcZ(33,105,"proyecto.documento-view.list.action.validar-selection.label")),e.s9C("confirmTitle",e.lcZ(34,107,"proyecto.documento-view.list.action.validar-selection.title")),e.s9C("confirmSubtitle",e.lcZ(35,109,"proyecto.documento-view.list.action.validar-selection.subtitle")),e.s9C("confirmOk",e.lcZ(36,111,"proyecto.documento-view.list.action.validar-selection.confirm")),e.s9C("confirmCancel",e.lcZ(37,113,"proyecto.documento-view.list.action.validar-selection.cancel")),e.Q6J("multiple",!0)("hidden",i.validarDisabled)("close",!1)("exec",i.validarSelection),e.xp6(6),e.s9C("label",e.lcZ(39,115,"proyecto.documento-view.list.action.guardar.label")),e.s9C("confirmTitle",e.lcZ(40,117,"proyecto.documento-view.list.action.guardar.title")),e.s9C("confirmSubtitle",e.lcZ(41,119,"proyecto.documento-view.list.action.guardar.subtitle")),e.s9C("confirmOk",e.lcZ(42,121,"proyecto.documento-view.list.action.guardar.confirm")),e.s9C("confirmCancel",e.lcZ(43,123,"proyecto.documento-view.list.action.guardar.cancel")),e.Q6J("hidden",i.guardarDisabled)("close",!1)("exec",i.guardar),e.xp6(6),e.s9C("label",e.lcZ(45,125,"proyecto.documento-view.list.action.guardar-selection.label")),e.s9C("confirmTitle",e.lcZ(46,127,"proyecto.documento-view.list.action.guardar-selection.title")),e.s9C("confirmSubtitle",e.lcZ(47,129,"proyecto.documento-view.list.action.guardar-selection.subtitle")),e.s9C("confirmOk",e.lcZ(48,131,"proyecto.documento-view.list.action.guardar-selection.confirm")),e.s9C("confirmCancel",e.lcZ(49,133,"proyecto.documento-view.list.action.guardar-selection.cancel")),e.Q6J("multiple",!0)("hidden",i.guardarDisabled)("close",!1)("exec",i.guardarSelection)}},directives:[_.Fs,_.Lo,_.V4,j,_.fd,$e],pipes:[m.X$],styles:[""],changeDetection:0}),o})();const ot=["list"],it=["searchForm"],lt=["container"];function nt(o,n){1&o&&e._uU(0),2&o&&e.Oqu(n.$implicit.uid)}function at(o,n){1&o&&e._uU(0),2&o&&e.Oqu(n.$implicit.valoracionFuente)}function ct(o,n){1&o&&e._uU(0),2&o&&e.Oqu(n.$implicit.valoracionInformacion)}function st(o,n){1&o&&e._uU(0),2&o&&e.Oqu(n.$implicit.origen)}function rt(o,n){1&o&&e._uU(0),2&o&&e.Oqu(n.$implicit.guid)}function dt(o,n){1&o&&(e._uU(0),e.ALo(1,"slice")),2&o&&e.Oqu(e.Dn7(1,1,n.$implicit.contenido,0,100))}const ut=function(){return["sort"]},mt=function(){return[]};function ft(o,n){if(1&o){const t=e.EpF();e._UZ(0,"documento-view-search",12,13),e.TgZ(2,"div",14),e._UZ(3,"span",15),e.TgZ(4,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).advancedSearch()}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(1),i=e.oxw();e.Q6J("fixed",i.fixed)("defaults",i.defaults)("hidden",t.showTable?e.DdM(6,ut):e.DdM(7,mt)),e.xp6(5),e.Oqu(e.lcZ(6,4,"APP_SEARCH"))}}function pt(o,n){if(1&o&&(e.TgZ(0,"list-view",3,4),e.YNc(2,nt,1,1,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,at,1,1,"ng-template"),e.qZA(),e.TgZ(7,"list-view-column",6),e.ALo(8,"translate"),e.YNc(9,ct,1,1,"ng-template"),e.qZA(),e.TgZ(10,"list-view-column",7),e.ALo(11,"translate"),e.YNc(12,st,1,1,"ng-template"),e.qZA(),e.TgZ(13,"list-view-column",7),e.ALo(14,"translate"),e.YNc(15,rt,1,1,"ng-template"),e.qZA(),e.TgZ(16,"list-view-column",8),e.ALo(17,"translate"),e.YNc(18,dt,2,5,"ng-template"),e.qZA(),e.TgZ(19,"list-view-no-content"),e._UZ(20,"img",9),e.TgZ(21,"div")(22,"h1"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"list-view-no-results"),e._UZ(29,"img",10),e.TgZ(30,"div")(31,"h1"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"p"),e._uU(35),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"list-view-search-form",11),e.ALo(38,"translate"),e.ALo(39,"translate"),e.YNc(40,ft,7,8,"ng-template"),e.qZA()()),2&o){const t=e.oxw();e.Q6J("filter",t.filter)("repository",t.documentoRepository)("actionContainer",t.actions)("fullScreen",!t.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,15,"proyecto.documento-view.list.column.valoracion-fuente")),e.xp6(3),e.s9C("title",e.lcZ(8,17,"proyecto.documento-view.list.column.valoracion-informacion")),e.xp6(3),e.s9C("title",e.lcZ(11,19,"proyecto.documento-view.list.column.type")),e.xp6(3),e.s9C("title",e.lcZ(14,21,"proyecto.documento-view.list.column.url")),e.xp6(3),e.s9C("title",e.lcZ(17,23,"proyecto.documento-view.list.column.texto")),e.xp6(7),e.Oqu(e.lcZ(24,25,"proyecto.documento-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(27,27,"proyecto.documento-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(33,29,"proyecto.documento-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(36,31,"proyecto.documento-view.list.no-results.message")),e.xp6(2),e.s9C("title",e.lcZ(38,33,"proyecto.documento-view.list.search.title")),e.s9C("subtitle",e.lcZ(39,35,"proyecto.documento-view.list.search.subtitle"))}}const xt=[{path:"",component:(()=>{class o{constructor(t,i,l,c,d){this.layoutService=t,this.translateService=i,this.snackService=l,this.cdRef=c,this.documentoRepository=d,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.documento-view.list.app-title").subscribe(t=>{this.layoutService.title.set(t)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10)}advancedSearch(){var t,i;if(this.searchForm&&this.list){const l={},c=this.searchForm.first.form.value;(null===(t=c.escritor)||void 0===t?void 0:t.uid)&&(l.escritor=c.escritor.uid),c.search&&(l.search=c.search),(null===(i=c.dossier)||void 0===i?void 0:i.nombre)&&(l.dossier=c.dossier.nombre),this.list.first.advancedFilter=l,this.list.first.makeSearch()}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ee.P),e.Y36(m.sK),e.Y36(te.ux),e.Y36(e.sBO),e.Y36(v.Y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["documento-view-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ot,5),e.Gf(it,5),e.Gf(lt,5)),2&t){let l;e.iGM(l=e.CRH())&&(i.list=l),e.iGM(l=e.CRH())&&(i.searchForm=l),e.iGM(l=e.CRH())&&(i.container=l)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents"},outputs:{onAction:"onAction"},decls:3,vars:4,consts:[["id","documento-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"parents","fixed","defaults","onAction"],["container",""],["id","documento-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],["width","25px",3,"title"],["width","120px",3,"title"],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"],[3,"title","subtitle"],[3,"fixed","defaults","hidden"],["searchForm",""],[2,"display","flex"],[2,"flex","1 1 auto"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,pt,41,37,"list-view",0),e.TgZ(1,"documento-view-actions-container",1,2),e.NdJ("onAction",function(c){return i.onAction.emit(c)}),e.qZA()),2&t&&(e.Q6J("ngIf",i.actions&&!i.actions.action),e.xp6(1),e.Q6J("parents",i.parents)("fixed",i.fixed)("defaults",i.defaults))},directives:[f.O5,x.To,x.if,x.Rt,x.Yi,x.JR,ae,b.lW,tt],pipes:[m.X$,f.OU],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),o})()}];let bt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[J.Bz.forChild(xt)],J.Bz]}),o})(),vt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[K,bt]]}),o})()}}]);