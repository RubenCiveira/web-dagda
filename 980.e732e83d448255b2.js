(self.webpackChunkagenda_angular=self.webpackChunkagenda_angular||[]).push([[980],{135:($,W,i)=>{"use strict";i.d(W,{R:()=>P});var h=i(1764),A=i(2598),e=i.n(A),n=i(354),O=i.n(n),U=i(5e3),f=i(970);h.extend(e()),h.extend(O());let P=(()=>{class t{constructor(T){this.appState=T,this.weekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),this.weekdaysShort="sun._mon._tue._wed._thu._fri._sat.".split("_"),this.weekdaysMin="su_mo_tu_we_th_fr_st".split("_"),this.months="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),this.monthsShort="jan_feb_mar_apr_may_jun_jul_aug_sep_oct_nov_dec".split("_"),this.currentLang="",this.loadTimezones(),T.lang.get().subscribe(s=>{this.currentLang=s.code,this.loadLocale(s.code)}),this.monthList=[];for(let s=0;s<12;s++)this.monthList.push(""+(s+1))}format(T,s){try{return h(T).locale(this.currentLang).format(s)}catch(M){return h(T).format(s)}}parse(T,s){return h(T,{format:this.locale.formats[s]?this.locale.formats[s]:s,locale:this.currentLang}).toDate()}localToTimeZone(T,s){if(this.getZonedTime){let M="";M=this.findTimeZone(s||"Europe/Madrid");const y=this.getZonedTime(T,M),I=new Date;return I.setFullYear(y.year),I.setMonth(y.month-1),I.setDate(y.day),I.setHours(y.hours),I.setMinutes(y.minutes),I.setSeconds(y.seconds),I.setMilliseconds(y.milliseconds),I}return T}isValidTimezone(T){return!!this.findTimeZone(T)}timezonedToLocal(T,s){return this.convertTimeToDate?this.convertTimeToDate(this.setTimeZone(T,this.findTimeZone(s),{useUTC:!1})):T}getFirstDayOfWeek(){return this.locale&&this.locale.weekStart?this.locale.weekStart:0}getDayOfWeekNames(T){let s;return s="narrow"===T?this.locale&&this.locale.weekdaysMin?this.locale.weekdaysMin:this.weekdaysMin:"short"===T?this.locale&&this.locale.weekdays?this.locale.weekdays:this.weekdays:this.locale&&this.locale.weekdaysShort?this.locale.weekdaysShort:this.weekdaysShort,s}getMonthNames(T){let s;return"narrow"===T?this.monthList:(s="short"===T?this.locale&&this.locale.monthsShort?this.locale.monthsShort:this.monthsShort:this.locale&&this.locale.months?this.locale.months:this.months,s)}loadTimezones(){const T=window,s=()=>{if(T.timezoneSupport&&T.timezoneData){const{populateTimeZones:I,listTimeZones:F,getZonedTime:K,setTimeZone:Y,findTimeZone:R,convertTimeToDate:w}=T.timezoneSupport;this.getZonedTime=K,this.setTimeZone=Y,this.findTimeZone=R,this.convertTimeToDate=w,I(T.timezoneData);const r=[];F().forEach(l=>{r.push({code:l,label:l})}),this.appState.availablesTimezones.set(r)}},M=document.createElement("script");M.src="assets/tz/lookup-convert.umd.js",M.type="text/javascript",M.onload=s,document.getElementsByTagName("head")[0].appendChild(M);const y=document.createElement("script");y.src="assets/tz/data.umd.js",y.type="text/javascript",y.onload=s,document.getElementsByTagName("head")[0].appendChild(y)}loadLocale(T){const s=T.split("-")[0].toLowerCase(),M=document.createElement("script");M.src="assets/i18n/"+s+"-date.js",M.type="text/javascript",M.onload=()=>{const y=window;this.locale=y.locale,h.locale(y.locale)},document.getElementsByTagName("head")[0].appendChild(M)}}return t.\u0275fac=function(T){return new(T||t)(U.LFG(f.aB))},t.\u0275prov=U.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},745:($,W,i)=>{"use strict";i.d(W,{$:()=>A});var h=i(5e3),p=i(4558);let A=(()=>{class e{}return e.\u0275fac=function(O){return new(O||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["escritor-view-detail"]],inputs:{data:"data"},decls:1,vars:4,consts:[[3,"disabled","data"]],template:function(O,U){1&O&&h._UZ(0,"escritor-view-edit",0),2&O&&(h.Akn("detail"),h.Q6J("disabled",!0)("data",U.data))},directives:[p.E],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0}),e})()},3519:($,W,i)=>{"use strict";i.d(W,{g:()=>T});var h=i(9808),p=i(1062),A=i(2155),e=i(5113),n=i(7423),O=i(6510),U=i(1614),f=i(2375),P=i(2782),t=i(2362),Z=i(5e3);let T=(()=>{class s{}return s.\u0275fac=function(y){return new(y||s)},s.\u0275mod=Z.oAB({type:s}),s.\u0275inj=Z.cJS({providers:[],imports:[[O.V,h.ez,U.r,t.I,A.o9,P.n,e.xu,f.W,n.ot,p.aw]]}),s})()},4558:($,W,i)=>{"use strict";i.d(W,{E:()=>N});var h=i(6537),p=i(3075),A=i(9873),e=i(727),n=i(262),O=i(2843),U=i(4004),f=i(8505),P=i(5097),t=i(5e3),Z=i(48),T=i(7130),s=i(970),M=i(7093),y=i(9808),I=i(502),F=i(791),K=i(9952),Y=i(9087),R=i(967),w=i(6266),g=i(5031),r=i(1600),l=i(1062);function E(o,m){if(1&o&&(t.TgZ(0,"editable-text",13),t.ALo(1,"translate"),t.ALo(2,"translate"),t._UZ(3,"editable-error",14),t.ALo(4,"translate"),t.qZA()),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,4,"proyecto.escritor-view.form.guid.label")),t.s9C("placeholder",t.lcZ(2,6,"proyecto.escritor-view.form.guid.placeholder")),t.Q6J("control",a.fields.guid.control),t.xp6(3),t.s9C("message",t.lcZ(4,8,"proyecto.escritor-view.form.guid.rule.maxlength"))}}function c(o,m){if(1&o&&t._UZ(0,"dossier-view-detail",18),2&o){const a=t.oxw(4);t.Q6J("data",a.fields.dossier.value)}}function d(o,m){if(1&o&&t.YNc(0,c,1,1,"dossier-view-detail",17),2&o){const a=t.oxw(3);t.Q6J("ngIf",a.fields.dossier.value)}}function _(o,m){if(1&o&&(t.TgZ(0,"editable-selectone",15),t.ALo(1,"translate"),t.ALo(2,"translate"),t.TgZ(3,"editable-view-related",16),t.ALo(4,"translate"),t.YNc(5,d,1,1,"ng-template"),t.qZA()()),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,6,"proyecto.escritor-view.form.dossier.label")),t.s9C("placeholder",t.lcZ(2,8,"proyecto.escritor-view.form.dossier.placeholder")),t.Q6J("control",a.fields.dossier.control)("search",a.relatedEscritorDossier)("retrieve",a.retrieveEscritorDossier),t.xp6(3),t.s9C("title",t.lcZ(4,10,"proyecto.dossier-view.dossier.showRelated"))}}function D(o,m){if(1&o&&(t.TgZ(0,"editable-text",19),t.ALo(1,"translate"),t.ALo(2,"translate"),t._UZ(3,"editable-error",14),t.ALo(4,"translate"),t.qZA()),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,4,"proyecto.escritor-view.form.nombre.label")),t.s9C("placeholder",t.lcZ(2,6,"proyecto.escritor-view.form.nombre.placeholder")),t.Q6J("control",a.fields.nombre.control),t.xp6(3),t.s9C("message",t.lcZ(4,8,"proyecto.escritor-view.form.nombre.rule.maxlength"))}}function u(o,m){if(1&o&&(t.TgZ(0,"editable-text",20),t.ALo(1,"translate"),t.ALo(2,"translate"),t._UZ(3,"editable-error",14),t.ALo(4,"translate"),t.qZA()),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,4,"proyecto.escritor-view.form.email.label")),t.s9C("placeholder",t.lcZ(2,6,"proyecto.escritor-view.form.email.placeholder")),t.Q6J("control",a.fields.email.control),t.xp6(3),t.s9C("message",t.lcZ(4,8,"proyecto.escritor-view.form.email.rule.maxlength"))}}function v(o,m){if(1&o&&(t.TgZ(0,"editable-text",21),t.ALo(1,"translate"),t.ALo(2,"translate"),t._UZ(3,"editable-error",14),t.ALo(4,"translate"),t.qZA()),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,4,"proyecto.escritor-view.form.alias.label")),t.s9C("placeholder",t.lcZ(2,6,"proyecto.escritor-view.form.alias.placeholder")),t.Q6J("control",a.fields.alias.control),t.xp6(3),t.s9C("message",t.lcZ(4,8,"proyecto.escritor-view.form.alias.rule.maxlength"))}}function b(o,m){if(1&o&&(t.TgZ(0,"editable-text",22),t.ALo(1,"translate"),t.ALo(2,"translate"),t._UZ(3,"editable-error",14),t.ALo(4,"translate"),t.qZA()),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,4,"proyecto.escritor-view.form.idioma.label")),t.s9C("placeholder",t.lcZ(2,6,"proyecto.escritor-view.form.idioma.placeholder")),t.Q6J("control",a.fields.idioma.control),t.xp6(3),t.s9C("message",t.lcZ(4,8,"proyecto.escritor-view.form.idioma.rule.maxlength"))}}function L(o,m){if(1&o&&(t.TgZ(0,"editable-text",23),t.ALo(1,"translate"),t.ALo(2,"translate"),t._UZ(3,"editable-error",14),t.ALo(4,"translate"),t.qZA()),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,4,"proyecto.escritor-view.form.localizacion.label")),t.s9C("placeholder",t.lcZ(2,6,"proyecto.escritor-view.form.localizacion.placeholder")),t.Q6J("control",a.fields.localizacion.control),t.xp6(3),t.s9C("message",t.lcZ(4,8,"proyecto.escritor-view.form.localizacion.rule.maxlength"))}}function S(o,m){if(1&o&&(t.TgZ(0,"editable-text",24),t.ALo(1,"translate"),t.ALo(2,"translate"),t._UZ(3,"editable-error",14),t.ALo(4,"translate"),t.qZA()),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,4,"proyecto.escritor-view.form.descripcion.label")),t.s9C("placeholder",t.lcZ(2,6,"proyecto.escritor-view.form.descripcion.placeholder")),t.Q6J("control",a.fields.descripcion.control),t.xp6(3),t.s9C("message",t.lcZ(4,8,"proyecto.escritor-view.form.descripcion.rule.maxlength"))}}function B(o,m){if(1&o&&(t._UZ(0,"editable-datetime",25),t.ALo(1,"translate"),t.ALo(2,"translate")),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,4,"proyecto.escritor-view.form.fecha-registro-media.label")),t.s9C("placeholder",t.lcZ(2,6,"proyecto.escritor-view.form.fecha-registro-media.placeholder")),t.Q6J("hasTimeInput",!0)("control",a.fields.fechaRegistroMedia.control)}}function J(o,m){if(1&o&&(t._UZ(0,"editable-upload",26),t.ALo(1,"translate"),t.ALo(2,"translate")),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,4,"proyecto.escritor-view.form.imagen.label")),t.s9C("placeholder",t.lcZ(2,6,"proyecto.escritor-view.form.imagen.placeholder")),t.Q6J("control",a.fields.imagen.control)("upload",a.uploadEscritorImagen)}}function z(o,m){if(1&o&&(t._UZ(0,"editable-integer",27),t.ALo(1,"translate"),t.ALo(2,"translate")),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,3,"proyecto.escritor-view.form.numero-publicaciones.label")),t.s9C("placeholder",t.lcZ(2,5,"proyecto.escritor-view.form.numero-publicaciones.placeholder")),t.Q6J("control",a.fields.numeroPublicaciones.control)}}function H(o,m){if(1&o&&(t._UZ(0,"editable-integer",28),t.ALo(1,"translate"),t.ALo(2,"translate")),2&o){const a=t.oxw(2);t.s9C("label",t.lcZ(1,3,"proyecto.escritor-view.form.numero-lectores.label")),t.s9C("placeholder",t.lcZ(2,5,"proyecto.escritor-view.form.numero-lectores.placeholder")),t.Q6J("control",a.fields.numeroLectores.control)}}function x(o,m){if(1&o&&(t.YNc(0,E,5,10,"editable-text",1),t.YNc(1,_,6,12,"editable-selectone",2),t.YNc(2,D,5,10,"editable-text",3),t.YNc(3,u,5,10,"editable-text",4),t.YNc(4,v,5,10,"editable-text",5),t.YNc(5,b,5,10,"editable-text",6),t.YNc(6,L,5,10,"editable-text",7),t.YNc(7,S,5,10,"editable-text",8),t.YNc(8,B,3,8,"editable-datetime",9),t.YNc(9,J,3,8,"editable-upload",10),t.YNc(10,z,3,7,"editable-integer",11),t.YNc(11,H,3,7,"editable-integer",12)),2&o){const a=t.oxw();t.Q6J("ngIf",null==a.fields.guid?null:a.fields.guid.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.dossier?null:a.fields.dossier.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.nombre?null:a.fields.nombre.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.email?null:a.fields.email.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.alias?null:a.fields.alias.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.idioma?null:a.fields.idioma.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.localizacion?null:a.fields.localizacion.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.descripcion?null:a.fields.descripcion.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.fechaRegistroMedia?null:a.fields.fechaRegistroMedia.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.imagen?null:a.fields.imagen.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.numeroPublicaciones?null:a.fields.numeroPublicaciones.visible),t.xp6(1),t.Q6J("ngIf",null==a.fields.numeroLectores?null:a.fields.numeroLectores.visible)}}let N=(()=>{class o{constructor(a,C,Q,V,X){this.escritorRepository=a,this.dossierRepository=C,this.cdRef=Q,this.appState=V,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={guid:{visible:!0,editable:!0,disabled:!1},dossier:{visible:!0,editable:!0,disabled:!1},nombre:{visible:!0,editable:!0,disabled:!1},email:{visible:!0,editable:!0,disabled:!1},alias:{visible:!0,editable:!0,disabled:!1},idioma:{visible:!0,editable:!0,disabled:!1},localizacion:{visible:!0,editable:!0,disabled:!1},descripcion:{visible:!0,editable:!0,disabled:!1},fechaRegistroMedia:{visible:!0,editable:!0,disabled:!1},imagen:{visible:!0,editable:!0,disabled:!1},numeroPublicaciones:{visible:!0,editable:!0,disabled:!1},numeroLectores:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new e.w0,this.relatedEscritorDossier=j=>this.dossierRepository.list(this.filter(new A.w4,j,this.escritorDossierFilter)),this.retrieveEscritorDossier=j=>this.dossierRepository.retrieve(j.uid),this.uploadEscritorImagen=j=>this.escritorRepository.storeFile(j),this.initialsAndDefaults={},this.form=X.group({guid:this.fields.guid.control=new p.NI("",[p.kI.maxLength(250)]),dossier:this.fields.dossier.control=new p.NI("",[]),nombre:this.fields.nombre.control=new p.NI("",[p.kI.maxLength(250)]),email:this.fields.email.control=new p.NI("",[p.kI.maxLength(250)]),alias:this.fields.alias.control=new p.NI("",[p.kI.maxLength(250)]),idioma:this.fields.idioma.control=new p.NI("",[p.kI.maxLength(250)]),localizacion:this.fields.localizacion.control=new p.NI("",[p.kI.maxLength(250)]),descripcion:this.fields.descripcion.control=new p.NI("",[p.kI.maxLength(250)]),fechaRegistroMedia:this.fields.fechaRegistroMedia.control=new p.NI("",[]),imagen:this.fields.imagen.control=new p.NI("",[]),numeroPublicaciones:this.fields.numeroPublicaciones.control=new p.NI("",[]),numeroLectores:this.fields.numeroLectores.control=new p.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:a=>{this.updateValues()}}))}ngAfterViewInit(){var a;this.acl?this.updateAcl():(null===(a=this.data)||void 0===a?void 0:a.uid)?this.escritorRepository.specificAcl(this.data.uid).subscribe(C=>{this.acl=C,this.updateAcl()}):this.escritorRepository.genericAcl().subscribe(C=>{this.acl=C,this.updateAcl()}),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(a){a.defaults&&Object.assign(this.initialsAndDefaults,this.defaults),a.fixed&&(this.fixedFields=[],this.fixed.forEach&&this.fixed.forEach(C=>{this.fixedFields.push(C)})),a.acl&&this.updateAcl()}clearErrors(){this.formView&&this.formView.clearErrors()}saveValue(){if(this.formView){const a=this.escritorRepository.key(this.data),C=this.formView.retrieveValue();return(a?this.escritorRepository.update(a,C):this.escritorRepository.add(C)).pipe((0,P.I)(),(0,n.K)(V=>{var X;return a&&this.escritorRepository.retrieve(a).subscribe(j=>{this.formView&&this.formView.markOriginal(j)}),null===(X=this.formView)||void 0===X||X.showError(V),(0,O._)(()=>V)}),(0,f.b)(V=>{var X;Object.keys(V).forEach(j=>{this.data[j]=V[j],this.formView&&(this.formView.data[j]=V[j])}),null===(X=this.formView)||void 0===X||X.refresh()}),(0,U.U)(V=>"Escritor guardado"))}throw new Error("Intentando guardar sin formView")}updateValues(){var a,C;this.formView&&this.formView.bindValues(this.fields),this.dirty=!!(null===(a=this.form)||void 0===a?void 0:a.dirty),this.invalid=!!(null===(C=this.form)||void 0===C?void 0:C.invalid),this.cdRef.detectChanges()}updateAcl(){var a,C;this.formView&&this.formView.bindFields(this.fields),this.dirty=!!(null===(a=this.form)||void 0===a?void 0:a.dirty),this.invalid=!!(null===(C=this.form)||void 0===C?void 0:C.invalid),this.cdRef.detectChanges()}filter(a,C,Q){if(a.search=C,Q)for(const V of Object.keys(Q))a[V]=Q[V];if(this.contextFilter)for(const V of Object.keys(this.contextFilter))a[V]=this.contextFilter[V];return a}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(Z.X),t.Y36(T.h),t.Y36(t.sBO),t.Y36(s.aB),t.Y36(p.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["escritor-view-edit"]],viewQuery:function(a,C){if(1&a&&t.Gf(h.k,7),2&a){let Q;t.iGM(Q=t.CRH())&&(C.formView=Q.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",data:"data",escritorDossierFilter:"escritorDossierFilter"},features:[t.TTD],decls:2,vars:10,consts:[["fxLayout","row wrap","fxLayoutGap","10px",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl","data"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-guid",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-dossier","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-nombre",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-email",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-alias",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-idioma",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-localizacion",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-descripcion",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-fechaRegistroMedia",3,"hasTimeInput","control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","contentType","file","id","editable-escritor-imagen",3,"control","upload","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-numeroPublicaciones",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-numeroLectores",3,"control","label","placeholder",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-guid",3,"control","label","placeholder"],["for","maxlength",3,"message"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-dossier","display","nombre",3,"control","label","placeholder","search","retrieve"],[3,"title"],[3,"data",4,"ngIf"],[3,"data"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-nombre",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-email",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-alias",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-idioma",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-localizacion",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-descripcion",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-fechaRegistroMedia",3,"hasTimeInput","control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","contentType","file","id","editable-escritor-imagen",3,"control","upload","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-numeroPublicaciones",3,"control","label","placeholder"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-escritor-numeroLectores",3,"control","label","placeholder"]],template:function(a,C){1&a&&(t.TgZ(0,"form-view",0),t.YNc(1,x,12,12,"ng-template"),t.qZA()),2&a&&t.Q6J("messagePreffix","proyecto.escritor")("form",C.form)("disabled",C.disabled)("fixed",C.fixedFields)("hidden",C.hidden)("editables",C.editables)("visibles",C.visibles)("defaults",C.initialsAndDefaults)("acl",C.acl)("data",C.data)},directives:[h.k,M.xw,M.SQ,y.O5,I.x,M.yH,F.IK,K.s,Y.MI,R.n,w.Q,g.Q,r.Y],pipes:[l.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.inicial[_ngcontent-%COMP%], .modificado[_ngcontent-%COMP%], .remoto[_ngcontent-%COMP%]{display:block;margin:.5em}.diff-field[_ngcontent-%COMP%]{font-weight:700;font-size:20px}"],changeDetection:0}),o})()},2362:($,W,i)=>{"use strict";i.d(W,{I:()=>Y});var h=i(9808),p=i(1062),A=i(2155),e=i(5113),n=i(7423),O=i(6510),U=i(1614),f=i(2375),P=i(2782),t=i(7893),Z=i(9596),T=i(960),s=i(4392),M=i(8195),y=i(2069),I=i(7531),F=i(3075),K=i(5e3);let Y=(()=>{class R{}return R.\u0275fac=function(g){return new(g||R)},R.\u0275mod=K.oAB({type:R}),R.\u0275inj=K.cJS({providers:[],imports:[[O.V,h.ez,Z.B,s.f,y.W,U.r,T.M,t.o,M.M,A.o9,P.n,F.u5,e.xu,f.W,n.ot,I.c,F.UX,p.aw]]}),R})()},1947:($,W,i)=>{"use strict";i.d(W,{XJ:()=>A});class A{static clone(n){const O=new A;return O.pageSize=n.pageSize,O.pageNumber=n.pageNumber,O.lastRow=n.lastRow,O.search=n.search,O.dossier="string"==typeof n.dossier||n.dossier instanceof String?n.dossier:n.dossier?n.dossier.uid:void 0,O}}},6266:($,W,i)=>{"use strict";i.d(W,{Q:()=>w});var h=i(791),p=i(3075),A=i(8675),e=i(4004),n=i(5e3),O=i(6050),U=i(135),f=i(9808),P=i(7322),t=i(3322),Z=i(7531),T=i(6856),s=i(1079),M=i(508);function y(g,r){if(1&g&&(n.TgZ(0,"mat-error"),n._UZ(1,"editable-error-block",10),n.qZA()),2&g){const l=n.oxw(2);n.xp6(1),n.Q6J("messages",l.errorMessages)("control",l.control)}}const I=function(g){return{"margin-right":g}};function F(g,r){if(1&g){const l=n.EpF();n.TgZ(0,"mat-form-field",4)(1,"mat-label"),n._uU(2),n.qZA(),n.TgZ(3,"input",5),n.NdJ("ngModelChange",function(c){return n.CHM(l),n.oxw().value.day=c})("change",function(){return n.CHM(l),n.oxw().update(!0)})("dateChange",function(){return n.CHM(l),n.oxw().update(!0)}),n.qZA(),n._UZ(4,"mat-datepicker-toggle",6)(5,"mat-datepicker",7,8),n.YNc(7,y,2,2,"mat-error",9),n.qZA()}if(2&g){const l=n.MAs(6),E=n.oxw();n.Q6J("ngStyle",n.VKq(12,I,E.hasTimeInput?"20px":"0px"))("floatLabel",E.floatLabel)("appearance",E.appearance),n.xp6(2),n.Oqu(E.label),n.xp6(1),n.s9C("placeholder",E.placeholder),n.Q6J("ngModel",E.value.day)("matDatepicker",l)("required",E.required)("disabled",E.control.disabled),n.xp6(1),n.Q6J("for",l),n.xp6(1),n.Q6J("touchUi",E.touchUi),n.xp6(2),n.Q6J("ngIf",E.control.invalid)}}function K(g,r){if(1&g){const l=n.EpF();n.TgZ(0,"mat-form-field",11)(1,"input",12),n.NdJ("ngModelChange",function(c){return n.CHM(l),n.oxw().value.hour=c})("change",function(){return n.CHM(l),n.oxw().update(!0)}),n.qZA()()}if(2&g){const l=n.oxw();n.Q6J("floatLabel",l.floatLabel)("appearance",l.appearance),n.xp6(1),n.Q6J("ngModel",l.value.hour)("placeholder",l.hourPlaceholder)("required",l.required)("disabled",l.control.disabled)}}function Y(g,r){if(1&g&&(n.TgZ(0,"mat-option",18),n._uU(1),n.qZA()),2&g){const l=r.$implicit;n.Q6J("value",l.name),n.xp6(1),n.hij(" ",l.label," ")}}function R(g,r){if(1&g){const l=n.EpF();n.TgZ(0,"mat-form-field",13),n._UZ(1,"input",14),n.TgZ(2,"mat-autocomplete",15,16),n.NdJ("optionSelected",function(){return n.CHM(l),n.oxw().update(!0)}),n.YNc(4,Y,2,2,"mat-option",17),n.ALo(5,"async"),n.qZA()()}if(2&g){const l=n.MAs(3),E=n.oxw();n.xp6(1),n.Q6J("formControl",E.myControl)("matAutocomplete",l),n.xp6(3),n.Q6J("ngForOf",n.lcZ(5,3,E.filteredZones))}}let w=(()=>{class g extends h.G7{constructor(l,E){super(l),this.dateService=E,this.touchUi=!1,this.hasTimeInput=!0,this.showTimeZone=!1,this.bindToTimeZone=!1,this.timeZoneEditable=!0,this.timeZone="",this.hourPlaceholder="",this.value={day:null,hour:""},this.zones=[],this.subscriptions.add(this.service.state.availablesTimezones.get().subscribe(c=>{for(const d of c)this.zones.push(d)})),this.subscriptions.add(this.service.state.timeZone.get().subscribe(c=>{this.timeZone=c})),this.myControl=new p.NI,this.myControl.setValue(this.timeZone),this.filteredZones=this.myControl.valueChanges.pipe((0,A.O)(""),(0,e.U)(c=>c&&"string"!=typeof c?c.name:c),(0,e.U)(c=>c?this._filter(c):this.zones.slice()))}_filter(l){const E=l.toLowerCase();return this.zones.filter(c=>c.code.toLowerCase().includes(E))}ngOnChanges(l){l.timeZone&&this.value.day&&(this.bindToTimeZone&&(this.value.day=this.dateService.localToTimeZone(this.value.day,this.timeZone),this.value.hour=this.dateService.format(this.value.day,"HH:mm")),this.update(!1),this.myControl.setValue(this.timeZone)),l.timeZoneEditable&&this.checkUpdate()}ngAfterContentInit(){this.control&&(this.writeValue(this.control.value),this.subscriptions.add(this.control.valueChanges.subscribe(l=>{this.writeValue(l)})))}update(l){let E=this.value.hour;this.hasTimeInput&&!E&&(E="00:00");const c=this.value.day;if(this.hasTimeInput&&c&&E){const d=this.dateService.parse(this.dateService.format(c,"YYYY-MM-DD")+" "+E,"YYYY-MM-DD HH:mm");this.selected=d,this.selected=this.timeZone?this.dateService.localToTimeZone(d,this.timeZone):d}else this.selected=!this.hasTimeInput&&c?this.dateService.format(c,"YYYY-MM-DD"):null;if(this.control){const _=this.selected===this.control.value;(!this.selected&&this.control.value||!_)&&(this.control.markAsDirty(),this.control.setValue(this.selected,{emitEvent:l}))}}checkUpdate(){this.timeZoneEditable&&this.control&&this.control.enabled?this.myControl.enable():this.myControl.disable()}writeValue(l){l?("string"==typeof l&&(l=new Date(l)),this.value.day=this.dateService.localToTimeZone(l,this.timeZone),this.value.hour=this.dateService.format(this.value.day,"HH:mm")):(this.value.day=null,this.value.hour=""),this.checkUpdate()}}return g.\u0275fac=function(l){return new(l||g)(n.Y36(O.U),n.Y36(U.R))},g.\u0275cmp=n.Xpm({type:g,selectors:[["editable-datetime"]],inputs:{touchUi:"touchUi",hasTimeInput:"hasTimeInput",showTimeZone:"showTimeZone",bindToTimeZone:"bindToTimeZone",timeZoneEditable:"timeZoneEditable",timeZone:"timeZone",hourPlaceholder:"hourPlaceholder"},features:[n.qOj,n.TTD],decls:4,vars:3,consts:[["class","input-date","style","min-width: 120px; flex: 1; margin-right: 20px",3,"ngStyle","floatLabel","appearance",4,"ngIf"],["class","input-time","style","min-width: 70px",3,"floatLabel","appearance",4,"ngIf"],[1,"form-zone"],["class","input-zone",4,"ngIf"],[1,"input-date",2,"min-width","120px","flex","1","margin-right","20px",3,"ngStyle","floatLabel","appearance"],["matInput","",2,"width","auto",3,"ngModel","matDatepicker","placeholder","required","disabled","ngModelChange","change","dateChange"],["matSuffix","",3,"for"],[3,"touchUi"],["picker",""],[4,"ngIf"],[3,"messages","control"],[1,"input-time",2,"min-width","70px",3,"floatLabel","appearance"],["type","time","matInput","",3,"ngModel","placeholder","required","disabled","ngModelChange","change"],[1,"input-zone"],["type","text","matInput","","placeholder","Zona horaria",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(l,E){1&l&&(n.YNc(0,F,8,14,"mat-form-field",0),n.YNc(1,K,2,6,"mat-form-field",1),n.TgZ(2,"form",2),n.YNc(3,R,6,5,"mat-form-field",3),n.qZA()),2&l&&(n.Q6J("ngIf",E.control),n.xp6(1),n.Q6J("ngIf",E.control&&E.hasTimeInput),n.xp6(2),n.Q6J("ngIf",E.hasTimeInput&&E.showTimeZone))},directives:[f.O5,P.KE,f.PC,t.Zl,P.hX,Z.Nt,p.Fj,T.hl,p.JJ,p.On,p.Q7,T.nW,P.R9,T.Mq,P.TO,h.qJ,p._Y,p.JL,p.F,s.ZL,p.oH,s.XC,f.sg,M.ey],pipes:[f.Ov],styles:["[_nghost-%COMP%]{display:flex;overflow:hidden;box-sizing:border-box;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.changeQuickDay[_ngcontent-%COMP%]{border:0;cursor:pointer;font-size:large;margin-bottom:8px}"],changeDetection:0}),g})()},4392:($,W,i)=>{"use strict";i.d(W,{f:()=>R});var h=i(9808),p=i(2155),A=i(3075),e=i(508),n=i(7322),O=i(7531),U=i(135),f=i(1614),P=i(5e3);const t={parse:{dateInput:"L"},display:{dateInput:"L",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let Z;try{Z="undefined"!=typeof Intl}catch(w){Z=!1}const s=I(31,w=>String(w+1)),y=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function I(w,g){const r=Array(w);for(let l=0;l<w;l++)r[l]=g(l);return r}let F=(()=>{class w extends e._A{constructor(r){super(),this.i18nDatesService=r,this.dayList=[];for(let l=0;l<31;l++)this.dayList.push(""+(l+1))}getYear(r){return r.getFullYear()}getMonth(r){return r.getMonth()}getDate(r){return r.getDate()}getDayOfWeek(r){return r.getDay()}getDateNames(){if(Z){const r=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return I(31,l=>this._stripDirectionalityCharacters(this._format(r,new Date(2017,0,l+1))))}return s}getYearName(r){if(Z){const l=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(l,r))}return String(this.getYear(r))}getNumDaysInMonth(r){return this.getDate(this._createDateWithOverflow(this.getYear(r),this.getMonth(r)+1,0))}clone(r){return new Date(r.getTime())}createDate(r,l,E){if(l<0||l>11)throw Error(`Invalid month index "${l}". Month index has to be between 0 and 11.`);if(E<1)throw Error(`Invalid date "${E}". Date has to be greater than 0.`);let c=this._createDateWithOverflow(r,l,E);if(c.getMonth()!=l)throw Error(`Invalid date "${E}" for month with index "${l}".`);return c}today(){return new Date}addCalendarYears(r,l){return this.addCalendarMonths(r,12*l)}addCalendarMonths(r,l){let E=this._createDateWithOverflow(this.getYear(r),this.getMonth(r)+l,this.getDate(r));return this.getMonth(E)!=((this.getMonth(r)+l)%12+12)%12&&(E=this._createDateWithOverflow(this.getYear(E),this.getMonth(E),0)),E}addCalendarDays(r,l){return this._createDateWithOverflow(this.getYear(r),this.getMonth(r),this.getDate(r)+l)}toIso8601(r){return[r.getUTCFullYear(),this._2digit(r.getUTCMonth()+1),this._2digit(r.getUTCDate())].join("-")}deserialize(r){if("string"==typeof r){if(!r)return null;if(y.test(r)){let l=new Date(r);if(this.isValid(l))return l}}return super.deserialize(r)}isDateInstance(r){return r instanceof Date}isValid(r){return!isNaN(r.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(r,l,E){const c=new Date(r,l,E);return r>=0&&r<100&&c.setFullYear(this.getYear(c)-1900),c}_2digit(r){return("00"+r).slice(-2)}_stripDirectionalityCharacters(r){return r.replace(/[\u200e\u200f]/g,"")}_format(r,l){const E=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()));return r.format(E)}getMonthNames(r){return this.i18nDatesService.getMonthNames(r)}getDayOfWeekNames(r){return this.i18nDatesService.getDayOfWeekNames(r)}getFirstDayOfWeek(){return this.i18nDatesService.getFirstDayOfWeek()}parse(r,l){return this.i18nDatesService.parse(r,"string"==typeof l?l:l[0])}format(r,l){return this.i18nDatesService.format(r,l)}}return w.\u0275fac=function(r){return new(r||w)(P.LFG(U.R))},w.\u0275prov=P.Yz7({token:w,factory:w.\u0275fac}),w})();var K=i(6856),Y=i(1079);let R=(()=>{class w{}return w.\u0275fac=function(r){return new(r||w)},w.\u0275mod=P.oAB({type:w}),w.\u0275inj=P.cJS({providers:[{provide:e.sG,useValue:t},{provide:e._A,useClass:F,deps:[U.R]}],imports:[[h.ez,A.u5,f.r,A.UX,p.o9,K.FA,e.Ng,Y.Bb,O.c,n.lN]]}),w})()},5031:($,W,i)=>{"use strict";i.d(W,{Q:()=>H});var h=i(791),p=i(8505),A=i(3103),e=i(5e3),n=i(6050),O=i(9808),U=i(3322),f=i(7322),P=i(7093),t=i(7531),Z=i(7423),T=i(5245),s=i(8966),M=i(4834),y=i(5899),I=i(1062);const F=["fileDialog"],K=["errorDialog"];function Y(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).showHelp()}),e.TgZ(1,"mat-icon"),e._uU(2,"help_outline"),e.qZA()()}}function R(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"img",13),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).selectFile()}),e.qZA()}if(2&x){const o=e.oxw(2);e.Q6J("src",o.control.value,e.LSH)}}function w(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"img",14),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).selectFile()}),e.qZA()}}function g(x,N){if(1&x&&(e.TgZ(0,"mat-error"),e._UZ(1,"editable-error-block",15),e.qZA()),2&x){const o=e.oxw(2);e.xp6(1),e.Q6J("messages",o.errorMessages)("control",o.control)}}const r=function(x){return{"img-registry-editable":x}};function l(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"div",4)(1,"mat-form-field",5),e._UZ(2,"input",6),e.YNc(3,Y,3,0,"button",7),e.TgZ(4,"button",8),e.NdJ("click",function(){return e.CHM(o),e.oxw().selectFile()}),e.TgZ(5,"mat-icon"),e._uU(6,"upload"),e.qZA()()(),e._UZ(7,"div",9),e.YNc(8,R,1,1,"img",10),e.YNc(9,w,1,0,"img",11),e.YNc(10,g,2,2,"mat-error",12),e.qZA()}if(2&x){const o=e.oxw();e.Q6J("ngClass",e.VKq(8,r,o.control.enabled)),e.xp6(2),e.s9C("value",o.label),e.Q6J("placeholder",o.placeholder)("disabled",!0),e.xp6(1),e.Q6J("ngIf",o.help),e.xp6(5),e.Q6J("ngIf",o.control.value),e.xp6(1),e.Q6J("ngIf",!o.control.value),e.xp6(1),e.Q6J("ngIf",o.control.invalid)}}function E(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).showHelp()}),e.TgZ(1,"mat-icon"),e._uU(2,"help_outline"),e.qZA()()}}function c(x,N){if(1&x&&(e.TgZ(0,"mat-error"),e._UZ(1,"editable-error-block",15),e.qZA()),2&x){const o=e.oxw(2);e.xp6(1),e.Q6J("messages",o.errorMessages)("control",o.control)}}function d(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"div",16)(1,"mat-form-field",17)(2,"mat-label"),e._uU(3),e.qZA(),e._UZ(4,"input",18),e.TgZ(5,"mat-icon",19),e.NdJ("click",function(){return e.CHM(o),e.oxw().selectFile()}),e._uU(6,"cloud_upload"),e.qZA(),e.YNc(7,E,3,0,"button",7),e.qZA(),e.YNc(8,c,2,2,"mat-error",12),e.qZA()}if(2&x){const o=e.oxw();e.xp6(1),e.Q6J("floatLabel",o.floatLabel),e.xp6(2),e.Oqu(o.label),e.xp6(1),e.Q6J("value",o.control.value)("disabled",!0),e.xp6(3),e.Q6J("ngIf",o.help),e.xp6(1),e.Q6J("ngIf",o.control.invalid)}}function _(x,N){1&x&&(e.TgZ(0,"p",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&x&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"component.fileupload.selectImage")," "))}function D(x,N){1&x&&(e.TgZ(0,"p",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&x&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"component.fileupload.selectFile")," "))}function u(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"img",36),e.NdJ("click",function(a){return e.CHM(o),e.oxw(3).openFileBrowser(a)}),e.qZA()}if(2&x){const o=e.oxw(3);e.Q6J("src",o.srcTemporal,e.LSH)}}function v(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"img",37),e.NdJ("click",function(a){return e.CHM(o),e.oxw(3).openFileBrowser(a)}),e.qZA()}}function b(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"button",32),e.NdJ("click",function(a){return e.CHM(o),e.oxw(2).openFileBrowser(a)}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"mat-divider",25),e.TgZ(6,"input",33),e.NdJ("change",function(a){return e.CHM(o),e.oxw(2).showPreviewImage(a)}),e.qZA()(),e.YNc(7,u,1,1,"img",34),e.YNc(8,v,1,0,"img",35),e.qZA()}if(2&x){const o=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,4,"component.fileupload.clickToChooseImage")," "),e.xp6(3),e.s9C("id",o.buttonId),e.xp6(1),e.Q6J("ngIf",o.srcTemporal),e.xp6(1),e.Q6J("ngIf",!o.srcTemporal)}}function L(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"div",30)(1,"button",38),e.NdJ("click",function(a){return e.CHM(o),e.oxw(2).openFileBrowser(a)}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",33),e.NdJ("change",function(a){return e.CHM(o),e.oxw(2).showPreviewImage(a)}),e.qZA()()}if(2&x){const o=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"component.fileupload.chooseFile")," "),e.xp6(2),e.s9C("id",o.buttonId)}}function S(x,N){if(1&x&&(e.TgZ(0,"div"),e._UZ(1,"mat-progress-bar",39),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&x){const o=e.oxw(2);e.xp6(1),e.Q6J("value",o.progressValue),e.xp6(2),e.hij("",o.progressValue,"%")}}function B(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"div",20)(1,"button",21),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return null==a.dialogRef?null:a.dialogRef.close()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.YNc(4,_,3,3,"p",22),e.YNc(5,D,3,3,"p",22),e.qZA(),e.TgZ(6,"mat-dialog-content",23),e.YNc(7,b,9,6,"div",24),e.YNc(8,L,5,4,"div",24),e.YNc(9,S,4,2,"div",12),e.qZA(),e._UZ(10,"mat-divider",25),e.TgZ(11,"mat-dialog-actions",20),e._UZ(12,"span",26),e.TgZ(13,"button",27),e.NdJ("click",function(){return e.CHM(o),e.oxw().save(null)}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",28),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return a.save(a.response)}),e._uU(17),e.ALo(18,"translate"),e.qZA()()}if(2&x){const o=e.oxw();e.xp6(4),e.Q6J("ngIf","image"===o.contentType),e.xp6(1),e.Q6J("ngIf","image"!==o.contentType),e.xp6(2),e.Q6J("ngIf","image"===o.contentType),e.xp6(1),e.Q6J("ngIf","image"!==o.contentType),e.xp6(1),e.Q6J("ngIf",o.loading),e.xp6(5),e.Oqu(e.lcZ(15,8,"component.fileupload.quit")),e.xp6(2),e.Q6J("disabled",null==o.response||""==o.response),e.xp6(1),e.hij(" ",e.lcZ(18,10,"component.fileupload.accept")," ")}}function J(x,N){if(1&x){const o=e.EpF();e.TgZ(0,"h5",40),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"p",41),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"mat-dialog-actions")(8,"button",32),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return null==a.errorDialogRef?null:a.errorDialogRef.close()}),e._uU(9),e.ALo(10,"translate"),e.qZA()()}2&x&&(e.xp6(1),e.Oqu(e.lcZ(2,3,"component.fileupload.error")),e.xp6(4),e.Oqu(e.lcZ(6,5,"component.fileupload.toBig")),e.xp6(4),e.Oqu(e.lcZ(10,7,"component.fileupload.close")))}let z=1,H=(()=>{class x extends h.G7{constructor(o,m){super(o),this.cdRef=m,this.contentType="file",this.localUrl="assets/perfilDefecto.jpg",this.srcTemporal="",this.loading=!1,this.progressValue=0,this.buttonId="_upload_button_id_"+z+++(new Date).getTime()}selectFile(){var o;if(!(null===(o=this.control)||void 0===o?void 0:o.disabled)){if(!this.fileDialog)throw new Error("Intentando levantar el dialogo sin la plantailla");this.dialogRef=this.service.dialog.open(this.fileDialog)}}openFileBrowser(o){o.preventDefault();const m=document.getElementById(this.buttonId);null==m||m.click()}showPreviewImage(o){if(o.target.files&&o.target.files[0]){this.loading=!0;const m=new FileReader;if(m.onload=a=>{this.localUrl=a.target.result},m.readAsDataURL(o.target.files[0]),!this.upload)throw new Error("Intentando subir sin indicar el callback");{const a=this.upload(o.target.files[0]).pipe((0,p.b)(C=>{this.progressValue=C.progressPercent}),(0,A.Z)()).subscribe({next:C=>{this.srcTemporal=this.response=C.data,console.log("TENGO LOS VALORES EN CAMINO",this.srcTemporal),this.subscriptions.remove(a)},error:C=>{if(this.subscriptions.remove(a),413===C.status){if(this.service.errorHandler.cancelError(C),!this.errorDialog)throw new Error("Intentando pintar un error sin la plantilla");this.errorDialogRef=this.service.dialog.open(this.errorDialog)}}});this.subscriptions.add(a)}}}save(o){this.srcTemporal="",this.response="",this.loading=!1,this.progressValue=0,this.dialogRef&&this.dialogRef.close(),this.control&&(this.control.markAsDirty(),this.control.setValue(o)),this.cdRef.markForCheck()}}return x.\u0275fac=function(o){return new(o||x)(e.Y36(n.U),e.Y36(e.sBO))},x.\u0275cmp=e.Xpm({type:x,selectors:[["editable-upload"]],viewQuery:function(o,m){if(1&o&&(e.Gf(F,5),e.Gf(K,5)),2&o){let a;e.iGM(a=e.CRH())&&(m.fileDialog=a.first),e.iGM(a=e.CRH())&&(m.errorDialog=a.first)}},inputs:{contentType:"contentType",upload:"upload"},features:[e.qOj],decls:6,vars:2,consts:[["class","form-group img-registry mat-typography","style","flex: 1; display: flex; flex-direction: column; justify-content: center; position: relative",3,"ngClass",4,"ngIf"],["class","form-group img-registry mat-typography","style","display: flex; flex-direction: row; justify-content: space-between",4,"ngIf"],["fileDialog",""],["errorDialog",""],[1,"form-group","img-registry","mat-typography",2,"flex","1","display","flex","flex-direction","column","justify-content","center","position","relative",3,"ngClass"],["fxFlex","100%",2,"position","absolute","top","0px","left","0px","right","0px"],["matInput","",3,"placeholder","disabled","value"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click"],[2,"height","40px"],["style","min-width: 20px; min-height: 20px","style","width: 100%; margin: auto; border: solid silver 1px","class","img-fluid","alt","image",3,"src","click",4,"ngIf"],["style","width: 20%; border: solid silver 1px","class","img-fluid","src","./assets/img/resources/no-image.png","alt","no-image",3,"click",4,"ngIf"],[4,"ngIf"],["alt","image",1,"img-fluid",2,"width","100%","margin","auto","border","solid silver 1px",3,"src","click"],["src","./assets/img/resources/no-image.png","alt","no-image",1,"img-fluid",2,"width","20%","border","solid silver 1px",3,"click"],[3,"messages","control"],[1,"form-group","img-registry","mat-typography",2,"display","flex","flex-direction","row","justify-content","space-between"],[3,"floatLabel"],["matInput","",3,"value","disabled"],["matSuffix","",3,"click"],[2,"display","flex"],["mat-icon-button","",3,"click"],["mat-dialog-title","","mat-dialog-title","",4,"ngIf"],[2,"position","relative"],["class","form-group img-registry mat-typography",4,"ngIf"],[2,"margin","0px -25px 0px -25px"],[2,"flex","1"],["mat-button","","color","warn",3,"click"],["mat-button","","color","primary",3,"disabled","click"],["mat-dialog-title","","mat-dialog-title",""],[1,"form-group","img-registry","mat-typography"],[1,"upload-img"],["mat-button","",3,"click"],["type","file",2,"display","none",3,"id","change"],["class","img-fluid","alt","uploaded",3,"src","click",4,"ngIf"],["src","./assets/img/resources/upload-file.png","class","img-fluid","alt","no-upload",3,"click",4,"ngIf"],["alt","uploaded",1,"img-fluid",3,"src","click"],["src","./assets/img/resources/upload-file.png","alt","no-upload",1,"img-fluid",3,"click"],["mat-stroked-button","",3,"click"],[3,"value"],["mat-dialog-title",""],[1,"mat-typography"]],template:function(o,m){1&o&&(e.YNc(0,l,11,10,"div",0),e.YNc(1,d,9,6,"div",1),e.YNc(2,B,19,12,"ng-template",null,2,e.W1O),e.YNc(4,J,11,9,"ng-template",null,3,e.W1O)),2&o&&(e.Q6J("ngIf",m.control&&"image"===m.contentType),e.xp6(1),e.Q6J("ngIf",m.control&&"image"!==m.contentType))},directives:[O.O5,O.mk,U.oO,f.KE,P.yH,t.Nt,Z.lW,f.R9,T.Hw,f.TO,h.qJ,f.hX,s.uh,s.xY,M.d,y.pW,s.H8],pipes:[I.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.img-registry[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0;padding:0}.img-registry-editable[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.5}#input-img-registry[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),x})()},8195:($,W,i)=>{"use strict";i.d(W,{M:()=>M});var h=i(9808),p=i(2155),A=i(3075),e=i(7423),n=i(8966),O=i(4834),U=i(7322),f=i(5245),P=i(5899),t=i(7531),Z=i(1062),T=i(1614),s=i(5e3);let M=(()=>{class y{}return y.\u0275fac=function(F){return new(F||y)},y.\u0275mod=s.oAB({type:y}),y.\u0275inj=s.cJS({providers:[],imports:[[h.ez,Z.aw,A.u5,T.r,A.UX,p.o9,t.c,e.ot,n.Is,O.t,f.Ps,P.Cv,U.lN]]}),y})()},354:function($){$.exports=function(){"use strict";var W=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,h=/\d\d?/,p=/[+-]\d\d:?\d\d/,A={},e={},n={},O=[31,0,31,30,31,30,31,31,30,31,30,31];function f(s,M){A[s]=M}function P(s,M,y){var I;"string"==typeof s&&(s=[s]),I="string"==typeof M?y?function(Y){var R=+Y;if(!y(R))throw new Error("Invalid "+M+': "'+Y+'".');this[M]=R}:function(Y){this[M]=+Y}:M;for(var F=0,K=s.length;F<K;F+=1)e[s[F]]=I}f("A",/[AP]M/),P(["A"],function(s){this.afternoon="PM"===s}),f("a",/[ap]m/),P(["a"],function(s){this.afternoon="pm"===s}),f("S",/\d/),f("SS",i),f("SSS",/\d{3}/);for(var t=function(s,M){P(s,function(y){this.milliseconds=+y*M})},Z="S",T=100;1<=T;Z+="S",T/=10)t(Z,T);return f("s",h),f("ss",i),P(["s","ss"],"seconds",function(s){return s<=59}),f("m",h),f("mm",i),P(["m","mm"],"minutes",function(s){return s<=59}),f("H",h),f("h",h),f("HH",i),f("hh",i),P(["H","HH"],"hours",function(s){return s<=23}),P(["h","hh"],"hours",function(s){return 1<=s&&s<=12}),f("D",h),f("DD",i),P(["D","DD"],"day"),f("M",h),f("MM",i),P(["M","MM"],"month",function(s){return 1<=s&&s<=12}),f("Y",/[+-]?\d+/),f("YY",i),f("YYYY",/\d{4}/),P(["Y","YYYY"],"year"),P("YY",function(s){this.year=(s=+s)+(68<s?1900:2e3)}),f("z",/[A-Z]{3,4}/),P("z",function(s){(this.zone||(this.zone={})).abbreviation=s}),f("Z",p),f("ZZ",p),P(["Z","ZZ"],function(s){(this.zone||(this.zone={})).offset=function(M){var y=M.match(/([+-]|\d\d)/g),I=60*y[1]+ +y[2],F=0===I?0:"+"===y[0]?-I:I;if(!(F%15==0&&Math.abs(F)<=765))throw new Error('Invalid time zone offset: "'+M+'".');return F}(s)}),function(s,M){var y=M.prototype,I=y.parse;y.parse=function(F){var K,Y,R,w=F.date,g=F.format;if(g){try{var r,l=(K=w,(R=n[Y=g])||(R=function U(s){var M=s.match(W);if(!M)throw new Error('Invalid format: "'+s+'".');for(var y=M.length,I=0;I<y;I+=1){var F=M[I],Y=e[F];M[I]=Y?{regex:A[F],parser:Y}:F.replace(/^\[|\]$/g,"")}return function(R){for(var w={},g=0,r=0;g<y;g+=1){var l=M[g];if("string"==typeof l){if(R.indexOf(l,r)!==r){var E=R.substr(r,l.length);throw new Error('Expected "'+l+'" at character '+r+', found "'+E+'".')}r+=l.length}else{var c=l.regex,d=l.parser,_=R.substr(r),D=c.exec(_);if(!D||0!==D.index)throw new Error('Matching "'+c+'" at character '+r+' failed with "'+_+'".');var u=D[0];d.call(w,u),r+=u.length}}return function(v){var b,L,S=v.day,B=v.month;if(b=2===B?(L=v.year)%4==0&&L%100!=0||L%400==0?29:28:O[B-1],!(1<=S&&S<=b))throw new Error('Invalid day: "'+S+'".')}(w),function(v){var b=v.afternoon;if(void 0!==b){var L=v.hours;b?L<12&&(v.hours+=12):12===L&&(v.hours=0),delete v.afternoon}}(w),w}}(Y),n[Y]=R),R(K)),E=l.year,c=l.month,d=l.day,_=l.hours,D=l.minutes,u=l.seconds,v=l.milliseconds,b=l.zone;if(b){var L=Date.UTC(E,c-1,d,_||0,D||0,u||0,v||0)+60*b.offset*1e3;r=new Date(L)}else r=new Date(E,c-1,d,_||0,D||0,u||0,v||0);this.$d=r}catch(S){this.$d=new Date(Number.NaN)}this.init(F)}else I.call(this,F)}}}()},2598:function($){$.exports=function(){"use strict";var W=function(h,p,A){var e=String(h);return!e||e.length>=p?h:""+Array(p+1-e.length).join(A)+h},i={padStart:W,padZoneStr:function(h){var p=Math.abs(h),A=Math.floor(p/60),e=p%60;return(h<=0?"+":"-")+W(A,2,"0")+":"+W(e,2,"0")},monthDiff:function(h,p){var A=12*(p.year()-h.year())+(p.month()-h.month()),e=h.clone().add(A,"months"),n=p-e<0,O=h.clone().add(A+(n?-1:1),"months"),U=Number(-(A+(p-e)/(n?e-O:O-e)));return 0===Math.abs(U)?0:U},absFloor:function(h){return h<0?Math.ceil(h)||0:Math.floor(h)},prettyUnit:function(h){return{M:"month",y:"year",w:"week",d:"day",h:"hour",m:"minute",s:"second",ms:"millisecond"}[h]||String(h||"").toLowerCase().replace(/s$/,"")},isUndefined:function(h){return void 0===h}};return function(h,p,A){var e=p.prototype,n=e.parse,O=e.format,U={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};A.en.formats=U,e.parse=function(f){var P=f&&f.format;if(P){var t=i.getLocale(f.locale).formats||{};f.format=P.replace(/LTS|LT|L/g,function(Z){return t[Z]||U[Z]})}n.call(this,f)},e.format=function(f){var P=this.$locale().formats||{},t=(f||"YYYY-MM-DDTHH:mm:ssZ").replace(/LTS|LT|L{1,4}/g,function(Z){return P[Z]||U[Z]});return O.call(this,t)}}}()},1764:function($){$.exports=function(){"use strict";var i=6e4,h=36e5,p="millisecond",A="second",e="minute",n="hour",O="day",U="week",f="month",P="quarter",t="year",Z="date",T="Invalid Date",s=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},I=function(c,d,_){var D=String(c);return!D||D.length>=d?c:""+Array(d+1-D.length).join(_)+c},F={s:I,z:function(c){var d=-c.utcOffset(),_=Math.abs(d),D=Math.floor(_/60),u=_%60;return(d<=0?"+":"-")+I(D,2,"0")+":"+I(u,2,"0")},m:function c(d,_){if(d.date()<_.date())return-c(_,d);var D=12*(_.year()-d.year())+(_.month()-d.month()),u=d.clone().add(D,f),v=_-u<0,b=d.clone().add(D+(v?-1:1),f);return+(-(D+(_-u)/(v?u-b:b-u))||0)},a:function(c){return c<0?Math.ceil(c)||0:Math.floor(c)},p:function(c){return{M:f,y:t,w:U,d:O,D:Z,h:n,m:e,s:A,ms:p,Q:P}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(c){return void 0===c}},K="en",Y={};Y[K]=y;var R=function(c){return c instanceof l},w=function c(d,_,D){var u;if(!d)return K;if("string"==typeof d){var v=d.toLowerCase();Y[v]&&(u=v),_&&(Y[v]=_,u=v);var b=d.split("-");if(!u&&b.length>1)return c(b[0])}else{var L=d.name;Y[L]=d,u=L}return!D&&u&&(K=u),u||!D&&K},g=function(c,d){if(R(c))return c.clone();var _="object"==typeof d?d:{};return _.date=c,_.args=arguments,new l(_)},r=F;r.l=w,r.i=R,r.w=function(c,d){return g(c,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var l=function(){function c(_){this.$L=w(_.locale,null,!0),this.parse(_)}var d=c.prototype;return d.parse=function(_){this.$d=function(D){var u=D.date,v=D.utc;if(null===u)return new Date(NaN);if(r.u(u))return new Date;if(u instanceof Date)return new Date(u);if("string"==typeof u&&!/Z$/i.test(u)){var b=u.match(s);if(b){var L=b[2]-1||0,S=(b[7]||"0").substring(0,3);return v?new Date(Date.UTC(b[1],L,b[3]||1,b[4]||0,b[5]||0,b[6]||0,S)):new Date(b[1],L,b[3]||1,b[4]||0,b[5]||0,b[6]||0,S)}}return new Date(u)}(_),this.$x=_.x||{},this.init()},d.init=function(){var _=this.$d;this.$y=_.getFullYear(),this.$M=_.getMonth(),this.$D=_.getDate(),this.$W=_.getDay(),this.$H=_.getHours(),this.$m=_.getMinutes(),this.$s=_.getSeconds(),this.$ms=_.getMilliseconds()},d.$utils=function(){return r},d.isValid=function(){return this.$d.toString()!==T},d.isSame=function(_,D){var u=g(_);return this.startOf(D)<=u&&u<=this.endOf(D)},d.isAfter=function(_,D){return g(_)<this.startOf(D)},d.isBefore=function(_,D){return this.endOf(D)<g(_)},d.$g=function(_,D,u){return r.u(_)?this[D]:this.set(u,_)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(_,D){var u=this,v=!!r.u(D)||D,b=r.p(_),L=function(o,m){var a=r.w(u.$u?Date.UTC(u.$y,m,o):new Date(u.$y,m,o),u);return v?a:a.endOf(O)},S=function(o,m){return r.w(u.toDate()[o].apply(u.toDate("s"),(v?[0,0,0,0]:[23,59,59,999]).slice(m)),u)},B=this.$W,J=this.$M,z=this.$D,H="set"+(this.$u?"UTC":"");switch(b){case t:return v?L(1,0):L(31,11);case f:return v?L(1,J):L(0,J+1);case U:var x=this.$locale().weekStart||0,N=(B<x?B+7:B)-x;return L(v?z-N:z+(6-N),J);case O:case Z:return S(H+"Hours",0);case n:return S(H+"Minutes",1);case e:return S(H+"Seconds",2);case A:return S(H+"Milliseconds",3);default:return this.clone()}},d.endOf=function(_){return this.startOf(_,!1)},d.$set=function(_,D){var u,v=r.p(_),b="set"+(this.$u?"UTC":""),L=(u={},u[O]=b+"Date",u[Z]=b+"Date",u[f]=b+"Month",u[t]=b+"FullYear",u[n]=b+"Hours",u[e]=b+"Minutes",u[A]=b+"Seconds",u[p]=b+"Milliseconds",u)[v],S=v===O?this.$D+(D-this.$W):D;if(v===f||v===t){var B=this.clone().set(Z,1);B.$d[L](S),B.init(),this.$d=B.set(Z,Math.min(this.$D,B.daysInMonth())).$d}else L&&this.$d[L](S);return this.init(),this},d.set=function(_,D){return this.clone().$set(_,D)},d.get=function(_){return this[r.p(_)]()},d.add=function(_,D){var u,v=this;_=Number(_);var b=r.p(D),L=function(J){var z=g(v);return r.w(z.date(z.date()+Math.round(J*_)),v)};if(b===f)return this.set(f,this.$M+_);if(b===t)return this.set(t,this.$y+_);if(b===O)return L(1);if(b===U)return L(7);var S=(u={},u[e]=i,u[n]=h,u[A]=1e3,u)[b]||1,B=this.$d.getTime()+_*S;return r.w(B,this)},d.subtract=function(_,D){return this.add(-1*_,D)},d.format=function(_){var D=this,u=this.$locale();if(!this.isValid())return u.invalidDate||T;var v=_||"YYYY-MM-DDTHH:mm:ssZ",b=r.z(this),L=this.$H,S=this.$m,B=this.$M,J=u.weekdays,z=u.months,H=function(m,a,C,Q){return m&&(m[a]||m(D,v))||C[a].slice(0,Q)},x=function(m){return r.s(L%12||12,m,"0")},N=u.meridiem||function(m,a,C){var Q=m<12?"AM":"PM";return C?Q.toLowerCase():Q},o={YY:String(this.$y).slice(-2),YYYY:this.$y,M:B+1,MM:r.s(B+1,2,"0"),MMM:H(u.monthsShort,B,z,3),MMMM:H(z,B),D:this.$D,DD:r.s(this.$D,2,"0"),d:String(this.$W),dd:H(u.weekdaysMin,this.$W,J,2),ddd:H(u.weekdaysShort,this.$W,J,3),dddd:J[this.$W],H:String(L),HH:r.s(L,2,"0"),h:x(1),hh:x(2),a:N(L,S,!0),A:N(L,S,!1),m:String(S),mm:r.s(S,2,"0"),s:String(this.$s),ss:r.s(this.$s,2,"0"),SSS:r.s(this.$ms,3,"0"),Z:b};return v.replace(M,function(m,a){return a||o[m]||b.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(_,D,u){var v,b=r.p(D),L=g(_),S=(L.utcOffset()-this.utcOffset())*i,B=this-L,J=r.m(this,L);return J=(v={},v[t]=J/12,v[f]=J,v[P]=J/3,v[U]=(B-S)/6048e5,v[O]=(B-S)/864e5,v[n]=B/h,v[e]=B/i,v[A]=B/1e3,v)[b]||B,u?J:r.a(J)},d.daysInMonth=function(){return this.endOf(f).$D},d.$locale=function(){return Y[this.$L]},d.locale=function(_,D){if(!_)return this.$L;var u=this.clone(),v=w(_,D,!0);return v&&(u.$L=v),u},d.clone=function(){return r.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}(),E=l.prototype;return g.prototype=E,[["$ms",p],["$s",A],["$m",e],["$H",n],["$W",O],["$M",f],["$y",t],["$D",Z]].forEach(function(c){E[c[1]]=function(d){return this.$g(d,c[0],c[1])}}),g.extend=function(c,d){return c.$i||(c(d,l,g),c.$i=!0),g},g.locale=w,g.isDayjs=R,g.unix=function(c){return g(1e3*c)},g.en=Y[K],g.Ls=Y,g.p={},g}()}}]);