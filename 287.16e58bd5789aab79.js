"use strict";(self.webpackChunkagenda_angular=self.webpackChunkagenda_angular||[]).push([[287,600,782],{4137:(I,A,l)=>{l.r(A),l.d(A,{DossierViewLazyModule:()=>et});var m=l(9808),a=l(1062),w=l(2155),x=l(5113),c=l(7423),g=l(6510),h=l(1614),Z=l(2375),V=l(2782),U=l(5848),Y=l(9596),J=l(7893),F=l(7531),u=l(3075),D=l(5245),f=l(960),e=l(5e3);let R=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[g.V,m.ez,h.r,f.M,w.o9,V.n,u.u5,x.xu,Z.W,c.ot,F.c,u.UX,a.aw]}),s})(),ee=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[g.V,m.ez,h.r,w.o9,V.n,x.xu,Z.W,R,c.ot,a.aw]}),s})(),te=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[g.V,m.ez,h.r,f.M,J.o,w.o9,V.n,u.u5,x.xu,Z.W,ee,R,c.ot,D.Ps,F.c,u.UX,a.aw]}),s})(),ie=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[g.V,m.ez,Y.DossierViewDetailModule,U.DossierViewEditModule,h.r,J.o,w.o9,V.n,u.u5,x.xu,Z.W,te,c.ot,D.Ps,F.c,u.UX,a.aw]}),s})();var K=l(8390),H=l(8862),B=l(7261),O=l(7130),C=l(7738),N=l(9873),P=l(727),M=l(4610),y=l(8034),se=l(967),oe=l(8574);class G{static clone(r){const t=new G;return t.pageSize=r.pageSize,t.pageNumber=r.pageNumber,t.lastRow=r.lastRow,t.search=r.search,t.lugar="string"==typeof r.lugar||r.lugar instanceof String?r.lugar:r.lugar?r.lugar.uid:void 0,t.dossier="string"==typeof r.dossier||r.dossier instanceof String?r.dossier:r.dossier?r.dossier.uid:void 0,t}}var Q=l(6537),L=l(2076),E=l(5577),S=l(4004),le=l(262),re=l(2843),j=l(6043),ne=l(8505),ae=l(5097),z=l(6305),X=l(970),W=l(9087),$=l(9952),T=l(7093);function ce(s,r){if(1&s&&e._UZ(0,"editable-create-related",6),2&s){const t=e.oxw(3);e.Q6J("build",t.loadCreateRelatedLugarDossierLugar)}}function de(s,r){if(1&s&&(e.TgZ(0,"editable-selectone",3),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,ce,1,1,"editable-create-related",4),e._UZ(4,"editable-view-related",5),e.ALo(5,"translate"),e.qZA()),2&s){const t=e.oxw(2);e.s9C("label",e.lcZ(1,8,"proyecto.lugar-dossier-view.form.lugar.label")),e.s9C("placeholder",e.lcZ(2,10,"proyecto.lugar-dossier-view.form.lugar.placeholder")),e.Q6J("control",t.fields.lugar.control)("search",t.relatedLugarDossierLugar)("retrieve",t.retrieveLugarDossierLugar),e.xp6(3),e.Q6J("ngIf",t.allowCreateLugarViewLugar),e.xp6(1),e.s9C("title",e.lcZ(5,12,"geo.lugar-view.lugar.showRelated")),e.Q6J("build",t.loadViewRelatedLugarDossierLugar)}}function ue(s,r){if(1&s&&e._UZ(0,"editable-create-related",9),2&s){const t=e.oxw(3);e.Q6J("build",t.loadCreateRelatedLugarDossierDossier)}}function fe(s,r){if(1&s&&(e.TgZ(0,"editable-selectone",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,ue,1,1,"editable-create-related",8),e._UZ(4,"editable-view-related",5),e.ALo(5,"translate"),e.qZA()),2&s){const t=e.oxw(2);e.s9C("label",e.lcZ(1,8,"proyecto.lugar-dossier-view.form.dossier.label")),e.s9C("placeholder",e.lcZ(2,10,"proyecto.lugar-dossier-view.form.dossier.placeholder")),e.Q6J("control",t.fields.dossier.control)("search",t.relatedLugarDossierDossier)("retrieve",t.retrieveLugarDossierDossier),e.xp6(3),e.Q6J("ngIf",t.allowCreateDossierViewDossier),e.xp6(1),e.s9C("title",e.lcZ(5,12,"proyecto.dossier-view.dossier.showRelated")),e.Q6J("build",t.loadViewRelatedLugarDossierDossier)}}function pe(s,r){if(1&s&&(e.YNc(0,de,6,14,"editable-selectone",1),e.YNc(1,fe,6,14,"editable-selectone",2)),2&s){const t=e.oxw();e.Q6J("ngIf",null==t.fields.lugar?null:t.fields.lugar.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.dossier?null:t.fields.dossier.visible)}}let q=(()=>{class s{constructor(t,i,o,n,p,b){this.lugarDossierRepository=t,this.lugarRepository=i,this.dossierRepository=o,this.cdRef=n,this.appState=p,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={lugar:{visible:!0,editable:!0,disabled:!1},dossier:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new P.w0,this.allowCreateLugarViewLugar=!1,this.allowCreateDossierViewDossier=!1,this.loadCreateRelatedLugarDossierLugar=d=>(0,L.D)(l.e(592).then(l.bind(l,1860))).pipe((0,E.z)(()=>(0,L.D)(l.e(355).then(l.bind(l,9355))).pipe((0,S.U)(({LugarViewEditComponent:v})=>{const _=d.createComponent(v);return _.instance.data=_.instance.initialsAndDefaults,_.instance})))),this.loadViewRelatedLugarDossierLugar=d=>(0,L.D)(l.e(592).then(l.bind(l,3662))).pipe((0,E.z)(()=>(0,L.D)(Promise.all([l.e(355),l.e(592)]).then(l.bind(l,8184))).pipe((0,S.U)(({LugarViewDetailComponent:v})=>{const _=d.createComponent(v);return _.instance.data=this.fields.lugar.value,_.instance})))),this.relatedLugarDossierLugar=d=>this.lugarRepository.list(this.filter(new j.ae,d,this.lugarDossierLugarFilter)),this.retrieveLugarDossierLugar=d=>this.lugarRepository.retrieve(d.uid),this.loadCreateRelatedLugarDossierDossier=d=>(0,L.D)(Promise.resolve().then(l.bind(l,5848))).pipe((0,E.z)(()=>(0,L.D)(Promise.resolve().then(l.bind(l,8574))).pipe((0,S.U)(({DossierViewEditComponent:v})=>{const _=d.createComponent(v);return _.instance.data=_.instance.initialsAndDefaults,_.instance})))),this.loadViewRelatedLugarDossierDossier=d=>(0,L.D)(Promise.resolve().then(l.bind(l,9596))).pipe((0,E.z)(()=>(0,L.D)(Promise.resolve().then(l.bind(l,967))).pipe((0,S.U)(({DossierViewDetailComponent:v})=>{const _=d.createComponent(v);return _.instance.data=this.fields.dossier.value,_.instance})))),this.relatedLugarDossierDossier=d=>this.dossierRepository.list(this.filter(new N.w4,d,this.lugarDossierDossierFilter)),this.retrieveLugarDossierDossier=d=>this.dossierRepository.retrieve(d.uid),this.initialsAndDefaults={},this.form=b.group({lugar:this.fields.lugar.control=new u.NI("",[]),dossier:this.fields.dossier.control=new u.NI("",[])}),this.subscriptions.add(this.lugarRepository.genericAcl().subscribe(d=>{if(this.allowCreateLugarViewLugar=!1,d.allows)for(const v of d.allows)"create"===v.name&&(this.allowCreateLugarViewLugar=v.allowed||!1)})),this.subscriptions.add(this.dossierRepository.genericAcl().subscribe(d=>{if(this.allowCreateDossierViewDossier=!1,d.allows)for(const v of d.allows)"create"===v.name&&(this.allowCreateDossierViewDossier=v.allowed||!1)}))}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){var t;this.acl?this.updateAcl():null!==(t=this.data)&&void 0!==t&&t.uid?this.lugarDossierRepository.specificAcl(this.data.uid).subscribe(i=>{this.acl=i,this.updateAcl()}):this.lugarDossierRepository.genericAcl().subscribe(i=>{this.acl=i,this.updateAcl()}),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}ngOnChanges(t){t.defaults&&Object.assign(this.initialsAndDefaults,this.defaults),t.fixed&&(this.fixedFields=[],this.fixed.forEach&&this.fixed.forEach(i=>{this.fixedFields.push(i)})),t.acl&&this.updateAcl()}clearErrors(){this.formView&&this.formView.clearErrors()}saveValue(){if(this.formView){const t=this.lugarDossierRepository.key(this.data),i=this.formView.retrieveValue();return(t?this.lugarDossierRepository.update(t,i):this.lugarDossierRepository.add(i)).pipe((0,ae.I)(),(0,le.K)(n=>{var p;return t&&this.lugarDossierRepository.retrieve(t).subscribe(b=>{this.formView&&this.formView.markOriginal(b)}),null===(p=this.formView)||void 0===p||p.showError(n),(0,re._)(()=>n)}),(0,ne.b)(n=>{var p;Object.keys(n).forEach(b=>{this.data[b]=n[b],this.formView&&(this.formView.data[b]=n[b])}),null===(p=this.formView)||void 0===p||p.refresh()}))}throw new Error("Intentando guardar sin formView")}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,o){if(t.search=i,o)for(const n of Object.keys(o))t[n]=o[n];if(this.contextFilter)for(const n of Object.keys(this.contextFilter))t[n]=this.contextFilter[n];return t}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.S),e.Y36(z._),e.Y36(O.h),e.Y36(e.sBO),e.Y36(X.aB),e.Y36(u.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["lugar-dossier-view-edit"]],viewQuery:function(t,i){if(1&t&&e.Gf(Q.k,7),2&t){let o;e.iGM(o=e.CRH())&&(i.formView=o.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",data:"data",lugarDossierLugarFilter:"lugarDossierLugarFilter",lugarDossierDossierFilter:"lugarDossierDossierFilter"},features:[e.TTD],decls:2,vars:10,consts:[["fxLayout","row wrap","fxLayoutGap","10px",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl","data"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-lugar-dossier-lugar","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-lugar-dossier-dossier","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-lugar-dossier-lugar","display","nombre",3,"control","label","placeholder","search","retrieve"],["title","geo.lugarView.lugar.createNew",3,"build",4,"ngIf"],[3,"title","build"],["title","geo.lugarView.lugar.createNew",3,"build"],["fxFlex","45%","fxFlex.sm","90%","fxFlex.xs","90%","id","editable-lugar-dossier-dossier","display","nombre",3,"control","label","placeholder","search","retrieve"],["title","proyecto.dossierView.dossier.createNew",3,"build",4,"ngIf"],["title","proyecto.dossierView.dossier.createNew",3,"build"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,pe,2,2,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.lugarDossier")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)("data",i.data)},dependencies:[m.O5,W.XX,W.MI,$.s,T.xw,T.SQ,T.yH,Q.k,a.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.inicial[_ngcontent-%COMP%], .modificado[_ngcontent-%COMP%], .remoto[_ngcontent-%COMP%]{display:block;margin:.5em}.diff-field[_ngcontent-%COMP%]{font-weight:700;font-size:20px}"],changeDetection:0}),s})(),me=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["lugar-dossier-view-detail"]],inputs:{data:"data"},decls:1,vars:4,consts:[[3,"disabled","data"]],template:function(t,i){1&t&&e._UZ(0,"lugar-dossier-view-edit",0),2&t&&(e.Akn("detail"),e.Q6J("disabled",!0)("data",i.data))},dependencies:[q],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}"],changeDetection:0}),s})();const ge=["actions"];function he(s,r){if(1&s){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"lugar-dossier-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);return e.KtG(o.clearErrors())}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",11),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);e.oxw();const n=e.MAs(1);return e.KtG(n.execClearAndJumpToAction(o.saveValue(),"create"))}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);e.oxw();const n=e.MAs(1);return e.KtG(n.execAndJumpToAction(o.saveValue(),n.isAllowed("detail")?"detail":"edit",n.empty))}),e.ALo(12,"translate"),e.qZA()}if(2&s){const t=e.MAs(6),i=e.oxw(),o=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.lugar-dossier-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.lugar-dossier-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.lugar-dossier-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.lugar-dossier-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==o?null:o.empty)("acl",null==o?null:o.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.lugar-dossier-view.list.action.create.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.lugar-dossier-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.lugar-dossier-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}function ve(s,r){if(1&s&&e._UZ(0,"lugar-dossier-view-detail",13),2&s){e.oxw();const t=e.MAs(1);e.Q6J("data",null==t?null:t.selection)}}function _e(s,r){if(1&s){const t=e.EpF();e._UZ(0,"action-close-confirm",7),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"lugar-dossier-view-edit",8,9),e.TgZ(7,"action-command-button",10),e.NdJ("run",function(){e.CHM(t),e.oxw();const o=e.MAs(1);return e.KtG(o.jumpToAction(o.isAllowed("detail")?"detail":"",o.isAllowed("detail")?o.selection:null))}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",10),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);return e.KtG(o.clearErrors())}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);e.oxw();const n=e.MAs(1);return e.KtG(n.execAndJumpToAction(o.saveValue(),n.isAllowed("detail")?"detail":"edit",n.selection))}),e.ALo(12,"translate"),e.qZA()}if(2&s){const t=e.MAs(6),i=e.oxw(),o=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.lugar-dossier-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.lugar-dossier-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.lugar-dossier-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.lugar-dossier-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==o?null:o.selection)("acl",null==o?null:o.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.lugar-dossier-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=t.formView&&t.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.lugar-dossier-view.list.action.edit.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.lugar-dossier-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}let we=(()=>{class s{constructor(t){this.lugarDossierRepository=t,this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.delete=i=>this.lugarDossierRepository.delete(this.lugarDossierRepository.key(i)),this.deleteSelection=i=>{const o=new G;return i&&(o.uids=i.map(n=>n.uid).join(",")),this.lugarDossierRepository.deleteAllForQuery(o)}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["lugar-dossier-view-actions-container"]],viewQuery:function(t,i){if(1&t&&e.Gf(ge,5),2&t){let o;e.iGM(o=e.CRH())&&(i.actions=o.first)}},inputs:{fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:26,vars:64,consts:[[3,"repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"]],template:function(t,i){if(1&t&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(n){return i.onAction.emit(n)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,he,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,ve,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,_e,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e.qZA()),2&t){const o=e.MAs(1);e.Q6J("repository",i.lugarDossierRepository)("asDialog",i.asDialog)("parents",i.parents),e.xp6(2),e.s9C("label",e.lcZ(3,32,"proyecto.lugar-dossier-view.list.action.create.label")),e.hYB("title","",null==o||null==o.selection?null:o.selection.lugar," ",null==o||null==o.selection?null:o.selection.dossier,""),e.s9C("subtitle",e.lcZ(4,34,"proyecto.lugar-dossier-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,36,"proyecto.lugar-dossier-view.list.action.detail.label")),e.hYB("title","",null==o||null==o.selection?null:o.selection.lugar," ",null==o||null==o.selection?null:o.selection.dossier,""),e.s9C("subtitle",e.lcZ(8,38,"proyecto.lugar-dossier-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,40,"proyecto.lugar-dossier-view.list.action.edit.label")),e.hYB("title","",null==o||null==o.selection?null:o.selection.lugar," ",null==o||null==o.selection?null:o.selection.dossier,""),e.s9C("subtitle",e.lcZ(12,42,"proyecto.lugar-dossier-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,44,"proyecto.lugar-dossier-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,46,"proyecto.lugar-dossier-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,48,"proyecto.lugar-dossier-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,50,"proyecto.lugar-dossier-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,52,"proyecto.lugar-dossier-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",i.delete),e.xp6(6),e.s9C("label",e.lcZ(21,54,"proyecto.lugar-dossier-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,56,"proyecto.lugar-dossier-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,58,"proyecto.lugar-dossier-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,60,"proyecto.lugar-dossier-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,62,"proyecto.lugar-dossier-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",i.deleteSelection)}},dependencies:[y.V4,y.fd,y.Lo,y.Fs,me,q,a.X$],changeDetection:0}),s})();var be=l(502);function xe(s,r){if(1&s&&(e._UZ(0,"editable-text",4),e.ALo(1,"translate"),e.ALo(2,"translate")),2&s){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"proyecto.lugar-dossier-view.form.search.label")),e.s9C("placeholder",e.lcZ(2,5,"proyecto.lugar-dossier-view.form.search.placeholder")),e.Q6J("control",t.fields.search.control)}}function Ce(s,r){if(1&s&&(e._UZ(0,"editable-selectone",5),e.ALo(1,"translate"),e.ALo(2,"translate")),2&s){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.lugar-dossier-view.form.lugar.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.lugar-dossier-view.form.lugar.placeholder")),e.Q6J("control",t.fields.lugar.control)("search",t.relatedLugarDossierLugar)("retrieve",t.retrieveLugarDossierLugar)}}function Ae(s,r){if(1&s&&(e._UZ(0,"editable-selectone",6),e.ALo(1,"translate"),e.ALo(2,"translate")),2&s){const t=e.oxw(2);e.s9C("label",e.lcZ(1,5,"proyecto.lugar-dossier-view.form.dossier.label")),e.s9C("placeholder",e.lcZ(2,7,"proyecto.lugar-dossier-view.form.dossier.placeholder")),e.Q6J("control",t.fields.dossier.control)("search",t.relatedLugarDossierDossier)("retrieve",t.retrieveLugarDossierDossier)}}function De(s,r){if(1&s&&(e.YNc(0,xe,3,7,"editable-text",1),e.YNc(1,Ce,3,9,"editable-selectone",2),e.YNc(2,Ae,3,9,"editable-selectone",3)),2&s){const t=e.oxw();e.Q6J("ngIf",null==t.fields.search?null:t.fields.search.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.lugar?null:t.fields.lugar.visible),e.xp6(1),e.Q6J("ngIf",null==t.fields.dossier?null:t.fields.dossier.visible)}}let ye=(()=>{class s{constructor(t,i,o,n,p,b){this.lugarDossierRepository=t,this.lugarRepository=i,this.dossierRepository=o,this.cdRef=n,this.appState=p,this.disabled=!1,this.defaults={},this.fixed=[],this.hidden=[],this.fields={search:{visible:!0,editable:!0,disabled:!1},lugar:{visible:!0,editable:!0,disabled:!1},dossier:{visible:!0,editable:!0,disabled:!1}},this.fixedFields=[],this.initialsAndDefaults={},this.dirty=!1,this.invalid=!1,this.error=null,this.contextFilter={},this.subscriptions=new P.w0,this.relatedLugarDossierLugar=d=>this.lugarRepository.list(this.filter(new j.ae,d,this.lugarDossierLugarFilter)),this.retrieveLugarDossierLugar=d=>this.lugarRepository.retrieve(d.uid),this.relatedLugarDossierDossier=d=>this.dossierRepository.list(this.filter(new N.w4,d,this.lugarDossierDossierFilter)),this.retrieveLugarDossierDossier=d=>this.dossierRepository.retrieve(d.uid),this.initialsAndDefaults={},this.form=b.group({search:this.fields.search.control=new u.NI("",[]),lugar:this.fields.lugar.control=new u.NI("",[]),dossier:this.fields.dossier.control=new u.NI("",[])})}ngOnInit(){this.subscriptions.add(this.appState.bindSelection(this.contextFilter).subscribe()),this.subscriptions.add(this.appState.fixeds.get().subscribe({next:t=>{this.updateValues()}}))}ngAfterViewInit(){this.acl&&this.updateAcl(),this.subscriptions.add(this.form.valueChanges.subscribe({next:()=>{this.updateValues()}})),this.formView&&this.formView.bindValues(this.fields)}ngOnDestroy(){this.subscriptions.unsubscribe()}updateValues(){var t,i;this.formView&&this.formView.bindValues(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}updateAcl(){var t,i;this.formView&&this.formView.bindFields(this.fields),this.dirty=!(null===(t=this.form)||void 0===t||!t.dirty),this.invalid=!(null===(i=this.form)||void 0===i||!i.invalid),this.cdRef.detectChanges()}filter(t,i,o){if(t.search=i,o)for(const n of Object.keys(o))t[n]=o[n];if(this.contextFilter)for(const n of Object.keys(this.contextFilter))t[n]=this.contextFilter[n];return t}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.S),e.Y36(z._),e.Y36(O.h),e.Y36(e.sBO),e.Y36(X.aB),e.Y36(u.qu))},s.\u0275cmp=e.Xpm({type:s,selectors:[["lugar-dossier-view-search"]],viewQuery:function(t,i){if(1&t&&e.Gf(Q.k,7),2&t){let o;e.iGM(o=e.CRH())&&(i.formView=o.first)}},inputs:{disabled:"disabled",defaults:"defaults",editables:"editables",visibles:"visibles",fixed:"fixed",hidden:"hidden",acl:"acl",lugarDossierLugarFilter:"lugarDossierLugarFilter",lugarDossierDossierFilter:"lugarDossierDossierFilter"},decls:2,vars:9,consts:[["fxLayout","row wrap","fxLayoutGap","10px",3,"messagePreffix","form","disabled","fixed","hidden","editables","visibles","defaults","acl"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-search",3,"control","label","placeholder",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-lugar","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-dossier","display","nombre",3,"control","label","placeholder","search","retrieve",4,"ngIf"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-search",3,"control","label","placeholder"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-lugar","display","nombre",3,"control","label","placeholder","search","retrieve"],["fxFlex","20%","fxFlex.sm","45%","fxFlex.xs","45%","id","editable-lugar-dossier-dossier","display","nombre",3,"control","label","placeholder","search","retrieve"]],template:function(t,i){1&t&&(e.TgZ(0,"form-view",0),e.YNc(1,De,3,3,"ng-template"),e.qZA()),2&t&&e.Q6J("messagePreffix","proyecto.lugarDossier")("form",i.form)("disabled",i.disabled)("fixed",i.fixedFields)("hidden",i.hidden)("editables",i.editables)("visibles",i.visibles)("defaults",i.initialsAndDefaults)("acl",i.acl)},dependencies:[m.O5,$.s,be.x,T.xw,T.SQ,T.yH,Q.k,a.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.inicial[_ngcontent-%COMP%], .modificado[_ngcontent-%COMP%], .remoto[_ngcontent-%COMP%]{display:block;margin:.5em}.diff-field[_ngcontent-%COMP%]{font-weight:700;font-size:20px}"],changeDetection:0}),s})();const Le=["list"],Ze=["searchForm"],Ve=["container"];function Te(s,r){if(1&s&&e._uU(0),2&s){const t=r.$implicit;e.AsE("",t.lugar,"",t.dossier,"")}}function Fe(s,r){1&s&&e._uU(0),2&s&&e.Oqu(r.$implicit.lugar)}function Me(s,r){1&s&&e._uU(0),2&s&&e.Oqu(r.$implicit.dossier)}const Je=function(){return["sort"]},Re=function(){return[]};function Oe(s,r){if(1&s){const t=e.EpF();e._UZ(0,"lugar-dossier-view-search",10,11),e.TgZ(2,"div",12),e._UZ(3,"span",13),e.TgZ(4,"button",14),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.advancedSearch())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&s){e.oxw();const t=e.MAs(1),i=e.oxw();e.Q6J("fixed",i.fixed)("defaults",i.defaults)("hidden",t.showTable?e.DdM(6,Je):e.DdM(7,Re)),e.xp6(5),e.Oqu(e.lcZ(6,4,"APP_SEARCH"))}}function Qe(s,r){if(1&s&&(e.TgZ(0,"list-view",3,4),e.YNc(2,Te,1,2,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,Fe,1,1,"ng-template"),e.qZA(),e.TgZ(7,"list-view-column",6),e.ALo(8,"translate"),e.YNc(9,Me,1,1,"ng-template"),e.qZA(),e.TgZ(10,"list-view-no-content"),e._UZ(11,"img",7),e.TgZ(12,"div")(13,"h1"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"list-view-no-results"),e._UZ(20,"img",8),e.TgZ(21,"div")(22,"h1"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"list-view-search-form",9),e.ALo(29,"translate"),e.ALo(30,"translate"),e.YNc(31,Oe,7,8,"ng-template"),e.qZA()()),2&s){const t=e.oxw();e.Q6J("filter",t.filter)("repository",t.lugarDossierRepository)("actionContainer",t.actions)("fullScreen",!t.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,12,"proyecto.lugar-dossier-view.list.column.lugar")),e.xp6(3),e.s9C("title",e.lcZ(8,14,"proyecto.lugar-dossier-view.list.column.dossier")),e.xp6(7),e.Oqu(e.lcZ(15,16,"proyecto.lugar-dossier-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(18,18,"proyecto.lugar-dossier-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(24,20,"proyecto.lugar-dossier-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(27,22,"proyecto.lugar-dossier-view.list.no-results.message")),e.xp6(2),e.s9C("title",e.lcZ(29,24,"proyecto.lugar-dossier-view.list.search.title")),e.s9C("subtitle",e.lcZ(30,26,"proyecto.lugar-dossier-view.list.search.subtitle"))}}let Ee=(()=>{class s{constructor(t,i,o,n,p){this.layoutService=t,this.translateService=i,this.snackService=o,this.cdRef=n,this.lugarDossierRepository=p,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.lugar-dossier-view.list.app-title").subscribe(t=>{this.layoutService.title.set(t)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10)}advancedSearch(){var t,i;if(this.searchForm&&this.list){const o={},n=this.searchForm.first.form.value;n.search&&(o.search=n.search),!(null===(t=n.lugar)||void 0===t)&&t.uid&&(o.lugar=n.lugar.uid),!(null===(i=n.dossier)||void 0===i)&&i.uid&&(o.dossier=n.dossier.uid),this.list.first.advancedFilter=o,this.list.first.makeSearch()}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(H.P),e.Y36(a.sK),e.Y36(B.ux),e.Y36(e.sBO),e.Y36(M.S))},s.\u0275cmp=e.Xpm({type:s,selectors:[["lugar-dossier-view-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Le,5),e.Gf(Ze,5),e.Gf(Ve,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.list=o),e.iGM(o=e.CRH())&&(i.searchForm=o),e.iGM(o=e.CRH())&&(i.container=o)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents"},outputs:{onAction:"onAction"},decls:3,vars:4,consts:[["id","lugarDossier-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"parents","fixed","defaults","onAction"],["container",""],["id","lugarDossier-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"],[3,"title","subtitle"],[3,"fixed","defaults","hidden"],["searchForm",""],[2,"display","flex"],[2,"flex","1 1 auto"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,Qe,32,28,"list-view",0),e.TgZ(1,"lugar-dossier-view-actions-container",1,2),e.NdJ("onAction",function(n){return i.onAction.emit(n)}),e.qZA()),2&t&&(e.Q6J("ngIf",i.actions&&!i.actions.action),e.xp6(1),e.Q6J("parents",i.parents)("fixed",i.fixed)("defaults",i.defaults))},dependencies:[m.O5,C.Rt,C.Yi,C.if,C.JR,C.To,c.lW,we,ye,a.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),s})();const Se=["actions"];function Ie(s,r){if(1&s){const t=e.EpF();e._UZ(0,"action-close-confirm",8),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"dossier-view-edit",9,10),e.TgZ(7,"action-command-button",11),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);return e.KtG(o.clearErrors())}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",12),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);e.oxw();const n=e.MAs(1);return e.KtG(n.execClearAndJumpToAction(o.saveValue(),"create"))}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",13),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);e.oxw();const n=e.MAs(1);return e.KtG(n.execAndJumpToAction(o.saveValue(),n.isAllowed("detail")?"detail":"edit",n.empty))}),e.ALo(12,"translate"),e.qZA()}if(2&s){const t=e.MAs(6),i=e.oxw(),o=e.MAs(1);e.s9C("ok",e.lcZ(1,18,"proyecto.dossier-view.list.action.create.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,20,"proyecto.dossier-view.list.action.create.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,22,"proyecto.dossier-view.list.action.create.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,24,"proyecto.dossier-view.list.action.create.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==o?null:o.empty)("acl",null==o?null:o.acl),e.xp6(2),e.s9C("label",e.lcZ(8,26,"proyecto.dossier-view.list.action.create.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(10,28,"proyecto.dossier-view.list.action.create.save-and-other")),e.Q6J("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid),e.xp6(2),e.s9C("label",e.lcZ(12,30,"proyecto.dossier-view.list.action.create.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}function Ue(s,r){if(1&s&&e._UZ(0,"dossier-view-detail",14),2&s){e.oxw();const t=e.MAs(1);e.Q6J("data",null==t?null:t.selection)}}function Ye(s,r){if(1&s){const t=e.EpF();e._UZ(0,"action-close-confirm",8),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e._UZ(5,"dossier-view-edit",9,10),e.TgZ(7,"action-command-button",11),e.NdJ("run",function(){e.CHM(t),e.oxw();const o=e.MAs(1);return e.KtG(o.jumpToAction(o.isAllowed("detail")?"detail":"",o.isAllowed("detail")?o.selection:null))}),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"action-command-button",11),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);return e.KtG(o.clearErrors())}),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"action-command-button",13),e.NdJ("run",function(){e.CHM(t);const o=e.MAs(6);e.oxw();const n=e.MAs(1);return e.KtG(n.execAndJumpToAction(o.saveValue(),n.isAllowed("detail")?"detail":"edit",n.selection))}),e.ALo(12,"translate"),e.qZA()}if(2&s){const t=e.MAs(6),i=e.oxw(),o=e.MAs(1);e.s9C("ok",e.lcZ(1,17,"proyecto.dossier-view.list.action.edit.confirm-close-unsaved.ok")),e.s9C("cancel",e.lcZ(2,19,"proyecto.dossier-view.list.action.edit.confirm-close-unsaved.cancel")),e.s9C("title",e.lcZ(3,21,"proyecto.dossier-view.list.action.edit.confirm-close-unsaved.title")),e.s9C("message",e.lcZ(4,23,"proyecto.dossier-view.list.action.edit.confirm-close-unsaved.message")),e.Q6J("required",t.dirty),e.xp6(5),e.Q6J("fixed",i.fixed)("defaults",i.defaults)("data",null==o?null:o.selection)("acl",null==o?null:o.acl),e.xp6(2),e.s9C("label",e.lcZ(8,25,"proyecto.dossier-view.list.action.edit.cancel")),e.Q6J("visible",!(null!=t.formView&&t.formView.error)),e.xp6(2),e.s9C("label",e.lcZ(10,27,"proyecto.dossier-view.list.action.edit.back")),e.Q6J("visible",null==t.formView?null:t.formView.error),e.xp6(2),e.s9C("label",e.lcZ(12,29,"proyecto.dossier-view.list.action.edit.save")),e.Q6J("primary",!0)("visible",!(null!=t.formView&&t.formView.error))("disabled",!t.dirty||t.invalid)}}const k=function(s){return{dossier:s}},Ne=function(){return["dossier"]};function Pe(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"lugar-dossier-view-list",17),e.NdJ("onAction",function(o){e.CHM(t),e.oxw(3);const n=e.MAs(1);return e.KtG(n.fireInnerAction(o))}),e.qZA()}if(2&s){const t=e.oxw(3),i=e.MAs(1);e.Q6J("uid","lugaresDossier")("parents",i.childParents())("embbed",!0)("defaults",t.defaultsForChild(e.VKq(6,k,null==i?null:i.selection),"lugaresDossier"))("fixed",t.fixedForChild(e.DdM(8,Ne),"lugaresDossier"))("filter",t.filtersForChild(e.VKq(9,k,null==i||null==i.selection?null:i.selection.uid),"lugaresDossier"))}}function Ge(s,r){if(1&s&&e.YNc(0,Pe,1,11,"lugar-dossier-view-list",16),2&s){e.oxw(2);const t=e.MAs(1);e.Q6J("ngIf",null==t||null==t.selection?null:t.selection.uid)}}function Ke(s,r){if(1&s&&(e.TgZ(0,"action-command",15),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,Ge,1,1,"ng-template"),e.qZA()),2&s){e.oxw();const t=e.MAs(1);e.s9C("label",e.lcZ(1,3,"proyecto.dossier-view.list.action.lugares-dossier.label")),e.s9C("title",null==t||null==t.selection?null:t.selection.nombre),e.s9C("subtitle",e.lcZ(2,5,"proyecto.dossier-view.list.action.lugares-dossier.subtitle"))}}let He=(()=>{class s{constructor(t,i,o){this.lugarDossierRepository=t,this.cdRef=i,this.dossierRepository=o,this.fixed=[],this.defaults={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.asDialog=!1,this.onAction=new e.vpe,this.lugaresDossierAllow=!1,this.delete=n=>this.dossierRepository.delete(this.dossierRepository.key(n)),this.deleteSelection=n=>{const p=new N.w4;return n&&(p.uids=n.map(b=>b.uid).join(",")),this.dossierRepository.deleteAllForQuery(p)},this.subscriptions=new P.w0}ngOnInit(){this.subscriptions.add(this.lugarDossierRepository.genericAcl().subscribe(t=>{var i;this.lugaresDossierAllow=!1,null===(i=t.allows)||void 0===i||i.forEach(o=>{"list"==o.name&&(this.lugaresDossierAllow=!!o.allowed)}),this.cdRef.detectChanges()}))}ngOnDestroy(){this.subscriptions.unsubscribe()}fixedForChild(t,i){return this.childFixeds[i]?t.concat(this.childFixeds[i]):t}defaultsForChild(t,i){return this.childDefaults[i]?Object.assign(t,this.childDefaults[i]):t}filtersForChild(t,i){return this.childFilters[i]?Object.assign(t,this.childFilters[i]):t}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.S),e.Y36(e.sBO),e.Y36(O.h))},s.\u0275cmp=e.Xpm({type:s,selectors:[["dossier-view-actions-container"]],viewQuery:function(t,i){if(1&t&&e.Gf(Se,5),2&t){let o;e.iGM(o=e.CRH())&&(i.actions=o.first)}},inputs:{fixed:"fixed",defaults:"defaults",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults",asDialog:"asDialog"},outputs:{onAction:"onAction"},decls:27,vars:62,consts:[[3,"repository","asDialog","parents","onAction"],["actions",""],["name","create","acl","create","type","create","icon","add",3,"label","title","subtitle"],["name","detail","acl","retrieve !update","icon","info",3,"label","principal","title","subtitle"],["name","edit","acl","update","icon","edit",3,"label","principal","title","subtitle"],["name","delete","acl","delete","icon","delete_forever",3,"label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","delete_all","acl","delete","icon","delete_forever",3,"multiple","label","close","confirmOk","confirmCancel","confirmTitle","confirmSubtitle","exec"],["name","lugaresDossier","acl","retrieve","icon","home",3,"label","title","subtitle",4,"ngIf"],[3,"required","ok","cancel","title","message"],[3,"fixed","defaults","data","acl"],["form",""],[3,"label","visible","run"],[3,"label","visible","disabled","run"],[3,"primary","label","visible","disabled","run"],[3,"data"],["name","lugaresDossier","acl","retrieve","icon","home",3,"label","title","subtitle"],["style","display: flex; min-height: 400px",3,"uid","parents","embbed","defaults","fixed","filter","onAction",4,"ngIf"],[2,"display","flex","min-height","400px",3,"uid","parents","embbed","defaults","fixed","filter","onAction"]],template:function(t,i){if(1&t&&(e.TgZ(0,"action-container",0,1),e.NdJ("onAction",function(n){return i.onAction.emit(n)}),e.TgZ(2,"action-command",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,Ie,13,32,"ng-template"),e.qZA(),e.TgZ(6,"action-command",3),e.ALo(7,"translate"),e.ALo(8,"translate"),e.YNc(9,Ue,1,1,"ng-template"),e.qZA(),e.TgZ(10,"action-command",4),e.ALo(11,"translate"),e.ALo(12,"translate"),e.YNc(13,Ye,13,31,"ng-template"),e.qZA(),e._UZ(14,"action-command",5),e.ALo(15,"translate"),e.ALo(16,"translate"),e.ALo(17,"translate"),e.ALo(18,"translate"),e.ALo(19,"translate"),e._UZ(20,"action-command",6),e.ALo(21,"translate"),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.ALo(25,"translate"),e.YNc(26,Ke,4,7,"action-command",7),e.qZA()),2&t){const o=e.MAs(1);e.Q6J("repository",i.dossierRepository)("asDialog",i.asDialog)("parents",i.parents),e.xp6(2),e.s9C("label",e.lcZ(3,30,"proyecto.dossier-view.list.action.create.label")),e.s9C("title",null==o||null==o.selection?null:o.selection.nombre),e.s9C("subtitle",e.lcZ(4,32,"proyecto.dossier-view.list.action.create.title")),e.xp6(4),e.s9C("label",e.lcZ(7,34,"proyecto.dossier-view.list.action.detail.label")),e.s9C("title",null==o||null==o.selection?null:o.selection.nombre),e.s9C("subtitle",e.lcZ(8,36,"proyecto.dossier-view.list.action.detail.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(11,38,"proyecto.dossier-view.list.action.edit.label")),e.s9C("title",null==o||null==o.selection?null:o.selection.nombre),e.s9C("subtitle",e.lcZ(12,40,"proyecto.dossier-view.list.action.edit.title")),e.Q6J("principal",!0),e.xp6(4),e.s9C("label",e.lcZ(15,42,"proyecto.dossier-view.list.action.delete.label")),e.s9C("confirmOk",e.lcZ(16,44,"proyecto.dossier-view.list.action.delete.popup.confirm")),e.s9C("confirmCancel",e.lcZ(17,46,"proyecto.dossier-view.list.action.delete.popup.cancel")),e.s9C("confirmTitle",e.lcZ(18,48,"proyecto.dossier-view.list.action.delete.popup.title")),e.s9C("confirmSubtitle",e.lcZ(19,50,"proyecto.dossier-view.list.action.delete.popup.content")),e.Q6J("close",!0)("exec",i.delete),e.xp6(6),e.s9C("label",e.lcZ(21,52,"proyecto.dossier-view.list.action.delete-selecion.label")),e.s9C("confirmOk",e.lcZ(22,54,"proyecto.dossier-view.list.action.delete-selecion.popup.confirm")),e.s9C("confirmCancel",e.lcZ(23,56,"proyecto.dossier-view.list.action.delete-selecion.popup.cancel")),e.s9C("confirmTitle",e.lcZ(24,58,"proyecto.dossier-view.list.action.delete-selecion.popup.title")),e.s9C("confirmSubtitle",e.lcZ(25,60,"proyecto.dossier-view.list.action.delete-selecion.popup.content")),e.Q6J("multiple",!0)("close",!0)("exec",i.deleteSelection),e.xp6(6),e.Q6J("ngIf",i.lugaresDossierAllow)}},dependencies:[y.V4,y.fd,y.Lo,y.Fs,m.O5,se.DossierViewDetailComponent,oe.DossierViewEditComponent,Ee,a.X$],changeDetection:0}),s})();const Be=["list"],je=["searchForm"],ze=["container"];function Xe(s,r){1&s&&e._uU(0),2&s&&e.Oqu(r.$implicit.nombre)}function We(s,r){1&s&&e._uU(0),2&s&&e.Oqu(r.$implicit.nombre)}function $e(s,r){if(1&s&&(e.TgZ(0,"list-view",3,4),e.YNc(2,Xe,1,1,"ng-template",null,5,e.W1O),e.TgZ(4,"list-view-column",6),e.ALo(5,"translate"),e.YNc(6,We,1,1,"ng-template"),e.qZA(),e.TgZ(7,"list-view-no-content"),e._UZ(8,"img",7),e.TgZ(9,"div")(10,"h1"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"list-view-no-results"),e._UZ(17,"img",8),e.TgZ(18,"div")(19,"h1"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.ALo(24,"translate"),e.qZA()()()()),2&s){const t=e.oxw();e.Q6J("filter",t.filter)("repository",t.dossierRepository)("actionContainer",t.actions)("fullScreen",!t.embbed),e.xp6(4),e.s9C("title",e.lcZ(5,9,"proyecto.dossier-view.list.column.nombre")),e.xp6(7),e.Oqu(e.lcZ(12,11,"proyecto.dossier-view.list.no-content.title")),e.xp6(3),e.Oqu(e.lcZ(15,13,"proyecto.dossier-view.list.no-content.message")),e.xp6(6),e.Oqu(e.lcZ(21,15,"proyecto.dossier-view.list.no-results.title")),e.xp6(3),e.Oqu(e.lcZ(24,17,"proyecto.dossier-view.list.no-results.message"))}}const qe=[{path:"",component:(()=>{class s{constructor(t,i,o,n,p){this.layoutService=t,this.translateService=i,this.snackService=o,this.cdRef=n,this.dossierRepository=p,this.uid="list",this.embbed=!1,this.defaults={},this.fixed=[],this.filter={},this.parents=[],this.childFixeds={},this.childFilters={},this.childDefaults={},this.onAction=new e.vpe}ngAfterViewInit(){setTimeout(()=>{this.embbed||this.translateService.get("proyecto.dossier-view.list.app-title").subscribe(t=>{this.layoutService.title.set(t)}),this.container&&(this.actions=this.container.first.actions,this.cdRef.detectChanges())},10)}advancedSearch(){if(this.searchForm&&this.list){const t={},i=this.searchForm.first.form.value;i.search&&(t.search=i.search),this.list.first.advancedFilter=t,this.list.first.makeSearch()}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(H.P),e.Y36(a.sK),e.Y36(B.ux),e.Y36(e.sBO),e.Y36(O.h))},s.\u0275cmp=e.Xpm({type:s,selectors:[["dossier-view-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Be,5),e.Gf(je,5),e.Gf(ze,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.list=o),e.iGM(o=e.CRH())&&(i.searchForm=o),e.iGM(o=e.CRH())&&(i.container=o)}},inputs:{uid:"uid",embbed:"embbed",defaults:"defaults",fixed:"fixed",filter:"filter",parents:"parents",childFixeds:"childFixeds",childFilters:"childFilters",childDefaults:"childDefaults"},outputs:{onAction:"onAction"},decls:3,vars:7,consts:[["id","dossier-list",3,"filter","repository","actionContainer","fullScreen",4,"ngIf"],[3,"parents","childFixeds","childFilters","childDefaults","fixed","defaults","onAction"],["container",""],["id","dossier-list",3,"filter","repository","actionContainer","fullScreen"],["list",""],["title",""],[3,"title"],["src","./assets/img/resources/no-content.png","alt","no-content"],["src","./assets/img/resources/no-results.png","alt","no-results"]],template:function(t,i){1&t&&(e.YNc(0,$e,25,19,"list-view",0),e.TgZ(1,"dossier-view-actions-container",1,2),e.NdJ("onAction",function(n){return i.onAction.emit(n)}),e.qZA()),2&t&&(e.Q6J("ngIf",i.actions&&!i.actions.action),e.xp6(1),e.Q6J("parents",i.parents)("childFixeds",i.childFixeds)("childFilters",i.childFilters)("childDefaults",i.childDefaults)("fixed",i.fixed)("defaults",i.defaults))},dependencies:[m.O5,C.Rt,C.Yi,C.if,C.To,He,a.X$],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative}"],changeDetection:0}),s})()}];let ke=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[K.Bz.forChild(qe),K.Bz]}),s})(),et=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ie,ke]}),s})()},9873:(I,A,l)=>{l.d(A,{w4:()=>w});class w{static clone(c){const g=new w;return g.pageSize=c.pageSize,g.pageNumber=c.pageNumber,g.lastRow=c.lastRow,g.search=c.search,g}}},7130:(I,A,l)=>{l.d(A,{h:()=>x});var m=l(2433),a=l(5e3),w=l(5276);let x=(()=>{class c extends m._j{constructor(h){super({uid:"uid",group:"net-civeira-ejemplos-agenda",name:"dossier",path:"proyecto-dossieres",acl:"proyecto-dossieres"},h)}}return c.\u0275fac=function(h){return new(h||c)(a.LFG(w.D))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},1600:(I,A,l)=>{l.d(A,{Y:()=>F});var m=l(791),a=l(5e3),w=l(6050),x=l(9808),c=l(3075),g=l(7093),h=l(7322),Z=l(7531),V=l(5245);function U(u,D){if(1&u){const f=a.EpF();a.TgZ(0,"button",5),a.NdJ("click",function(){a.CHM(f);const R=a.oxw(2);return a.KtG(R.showHelp())}),a.TgZ(1,"mat-icon"),a._uU(2,"help_outline"),a.qZA()()}}function Y(u,D){if(1&u&&(a.TgZ(0,"mat-error"),a._UZ(1,"editable-error-block",6),a.qZA()),2&u){const f=a.oxw(2);a.xp6(1),a.Q6J("messages",f.errorMessages)("control",f.control)}}function J(u,D){if(1&u&&(a.TgZ(0,"mat-form-field",1)(1,"mat-label"),a._uU(2),a.qZA(),a._UZ(3,"input",2),a.YNc(4,U,3,0,"button",3),a.YNc(5,Y,2,2,"mat-error",4),a.qZA()),2&u){const f=a.oxw();a.Q6J("floatLabel",f.floatLabel)("appearance",f.appearance),a.xp6(2),a.Oqu(f.label),a.xp6(1),a.Q6J("required",f.required)("placeholder",f.placeholder)("formControl",f.control),a.uIk("min",f.minValue)("max",f.maxValue),a.xp6(1),a.Q6J("ngIf",f.help),a.xp6(1),a.Q6J("ngIf",f.control.invalid)}}let F=(()=>{class u extends m.G7{constructor(f){super(f)}}return u.\u0275fac=function(f){return new(f||u)(a.Y36(w.U))},u.\u0275cmp=a.Xpm({type:u,selectors:[["editable-integer"]],features:[a.qOj],decls:1,vars:1,consts:[["fxFlex","100%",3,"floatLabel","appearance",4,"ngIf"],["fxFlex","100%",3,"floatLabel","appearance"],["type","number","matInput","","type","number","onkeypress","return (event.charCode >= 48 && event.charCode <= 57)",3,"required","placeholder","formControl"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click"],[3,"messages","control"]],template:function(f,e){1&f&&a.YNc(0,J,6,10,"mat-form-field",0),2&f&&a.Q6J("ngIf",e.control)},dependencies:[x.O5,c.Fj,c.wV,c.JJ,c.Q7,c.qQ,c.Fd,m.qJ,c.oH,g.yH,h.TO,h.KE,h.hX,h.R9,Z.Nt,V.Hw],encapsulation:2,changeDetection:0}),u})()}}]);